(function(me,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],r):(me=typeof globalThis<"u"?globalThis:me||self,r(me["@agritheory/node-editor"]={},me.Vue))})(this,function(me,r){"use strict";var Rn;const jt=typeof window<"u",Tr=e=>typeof e<"u",$r=e=>typeof e=="boolean",ye=e=>typeof e=="function",ve=e=>typeof e=="number",we=e=>typeof e=="string",Dr=()=>{};jt&&(Rn=window==null?void 0:window.navigator)!=null&&Rn.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function te(e){return typeof e=="function"?e():r.unref(e)}function Ar(e,t){function n(...o){return new Promise((a,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(a).catch(i)})}return n}const Tn=e=>e();function zr(e=Tn){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}const a=(...i)=>{t.value&&e(...i)};return{isActive:r.readonly(t),pause:n,resume:o,eventFilter:a}}function $n(e,t=!1,n="Timeout"){return new Promise((o,a)=>{setTimeout(t?()=>a(n):o,e)})}function Vr(e){return e}function Ht(e,t){let n,o,a;const i=r.ref(!0),l=()=>{i.value=!0,a()};r.watch(e,l,{flush:"sync"});const s=ye(t)?t:t.get,u=ye(t)?void 0:t.set,d=r.customRef((c,f)=>(o=c,a=f,{get(){return i.value&&(n=s(),i.value=!1),o(),n},set(h){u==null||u(h)}}));return Object.isExtensible(d)&&(d.trigger=l),d}function je(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function Lr(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function Ut(e,t=!1){function n(f,{flush:h="sync",deep:b=!1,timeout:m,throwOnTimeout:x}={}){let k=null;const E=[new Promise(I=>{k=r.watch(e,X=>{f(X)!==t&&(k==null||k(),I(X))},{flush:h,deep:b,immediate:!0})})];return m!=null&&E.push($n(m,x).then(()=>te(e)).finally(()=>k==null?void 0:k())),Promise.race(E)}function o(f,h){if(!r.isRef(f))return n(X=>X===f,h);const{flush:b="sync",deep:m=!1,timeout:x,throwOnTimeout:k}=h??{};let E=null;const I=[new Promise(X=>{E=r.watch([e,f],([v,P])=>{t!==(v===P)&&(E==null||E(),X(v))},{flush:b,deep:m,immediate:!0})})];return x!=null&&I.push($n(x,k).then(()=>te(e)).finally(()=>(E==null||E(),te(e)))),Promise.race(I)}function a(f){return n(h=>!!h,f)}function i(f){return o(null,f)}function l(f){return o(void 0,f)}function s(f){return n(Number.isNaN,f)}function u(f,h){return n(b=>{const m=Array.from(b);return m.includes(f)||m.includes(te(f))},h)}function d(f){return c(1,f)}function c(f=1,h){let b=-1;return n(()=>(b+=1,b>=f),h)}return Array.isArray(te(e))?{toMatch:n,toContains:u,changed:d,changedTimes:c,get not(){return Ut(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:a,toBeNull:i,toBeNaN:s,toBeUndefined:l,changed:d,changedTimes:c,get not(){return Ut(e,!t)}}}function se(e){return Ut(e)}var Dn=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,Xr=Object.prototype.propertyIsEnumerable,Yr=(e,t)=>{var n={};for(var o in e)Fr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Dn)for(var o of Dn(e))t.indexOf(o)<0&&Xr.call(e,o)&&(n[o]=e[o]);return n};function Gr(e,t,n={}){const o=n,{eventFilter:a=Tn}=o,i=Yr(o,["eventFilter"]);return r.watch(e,Ar(a,t),i)}var jr=Object.defineProperty,Hr=Object.defineProperties,Ur=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable,Vn=(e,t,n)=>t in e?jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kr=(e,t)=>{for(var n in t||(t={}))An.call(t,n)&&Vn(e,n,t[n]);if(it)for(var n of it(t))zn.call(t,n)&&Vn(e,n,t[n]);return e},Wr=(e,t)=>Hr(e,Ur(t)),Zr=(e,t)=>{var n={};for(var o in e)An.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&it)for(var o of it(e))t.indexOf(o)<0&&zn.call(e,o)&&(n[o]=e[o]);return n};function Oe(e,t,n={}){const o=n,{eventFilter:a}=o,i=Zr(o,["eventFilter"]),{eventFilter:l,pause:s,resume:u,isActive:d}=zr(a);return{stop:Gr(e,t,Wr(Kr({},i),{eventFilter:l})),pause:s,resume:u,isActive:d}}function Ln(e){var t;const n=te(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Kt=jt?window:void 0;function Wt(...e){let t,n,o,a;if(we(e[0])||Array.isArray(e[0])?([n,o,a]=e,t=Kt):[t,n,o,a]=e,!t)return Dr;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],l=()=>{i.forEach(c=>c()),i.length=0},s=(c,f,h,b)=>(c.addEventListener(f,h,b),()=>c.removeEventListener(f,h,b)),u=r.watch(()=>[Ln(t),te(a)],([c,f])=>{l(),c&&i.push(...n.flatMap(h=>o.map(b=>s(c,h,b,f))))},{immediate:!0,flush:"post"}),d=()=>{u(),l()};return je(d),d}const qr=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function Fn(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:a=Kt,eventName:i="keydown",passive:l=!1}=o,s=qr(t);return Wt(a,i,u=>{s(u)&&n(u)},l)}function Qr(e,t=!1){const n=r.ref(),o=()=>n.value=!!e();return o(),Lr(o,t),n}function Jr(e){return JSON.parse(JSON.stringify(e))}const Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yn="__vueuse_ssr_handlers__";Xn[Yn]=Xn[Yn]||{};var Gn=Object.getOwnPropertySymbols,ea=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable,na=(e,t)=>{var n={};for(var o in e)ea.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Gn)for(var o of Gn(e))t.indexOf(o)<0&&ta.call(e,o)&&(n[o]=e[o]);return n};function oa(e,t,n={}){const o=n,{window:a=Kt}=o,i=na(o,["window"]);let l;const s=Qr(()=>a&&"ResizeObserver"in a),u=()=>{l&&(l.disconnect(),l=void 0)},d=r.watch(()=>Ln(e),f=>{u(),s.value&&a&&f&&(l=new ResizeObserver(t),l.observe(f,i))},{immediate:!0,flush:"post"}),c=()=>{u(),d()};return je(c),{isSupported:s,stop:c}}var jn;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(jn||(jn={}));var ra=Object.defineProperty,Hn=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,Un=(e,t,n)=>t in e?ra(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,la=(e,t)=>{for(var n in t||(t={}))aa.call(t,n)&&Un(e,n,t[n]);if(Hn)for(var n of Hn(t))ia.call(t,n)&&Un(e,n,t[n]);return e};la({linear:Vr},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function He(e,t,n,o={}){var a,i,l;const{clone:s=!1,passive:u=!1,eventName:d,deep:c=!1,defaultValue:f}=o,h=r.getCurrentInstance(),b=n||(h==null?void 0:h.emit)||((a=h==null?void 0:h.$emit)==null?void 0:a.bind(h))||((l=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:l.bind(h==null?void 0:h.proxy));let m=d;t||(t="modelValue"),m=d||m||`update:${t.toString()}`;const x=E=>s?ye(s)?s(E):Jr(E):E,k=()=>Tr(e[t])?x(e[t]):f;if(u){const E=k(),I=r.ref(E);return r.watch(()=>e[t],X=>I.value=x(X)),r.watch(I,X=>{(X!==e[t]||c)&&b(m,X)},{deep:c}),I}else return r.computed({get(){return k()},set(E){b(m,E)}})}function Y(e=()=>{}){const t=r.ref(new Set);e&&t.value.add(e);const n=o=>{t.value.delete(o)};return{on:o=>{t.value.has(e)&&t.value.delete(e),t.value.add(o);const a=()=>n(o);return je(a),{off:a}},off:n,trigger:o=>Promise.all(Array.from(t.value).map(a=>a(o))),fns:t}}const sa=["production","prod"];function Kn(e,...t){sa.includes(process.env.NODE_ENV||"")||console.warn(`[Vue Flow]: ${e}`,...t)}function ua(){return{edgesChange:Y(),nodesChange:Y(),nodeDoubleClick:Y(),nodeClick:Y(),nodeMouseEnter:Y(),nodeMouseMove:Y(),nodeMouseLeave:Y(),nodeContextMenu:Y(),nodeDragStart:Y(),nodeDrag:Y(),nodeDragStop:Y(),nodesInitialized:Y(),miniMapNodeClick:Y(),miniMapNodeDoubleClick:Y(),miniMapNodeMouseEnter:Y(),miniMapNodeMouseMove:Y(),miniMapNodeMouseLeave:Y(),connect:Y(),connectStart:Y(),connectEnd:Y(),clickConnectStart:Y(),clickConnectEnd:Y(),paneReady:Y(),move:Y(),moveStart:Y(),moveEnd:Y(),selectionDragStart:Y(),selectionDrag:Y(),selectionDragStop:Y(),selectionContextMenu:Y(),selectionStart:Y(),selectionEnd:Y(),viewportChangeStart:Y(),viewportChange:Y(),viewportChangeEnd:Y(),paneScroll:Y(),paneClick:Y(),paneContextMenu:Y(),paneMouseEnter:Y(),paneMouseMove:Y(),paneMouseLeave:Y(),edgeContextMenu:Y(),edgeMouseEnter:Y(),edgeMouseMove:Y(),edgeMouseLeave:Y(),edgeDoubleClick:Y(),edgeClick:Y(),edgeUpdateStart:Y(),edgeUpdate:Y(),edgeUpdateEnd:Y(),updateNodeInternals:Y(),error:Y(e=>Kn(e.message))}}function ca(e,t){r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const a=i=>{e(n,i)};o.on(a),je(()=>{o.off(a)})}})}var re=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(re||{});const Wn={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class ae extends Error{constructor(t,...n){var o;super((o=Wn[t])==null?void 0:o.call(Wn,...n)),this.code=t}}const Zt=()=>typeof window<"u"?window:{chrome:!1};function Zn(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function qt(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function lt(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Re(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function qn(e,t){return{x:Re(e.x,t[0][0],t[1][0]),y:Re(e.y,t[0][1],t[1][1])}}function Qn(e){const t=e.getRootNode(),n=Zt();return"elementFromPoint"in t?t:n.document}function Te(e){return e&&"id"in e&&"source"in e&&"target"in e}function da(e){return Te(e)&&"sourceNode"in e&&"targetNode"in e}function st(e){return e&&"id"in e&&!Te(e)}function $e(e){return st(e)&&"computedPosition"in e}function fa(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function ha(e,t={}){let n=t;return $e(e)||(n={type:e.type??t.type??"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:ne(e.data)?e.data:{},events:r.markRaw(ne(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function Jn(e,t={}){const n=ne(e.events)?e.events:t.events&&ne(t.events)?t.events:{},o=ne(e.data)?e.data:t.data&&ne(t.data)?t.data:{};return t=da(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:r.markRaw(n),label:(e.label&&!we(e.label)?r.markRaw(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function eo({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function pa(e,t){return t.some(n=>Te(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function ga({x:e,y:t},{x:n,y:o,zoom:a}){return{x:e*a+n,y:t*a+o}}function to({x:e,y:t},{x:n,y:o,zoom:a},i,[l,s]){const u={x:(e-n)/a,y:(t-o)/a};return i?{x:l*Math.round(u.x/l),y:s*Math.round(u.y/s)}:u}function ma(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function no({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function ya({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function oo(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:a={width:0,height:0}}={})=>ma(n,no({...o,...a})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ya(t)}function ro(e,t,{x:n,y:o,zoom:a}={x:0,y:0,zoom:1},i=!1,l=!1){const s={x:(t.x-n)/a,y:(t.y-o)/a,width:t.width/a,height:t.height/a};return e.filter(u=>{const{computedPosition:d={x:0,y:0},dimensions:c={width:0,height:0},selectable:f}=u;if(l&&!f)return!1;const h={...d,width:c.width||0,height:c.height||0},b=qt(s,h),m=typeof c.width>"u"||typeof c.height>"u"||c.width===0||c.height===0,x=i&&b>0,k=c.width*c.height;return m||x||b>=k})}function ut(e,t){const n=e.map(o=>we(o)?o:o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))}function ao(e,t,n,o,a,i=.1,l={x:0,y:0}){const s=t/(e.width*(1+i)),u=n/(e.height*(1+i)),d=Math.min(s,u),c=Re(d,o,a),f=e.x+e.width/2,h=e.y+e.height/2,b=t/2-f*c+(l.x??0),m=n/2-h*c+(l.y??0);return{x:b,y:m,zoom:c}}function va(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function io(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:io(n,t):!1}function Ne(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`}function ne(e){return typeof r.unref(e)<"u"}function wa(e,t,n){if(!e.source||!e.target)return n(new ae(re.EDGE_INVALID,e.id)),!1;let o;return Te(e)?o=e:o={...e,id:eo(e)},o=Jn(o),pa(o,t)?!1:o}function ba(e,t,n,o,a,i){if(!t.source||!t.target)return i(new ae(re.EDGE_INVALID,e.id)),!1;const l=o(e.id);if(!l)return i(new ae(re.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...u}=e,d={...u,id:a?eo(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(l),1,d),d}function lo(e,t,n,o){const a={},i=e.map(s=>{const u=ha(s,{...n(s.id),parentNode:s.parentNode});return s.parentNode&&(a[s.parentNode]=!0),u}),l=[...i,...t];return i.forEach(s=>{const u=l.find(d=>d.id===s.parentNode);s.parentNode&&!u&&o(new ae(re.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||a[s.id])&&(a[s.id]&&(s.isParent=!0),u&&(u.isParent=!0))}),i}var W=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(W||{}),Qt=(e=>(e.Partial="partial",e.Full="full",e))(Qt||{}),Se=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Se||{}),Ce=(e=>(e.Strict="strict",e.Loose="loose",e))(Ce||{}),Jt=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Jt||{}),ct=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(ct||{});const so=Symbol("vueFlow"),uo=Symbol("nodeId"),co=Symbol("nodeRef"),xa=Symbol("edgeId"),_a=Symbol("edgeRef"),dt=Symbol("slots");function Ea(e){const t=e??r.inject(uo,""),n=r.inject(co,null),{findNode:o,edges:a,emits:i}=oe(),l=o(t);return l||i.error(new ae(re.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:r.computed(()=>o(l.parentNode)),connectedEdges:r.computed(()=>ut([l],a.value))}}function en(e){return"clientX"in e}function De(e,t){var n,o;const a=en(e),i=a?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,l=a?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:l-((t==null?void 0:t.top)??0)}}function ft(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,a=((n==null?void 0:n.y)??0)+t.y,i=(n==null?void 0:n.width)??t.width,l=(n==null?void 0:n.height)??t.height;switch(e){case W.Top:return{x:o+i/2,y:a};case W.Right:return{x:o+i,y:a+l/2};case W.Bottom:return{x:o+i/2,y:a+l};case W.Left:return{x:o,y:a+l/2}}}function fo(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function ka(e,t,n,o,a,i){const l=ft(n,{...e.dimensions,...e.computedPosition},t),s=ft(i,{...o.dimensions,...o.computedPosition},a);return{sourceX:l.x,sourceY:l.y,targetX:s.x,targetY:s.y}}function Na({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:a,targetHeight:i,width:l,height:s,viewport:u}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+o,t.y+i)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const c=no({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:l/u.zoom,height:s/u.zoom}),f=Math.max(0,Math.min(c.x2,d.x2)-Math.max(c.x,d.x)),h=Math.max(0,Math.min(c.y2,d.y2)-Math.max(c.y,d.y));return Math.ceil(f*h)>0}function Sa(e,t,n=!1){let o=-1;const a=e.reduce((i,l)=>{const s=ve(l.zIndex);let u=s?l.zIndex:0;const d=t(l.source),c=t(l.target);return!d||!c||(n&&(u=s?l.zIndex:Math.max(d.computedPosition.z||0,c.computedPosition.z||0)),i[u]?i[u].push(l):i[u]=[l],o=u>o?u:o),i},{});return Object.entries(Object.keys(a).length?a:{0:[]}).map(([i,l])=>{const s=+i;return{edges:l,level:s,isMaxLevel:s===o}})}function tn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ho(e,t,n,o){return(t[n]||[]).reduce((a,i)=>(`${e.id}-${i.id}-${n}`!==o&&a.push({id:i.id||null,type:n,nodeId:e.id,...ft(i.position,{...e.dimensions,...e.computedPosition},i)}),a),[])}function Ca(e,t,n){let o=null,a=1/0;return n.forEach(i=>{const l=Math.sqrt((i.x-e.x)**2+(i.y-e.y)**2);l<=t&&l<a&&(a=l,o=i)}),o}function po(e,t,n,o,a,i,l,s,u,d){const c=i==="target",f=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:h,y:b}=De(e),m=s.elementFromPoint(h,b),x=m!=null&&m.classList.contains("vue-flow__handle")?m:f,k={handleDomNode:x,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null};if(x){const E=go(void 0,x),I=x.getAttribute("data-nodeid"),X=x.getAttribute("data-handleid"),v=x.classList.contains("connectable"),P=x.classList.contains("connectableend"),_={source:c?I:o,sourceHandle:c?X:a,target:c?o:I,targetHandle:c?a:X};k.connection=_,v&&P&&(n===Ce.Strict?c&&E==="source"||!c&&E==="target":I!==o||X!==a)&&(k.endHandle={nodeId:I,handleId:X,type:E},k.isValid=l(_,{edges:u,sourceNode:d(_.source),targetNode:d(_.target)}))}return k}function Ma({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((a,i)=>{const{handleBounds:l}=i;let s=[],u=[];return l&&(s=ho(i,l,"source",`${t}-${n}-${o}`),u=ho(i,l,"target",`${t}-${n}-${o}`)),a.push(...s,...u),a},[])}function go(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ba(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function mo(e,t,n){return e<t?Re(Math.abs(e-t),1,50)/50:e>n?-Re(Math.abs(e-n),1,50)/50:0}function yo(e,t){const n=mo(e.x,35,t.width-35)*20,o=mo(e.y,35,t.height-35)*20;return[n,o]}function ht(){return!0}function vo({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:a,onEdgeUpdate:i,onEdgeUpdateEnd:l}){const s=r.computed(()=>te(n)==="target"),{vueFlowRef:u,connectionMode:d,connectionRadius:c,connectOnClick:f,connectionClickStartHandle:h,nodesConnectable:b,autoPanOnConnect:m,findNode:x,panBy:k,getNodes:E,startConnection:I,updateConnection:X,endConnection:v,emits:P,viewport:_,edges:g,isValidConnection:N}=oe();let O=null,M=!1,R=null;function q(y){var A;const S=en(y),D=Qn(y.target);if(S&&y.button===0||!S){let j=function(U){$=De(U,w),z=Ca(to($,_.value,!1,[1,1]),c.value,F),L||(C(),L=!0);const J=po(U,z,d.value,te(t),te(e),s.value?"target":"source",H,D,g.value,x);if(O=J.connection,M=J.isValid,R=J.handleDomNode,X(z&&M?ga({x:z.x,y:z.y},_.value):$,J.endHandle,Ba(!!z,M)),!z&&!M&&!R)return tn(V);O&&O.source!==O.target&&R&&(tn(V),V=R,R.classList.add("connecting","vue-flow__handle-connecting"),R.classList.toggle("valid",M),R.classList.toggle("vue-flow__handle-valid",M))},K=function(U){(z||R)&&O&&M&&(i?i(U,O):P.connect(O)),P.connectEnd(U),a&&(l==null||l(U)),tn(V),cancelAnimationFrame(Z),v(U),L=!1,M=!1,O=null,R=null,D.removeEventListener("mousemove",j),D.removeEventListener("mouseup",K),D.removeEventListener("touchmove",j),D.removeEventListener("touchend",K)};const T=x(te(t));let H=o||N.value||ht;!H&&T&&(H=(s?T.isValidSourcePos:T.isValidTargetPos)||ht);let z,Z=0;const{x:G,y:Q}=De(y),B=D==null?void 0:D.elementFromPoint(G,Q),p=go(te(a),B),w=(A=u.value)==null?void 0:A.getBoundingClientRect();if(!w||!p)return;let V,$=De(y,w),L=!1;const F=Ma({nodes:E.value,nodeId:te(t),handleId:te(e),handleType:p}),C=()=>{if(!m)return;const[U,J]=yo($,w);k({x:U,y:J}),Z=requestAnimationFrame(C)};I({nodeId:te(t),handleId:te(e),type:p},{x:G-w.left,y:Q-w.top},y),P.connectStart({event:y,nodeId:te(t),handleId:te(e),handleType:p}),D.addEventListener("mousemove",j),D.addEventListener("mouseup",K),D.addEventListener("touchmove",j),D.addEventListener("touchend",K)}}function ee(y){if(f.value)if(!h.value)P.clickConnectStart({event:y,nodeId:te(t),handleId:te(e)}),I({nodeId:te(t),type:te(n),handleId:te(e)},void 0,y,!0);else{let A=o||N.value||ht;const S=x(te(t));if(!A&&S&&(A=(s?S.isValidSourcePos:S.isValidTargetPos)||ht),S&&(typeof S.connectable>"u"?b.value:S.connectable)===!1)return;const D=Qn(y.target),{connection:j,isValid:K}=po(y,{nodeId:te(t),id:te(e),type:te(n)},d.value,h.value.nodeId,h.value.handleId||null,h.value.type,A,D,g.value,x),T=j.source===j.target;K&&!T&&P.connect(j),P.clickConnectEnd(y),v(y,!0)}}return{handlePointerDown:q,handleClick:ee}}function Pa(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const Ia=["data-id","data-handleid","data-nodeid","data-handlepos"],Oa={name:"Handle",compatConfig:{MODE:3}},Ae=r.defineComponent({...Oa,props:{id:null,type:null,position:{default:W.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Pa(e,["position","connectable","connectableStart","connectableEnd","id","isValidConnection"]),n=r.toRef(t,"type","source"),{connectionStartHandle:o,connectionClickStartHandle:a,connectionEndHandle:i,vueFlowRef:l,nodesConnectable:s,noDragClassName:u,noPanClassName:d}=oe(),{id:c,node:f,nodeEl:h,connectedEdges:b}=Ea(),m=r.ref(),x=r.computed(()=>e.id??`${c}__handle-${e.position}`),k=r.computed(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),E=r.computed(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:I,handleClick:X}=vo({nodeId:c,handleId:x,isValidConnection:e.isValidConnection,type:n}),v=r.computed(()=>we(e.connectable)&&e.connectable==="single"?!b.value.some(O=>{const M=O[`${n.value}Handle`];return O[n.value]!==c?!1:M?M===x.value:!0}):ye(e.connectable)?e.connectable(f,b.value):ne(e.connectable)?e.connectable:s.value),P=r.computed(()=>{var O,M,R,q,ee,y;return((O=o.value)==null?void 0:O.nodeId)===c&&((M=o.value)==null?void 0:M.handleId)===x.value&&((R=o.value)==null?void 0:R.type)===n.value||((q=i.value)==null?void 0:q.nodeId)===c&&((ee=i.value)==null?void 0:ee.handleId)===x.value&&((y=i.value)==null?void 0:y.type)===n.value}),_=r.computed(()=>{var O,M,R;return((O=a.value)==null?void 0:O.nodeId)===c&&((M=a.value)==null?void 0:M.handleId)===x.value&&((R=a.value)==null?void 0:R.type)===n.value});se(()=>f.initialized).toBe(!0,{flush:"post"}).then(()=>{var O;const M=(O=f.handleBounds[n.value])==null?void 0:O.find(D=>D.id===x.value);if(!l.value||M)return;const R=l.value.querySelector(".vue-flow__transformationpane");if(!h||!m.value||!R||!x.value)return;const q=h.value.getBoundingClientRect(),ee=m.value.getBoundingClientRect(),y=window.getComputedStyle(R),{m22:A}=new window.DOMMatrixReadOnly(y.transform),S={id:x.value,position:e.position,x:(ee.left-q.left)/A,y:(ee.top-q.top)/A,...lt(m.value)};f.handleBounds[n.value]=[...f.handleBounds[n.value]??[],S]});function g(O){const M=en(O);v.value&&k.value&&(M&&O.button===0||!M)&&I(O)}function N(O){!c||!a.value&&!k.value||v.value&&X(O)}return(O,M)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:m,"data-id":`${r.unref(c)}-${r.unref(x)}-${r.unref(n)}`,"data-handleid":r.unref(x),"data-nodeid":r.unref(c),"data-handlepos":e.position,class:r.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${r.unref(x)}`,r.unref(u),r.unref(d),r.unref(n),{connectable:r.unref(v),connecting:r.unref(_),connectablestart:r.unref(k),connectableend:r.unref(E),connectionindicator:r.unref(v)&&(r.unref(k)&&!r.unref(P)||r.unref(E)&&r.unref(P))}]]),onMousedown:g,onTouchstartPassive:g,onClick:N},[r.renderSlot(O.$slots,"default",{id:e.id})],42,Ia))}}),pt=function({sourcePosition:e=W.Bottom,targetPosition:t=W.Top,label:n,connectable:o=!0,isValidTargetPos:a,isValidSourcePos:i}){return[r.h(Ae,{type:"target",position:t,connectable:o,isValidConnection:a}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(Ae,{type:"source",position:e,connectable:o,isValidConnection:i})]};pt.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"],pt.inheritAttrs=!1,pt.compatConfig={MODE:3};const Ra=pt,gt=function({sourcePosition:e=W.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(Ae,{type:"source",position:e,connectable:n,isValidConnection:o})]};gt.props=["sourcePosition","label","isValidSourcePos","connectable"],gt.inheritAttrs=!1,gt.compatConfig={MODE:3};const Ta=gt,mt=function({targetPosition:e=W.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[r.h(Ae,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};mt.props=["targetPosition","label","isValidTargetPos","connectable"],mt.inheritAttrs=!1,mt.compatConfig={MODE:3};const $a=mt;function wo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Da(e,t,n,o,a){return e.filter(i=>(i.selected||i.id===a)&&(!i.parentNode||!io(i,o))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var l,s;return r.markRaw({id:i.id,position:i.position||{x:0,y:0},distance:{x:n.x-((l=i.computedPosition)==null?void 0:l.x)||0,y:n.y-((s=i.computedPosition)==null?void 0:s.y)||0},from:i.computedPosition,extent:i.extent,parentNode:i.parentNode,dimensions:i.dimensions})})}function nn({id:e,dragItems:t,findNode:n}){const o=t.reduce((a,i)=>{const l=n(i.id);return l&&a.push(l),a},[]);return[e?o.find(a=>a.id===e):o[0],o]}function bo(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Aa(e,t,n){const[o,a,i,l]=typeof e!="string"?bo(e.padding):[0,0,0,0];return n&&ve(n.computedPosition.x)&&ve(n.computedPosition.y)&&ve(n.dimensions.width)&&ve(n.dimensions.height)?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+(n.dimensions.width-t.dimensions.width)-a,n.computedPosition.y+(n.dimensions.height-t.dimensions.height)-i]]:!1}function za(e,t,n,o){let a=e.extent||n;if(a==="parent"||!Array.isArray(a)&&(a==null?void 0:a.range)==="parent")if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=Aa(a,e,o);i&&(a=i)}else t(new ae(re.NODE_EXTENT_INVALID,e.id)),a=n;else if(Array.isArray(a)){const i=(o==null?void 0:o.computedPosition.x)||0,l=(o==null?void 0:o.computedPosition.y)||0;a=[[a[0][0]+i,a[0][1]+l],[a[1][0]+i,a[1][1]+l]]}else if(a!=null&&a.range&&Array.isArray(a.range)){const[i,l,s,u]=bo(a.padding),d=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;a=[[a.range[0][0]+d+u,a.range[0][1]+c+i],[a.range[1][0]+d-l,a.range[1][1]+c-s]]}return a}function on(e,t,n,o,a){const i=za(e,n,o,a),l=qn(t,i);return{position:{x:l.x-((a==null?void 0:a.computedPosition.x)||0),y:l.y-((a==null?void 0:a.computedPosition.y)||0)},computedPosition:l}}function xo(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:a,snapToGrid:i,nodesDraggable:l,emits:s}=oe();return(u,d=!1)=>{const c=i.value?a.value[0]:5,f=i.value?a.value[1]:5,h=d?4:1,b=u.x*c*h,m=u.y*f*h,x=e.value.filter(k=>k.draggable||l&&typeof k.draggable>"u").map(k=>{const E={x:k.computedPosition.x+b,y:k.computedPosition.y+m},{computedPosition:I}=on(k,E,s.error,t.value,k.parentNode?o(k.parentNode):void 0);return{id:k.id,position:I,from:k.position,distance:{x:u.x,y:u.y},dimensions:k.dimensions}});n(x,!0,!1)}}function Va(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),dragStart:Y(),drag:Y(),dragStop:Y()}}function La(e,t){const n=Va();return n.doubleClick.on(o=>{var a,i;t.nodeDoubleClick(o),(i=(a=e.events)==null?void 0:a.doubleClick)==null||i.call(a,o)}),n.click.on(o=>{var a,i;t.nodeClick(o),(i=(a=e.events)==null?void 0:a.click)==null||i.call(a,o)}),n.mouseEnter.on(o=>{var a,i;t.nodeMouseEnter(o),(i=(a=e.events)==null?void 0:a.mouseEnter)==null||i.call(a,o)}),n.mouseMove.on(o=>{var a,i;t.nodeMouseMove(o),(i=(a=e.events)==null?void 0:a.mouseMove)==null||i.call(a,o)}),n.mouseLeave.on(o=>{var a,i;t.nodeMouseLeave(o),(i=(a=e.events)==null?void 0:a.mouseLeave)==null||i.call(a,o)}),n.contextMenu.on(o=>{var a,i;t.nodeContextMenu(o),(i=(a=e.events)==null?void 0:a.contextMenu)==null||i.call(a,o)}),n.dragStart.on(o=>{var a,i;t.nodeDragStart(o),(i=(a=e.events)==null?void 0:a.dragStart)==null||i.call(a,o)}),n.drag.on(o=>{var a,i;t.nodeDrag(o),(i=(a=e.events)==null?void 0:a.drag)==null||i.call(a,o)}),n.dragStop.on(o=>{var a,i;t.nodeDragStop(o),(i=(a=e.events)==null?void 0:a.dragStop)==null||i.call(a,o)}),Object.entries(n).reduce((o,[a,i])=>(o.emit[a]=i.trigger,o.on[a]=i.on,o),{emit:{},on:{}})}function Fa(){const{viewport:e,snapGrid:t,snapToGrid:n}=oe();return({sourceEvent:o})=>{const a=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,l={x:(a-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(l.x/t.value[0]):l.x,ySnapped:n.value?t.value[1]*Math.round(l.y/t.value[1]):l.y,...l}}}function _o(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const a=Array.from(o),i=t.getBoundingClientRect();return a.map(l=>{const s=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(s.left-i.left)/n,y:(s.top-i.top)/n,...lt(l)}})}function rn(e,t,n,o,a,i=!1,l){a.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),r.nextTick(l.blur)):n([e])}var Xa={value:()=>{}};function yt(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new vt(n)}function vt(e){this._=e}function Ya(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}vt.prototype=yt.prototype={constructor:vt,on:function(e,t){var n=this._,o=Ya(e+"",n),a,i=-1,l=o.length;if(arguments.length<2){for(;++i<l;)if((a=(e=o[i]).type)&&(a=Ga(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<l;)if(a=(e=o[i]).type)n[a]=Eo(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Eo(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vt(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,i;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,i=o.length;a<i;++a)o[a].value.apply(t,n)}};function Ga(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function Eo(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=Xa,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var an="http://www.w3.org/1999/xhtml";const ko={svg:"http://www.w3.org/2000/svg",xhtml:an,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ko.hasOwnProperty(t)?{space:ko[t],local:e}:e}function ja(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===an&&t.documentElement.namespaceURI===an?t.createElement(e):t.createElementNS(n,e)}}function Ha(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function No(e){var t=wt(e);return(t.local?Ha:ja)(t)}function Ua(){}function ln(e){return e==null?Ua:function(){return this.querySelector(e)}}function Ka(e){typeof e!="function"&&(e=ln(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i=t[a],l=i.length,s=o[a]=new Array(l),u,d,c=0;c<l;++c)(u=i[c])&&(d=e.call(u,u.__data__,c,i))&&("__data__"in u&&(d.__data__=u.__data__),s[c]=d);return new ue(o,this._parents)}function Wa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Za(){return[]}function So(e){return e==null?Za:function(){return this.querySelectorAll(e)}}function qa(e){return function(){return Wa(e.apply(this,arguments))}}function Qa(e){typeof e=="function"?e=qa(e):e=So(e);for(var t=this._groups,n=t.length,o=[],a=[],i=0;i<n;++i)for(var l=t[i],s=l.length,u,d=0;d<s;++d)(u=l[d])&&(o.push(e.call(u,u.__data__,d,l)),a.push(u));return new ue(o,a)}function Co(e){return function(){return this.matches(e)}}function Mo(e){return function(t){return t.matches(e)}}var Ja=Array.prototype.find;function ei(e){return function(){return Ja.call(this.children,e)}}function ti(){return this.firstElementChild}function ni(e){return this.select(e==null?ti:ei(typeof e=="function"?e:Mo(e)))}var oi=Array.prototype.filter;function ri(){return Array.from(this.children)}function ai(e){return function(){return oi.call(this.children,e)}}function ii(e){return this.selectAll(e==null?ri:ai(typeof e=="function"?e:Mo(e)))}function li(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i=t[a],l=i.length,s=o[a]=[],u,d=0;d<l;++d)(u=i[d])&&e.call(u,u.__data__,d,i)&&s.push(u);return new ue(o,this._parents)}function Bo(e){return new Array(e.length)}function si(){return new ue(this._enter||this._groups.map(Bo),this._parents)}function bt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}bt.prototype={constructor:bt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ui(e){return function(){return e}}function ci(e,t,n,o,a,i){for(var l=0,s,u=t.length,d=i.length;l<d;++l)(s=t[l])?(s.__data__=i[l],o[l]=s):n[l]=new bt(e,i[l]);for(;l<u;++l)(s=t[l])&&(a[l]=s)}function di(e,t,n,o,a,i,l){var s,u,d=new Map,c=t.length,f=i.length,h=new Array(c),b;for(s=0;s<c;++s)(u=t[s])&&(h[s]=b=l.call(u,u.__data__,s,t)+"",d.has(b)?a[s]=u:d.set(b,u));for(s=0;s<f;++s)b=l.call(e,i[s],s,i)+"",(u=d.get(b))?(o[s]=u,u.__data__=i[s],d.delete(b)):n[s]=new bt(e,i[s]);for(s=0;s<c;++s)(u=t[s])&&d.get(h[s])===u&&(a[s]=u)}function fi(e){return e.__data__}function hi(e,t){if(!arguments.length)return Array.from(this,fi);var n=t?di:ci,o=this._parents,a=this._groups;typeof e!="function"&&(e=ui(e));for(var i=a.length,l=new Array(i),s=new Array(i),u=new Array(i),d=0;d<i;++d){var c=o[d],f=a[d],h=f.length,b=pi(e.call(c,c&&c.__data__,d,o)),m=b.length,x=s[d]=new Array(m),k=l[d]=new Array(m),E=u[d]=new Array(h);n(c,f,x,k,E,b,t);for(var I=0,X=0,v,P;I<m;++I)if(v=x[I]){for(I>=X&&(X=I+1);!(P=k[X])&&++X<m;);v._next=P||null}}return l=new ue(l,o),l._enter=s,l._exit=u,l}function pi(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gi(){return new ue(this._exit||this._groups.map(Bo),this._parents)}function mi(e,t,n){var o=this.enter(),a=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?i.remove():n(i),o&&a?o.merge(a).order():a}function yi(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,i=o.length,l=Math.min(a,i),s=new Array(a),u=0;u<l;++u)for(var d=n[u],c=o[u],f=d.length,h=s[u]=new Array(f),b,m=0;m<f;++m)(b=d[m]||c[m])&&(h[m]=b);for(;u<a;++u)s[u]=n[u];return new ue(s,this._parents)}function vi(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,i=o[a],l;--a>=0;)(l=o[a])&&(i&&l.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(l,i),i=l);return this}function wi(e){e||(e=bi);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i){for(var l=n[i],s=l.length,u=a[i]=new Array(s),d,c=0;c<s;++c)(d=l[c])&&(u[c]=d);u.sort(t)}return new ue(a,this._parents).order()}function bi(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xi(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _i(){return Array.from(this)}function Ei(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,i=o.length;a<i;++a){var l=o[a];if(l)return l}return null}function ki(){let e=0;for(const t of this)++e;return e}function Ni(){return!this.node()}function Si(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],i=0,l=a.length,s;i<l;++i)(s=a[i])&&e.call(s,s.__data__,i,a);return this}function Ci(e){return function(){this.removeAttribute(e)}}function Mi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bi(e,t){return function(){this.setAttribute(e,t)}}function Pi(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ii(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Oi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ri(e,t){var n=wt(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Mi:Ci:typeof t=="function"?n.local?Oi:Ii:n.local?Pi:Bi)(n,t))}function Po(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ti(e){return function(){this.style.removeProperty(e)}}function $i(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Di(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ai(e,t,n){return arguments.length>1?this.each((t==null?Ti:typeof t=="function"?Di:$i)(e,t,n??"")):ze(this.node(),e)}function ze(e,t){return e.style.getPropertyValue(t)||Po(e).getComputedStyle(e,null).getPropertyValue(t)}function zi(e){return function(){delete this[e]}}function Vi(e,t){return function(){this[e]=t}}function Li(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Fi(e,t){return arguments.length>1?this.each((t==null?zi:typeof t=="function"?Li:Vi)(e,t)):this.node()[e]}function Io(e){return e.trim().split(/^|\s+/)}function sn(e){return e.classList||new Oo(e)}function Oo(e){this._node=e,this._names=Io(e.getAttribute("class")||"")}Oo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ro(e,t){for(var n=sn(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function To(e,t){for(var n=sn(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function Xi(e){return function(){Ro(this,e)}}function Yi(e){return function(){To(this,e)}}function Gi(e,t){return function(){(t.apply(this,arguments)?Ro:To)(this,e)}}function ji(e,t){var n=Io(e+"");if(arguments.length<2){for(var o=sn(this.node()),a=-1,i=n.length;++a<i;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Gi:t?Xi:Yi)(n,t))}function Hi(){this.textContent=""}function Ui(e){return function(){this.textContent=e}}function Ki(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Wi(e){return arguments.length?this.each(e==null?Hi:(typeof e=="function"?Ki:Ui)(e)):this.node().textContent}function Zi(){this.innerHTML=""}function qi(e){return function(){this.innerHTML=e}}function Qi(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ji(e){return arguments.length?this.each(e==null?Zi:(typeof e=="function"?Qi:qi)(e)):this.node().innerHTML}function el(){this.nextSibling&&this.parentNode.appendChild(this)}function tl(){return this.each(el)}function nl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ol(){return this.each(nl)}function rl(e){var t=typeof e=="function"?e:No(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function al(){return null}function il(e,t){var n=typeof e=="function"?e:No(e),o=t==null?al:typeof t=="function"?t:ln(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function ll(){var e=this.parentNode;e&&e.removeChild(this)}function sl(){return this.each(ll)}function ul(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dl(e){return this.select(e?cl:ul)}function fl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hl(e){return function(t){e.call(this,t,this.__data__)}}function pl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function gl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,i;n<a;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function ml(e,t,n){return function(){var o=this.__on,a,i=hl(t);if(o){for(var l=0,s=o.length;l<s;++l)if((a=o[l]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=n),a.value=t;return}}this.addEventListener(e.type,i,n),a={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(a):this.__on=[a]}}function yl(e,t,n){var o=pl(e+""),a,i=o.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,d=s.length,c;u<d;++u)for(a=0,c=s[u];a<i;++a)if((l=o[a]).type===c.type&&l.name===c.name)return c.value}return}for(s=t?ml:gl,a=0;a<i;++a)this.each(s(o[a],t,n));return this}function $o(e,t,n){var o=Po(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function vl(e,t){return function(){return $o(this,e,t)}}function wl(e,t){return function(){return $o(this,e,t.apply(this,arguments))}}function bl(e,t){return this.each((typeof t=="function"?wl:vl)(e,t))}function*xl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,i=o.length,l;a<i;++a)(l=o[a])&&(yield l)}var Do=[null];function ue(e,t){this._groups=e,this._parents=t}function Ue(){return new ue([[document.documentElement]],Do)}function _l(){return this}ue.prototype=Ue.prototype={constructor:ue,select:Ka,selectAll:Qa,selectChild:ni,selectChildren:ii,filter:li,data:hi,enter:si,exit:gi,join:mi,merge:yi,selection:_l,order:vi,sort:wi,call:xi,nodes:_i,node:Ei,size:ki,empty:Ni,each:Si,attr:Ri,style:Ai,property:Fi,classed:ji,text:Wi,html:Ji,raise:tl,lower:ol,append:rl,insert:il,remove:sl,clone:dl,datum:fl,on:yl,dispatch:bl,[Symbol.iterator]:xl};function ce(e){return typeof e=="string"?new ue([[document.querySelector(e)]],[document.documentElement]):new ue([[e]],Do)}function El(e){let t;for(;t=e.sourceEvent;)e=t;return e}function he(e,t){if(e=El(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const kl={passive:!1},Ke={capture:!0,passive:!1};function un(e){e.stopImmediatePropagation()}function Ve(e){e.preventDefault(),e.stopImmediatePropagation()}function Ao(e){var t=e.document.documentElement,n=ce(e).on("dragstart.drag",Ve,Ke);"onselectstart"in t?n.on("selectstart.drag",Ve,Ke):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function zo(e,t){var n=e.document.documentElement,o=ce(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ve,Ke),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const xt=e=>()=>e;function cn(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:i,x:l,y:s,dx:u,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}cn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Nl(e){return!e.ctrlKey&&!e.button}function Sl(){return this.parentNode}function Cl(e,t){return t??{x:e.x,y:e.y}}function Ml(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bl(){var e=Nl,t=Sl,n=Cl,o=Ml,a={},i=yt("start","drag","end"),l=0,s,u,d,c,f=0;function h(v){v.on("mousedown.drag",b).filter(o).on("touchstart.drag",k).on("touchmove.drag",E,kl).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(v,P){if(!(c||!e.call(this,v,P))){var _=X(this,t.call(this,v,P),v,P,"mouse");_&&(ce(v.view).on("mousemove.drag",m,Ke).on("mouseup.drag",x,Ke),Ao(v.view),un(v),d=!1,s=v.clientX,u=v.clientY,_("start",v))}}function m(v){if(Ve(v),!d){var P=v.clientX-s,_=v.clientY-u;d=P*P+_*_>f}a.mouse("drag",v)}function x(v){ce(v.view).on("mousemove.drag mouseup.drag",null),zo(v.view,d),Ve(v),a.mouse("end",v)}function k(v,P){if(e.call(this,v,P)){var _=v.changedTouches,g=t.call(this,v,P),N=_.length,O,M;for(O=0;O<N;++O)(M=X(this,g,v,P,_[O].identifier,_[O]))&&(un(v),M("start",v,_[O]))}}function E(v){var P=v.changedTouches,_=P.length,g,N;for(g=0;g<_;++g)(N=a[P[g].identifier])&&(Ve(v),N("drag",v,P[g]))}function I(v){var P=v.changedTouches,_=P.length,g,N;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),g=0;g<_;++g)(N=a[P[g].identifier])&&(un(v),N("end",v,P[g]))}function X(v,P,_,g,N,O){var M=i.copy(),R=he(O||_,P),q,ee,y;if((y=n.call(v,new cn("beforestart",{sourceEvent:_,target:h,identifier:N,active:l,x:R[0],y:R[1],dx:0,dy:0,dispatch:M}),g))!=null)return q=y.x-R[0]||0,ee=y.y-R[1]||0,function A(S,D,j){var K=R,T;switch(S){case"start":a[N]=A,T=l++;break;case"end":delete a[N],--l;case"drag":R=he(j||D,P),T=l;break}M.call(S,v,new cn(S,{sourceEvent:D,subject:y,target:h,identifier:N,active:T,x:R[0]+q,y:R[1]+ee,dx:R[0]-K[0],dy:R[1]-K[1],dispatch:M}),g)}}return h.filter=function(v){return arguments.length?(e=typeof v=="function"?v:xt(!!v),h):e},h.container=function(v){return arguments.length?(t=typeof v=="function"?v:xt(v),h):t},h.subject=function(v){return arguments.length?(n=typeof v=="function"?v:xt(v),h):n},h.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:xt(!!v),h):o},h.on=function(){var v=i.on.apply(i,arguments);return v===i?h:v},h.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,h):Math.sqrt(f)},h}function Vo(e){const t=oe(),n=r.toRef(t,"vueFlowRef"),o=r.toRef(t,"snapToGrid"),a=r.toRef(t,"snapGrid"),i=r.toRef(t,"noDragClassName"),l=r.toRef(t,"nodes"),s=r.toRef(t,"nodeExtent"),u=r.toRef(t,"viewport"),d=r.toRef(t,"autoPanOnNodeDrag"),c=r.toRef(t,"nodesDraggable"),f=r.toRef(t,"panBy"),h=r.toRef(t,"findNode"),b=r.toRef(t,"multiSelectionActive"),m=r.toRef(t,"nodesSelectionActive"),x=r.toRef(t,"selectNodesOnDrag"),k=r.toRef(t,"removeSelectedElements"),E=r.toRef(t,"addSelectedNodes"),I=r.toRef(t,"updateNodePositions"),X=r.toRef(t,"emits"),{onStart:v,onDrag:P,onStop:_,el:g,disabled:N,id:O,selectable:M}=e,R=r.ref(!1);let q=r.ref([]),ee=r.ref(),y=r.ref(null),A=r.ref({x:void 0,y:void 0}),S=r.ref({x:0,y:0}),D=r.ref(null),j=r.ref(0),K=r.ref(!1);const T=Fa(),H=({x:Z,y:G})=>{A.value={x:Z,y:G};let Q=!1;if(q.value=q.value.map(B=>{const p={x:Z-B.distance.x,y:G-B.distance.y};o.value&&(p.x=a.value[0]*Math.round(p.x/a.value[0]),p.y=a.value[1]*Math.round(p.y/a.value[1]));const{computedPosition:w}=on(B,p,X.value.error,s.value,B.parentNode?h.value(B.parentNode):void 0);return Q=Q||B.position.x!==w.x||B.position.y!==w.y,B.position=w,B}),!!Q&&(I.value(q.value,!0,!0),R.value=!0,D.value)){const[B,p]=nn({id:O,dragItems:q.value,findNode:h.value});P({event:D.value,node:B,nodes:p})}},z=()=>{if(!y.value)return;const[Z,G]=yo(S.value,y.value);if(Z!==0||G!==0){const Q={x:(A.value.x??0)-Z/u.value.zoom,y:(A.value.y??0)-G/u.value.zoom};f.value({x:Z,y:G})&&H(Q)}j.value=requestAnimationFrame(z)};return r.watch([()=>te(N),g],([Z,G])=>{if(G){const Q=ce(G);if(Z)Q.on(".drag",null);else{const B=h.value(O);ee.value=Bl().on("start",p=>{var w;!x.value&&!b.value&&B&&(B.selected||k.value()),B&&te(M)&&x.value&&rn(B,b.value,E.value,k.value,m,!1,G);const V=T(p);if(A.value=V,q.value=Da(l.value,c.value,V,h.value,O),q.value.length){const[$,L]=nn({id:O,dragItems:q.value,findNode:h.value});v({event:p.sourceEvent,node:$,nodes:L})}y.value=((w=n.value)==null?void 0:w.getBoundingClientRect())||null,S.value=De(p.sourceEvent,y.value)}).on("drag",p=>{const w=T(p);!K.value&&d.value&&(K.value=!0,z()),(A.value.x!==w.xSnapped||A.value.y!==w.ySnapped)&&q.value.length&&(D.value=p.sourceEvent,S.value=De(p.sourceEvent,y.value),H(w))}).on("end",p=>{if(R.value=!1,K.value=!1,cancelAnimationFrame(j.value),q.value.length){I.value(q.value,!1,!1);const[w,V]=nn({id:O,dragItems:q.value,findNode:h.value});_({event:p.sourceEvent,node:w,nodes:V})}}).filter(p=>{const w=p.target;return!p.button&&(!i.value||!wo(w,`.${i.value}`,G)&&(!(B!=null&&B.dragHandle)||wo(w,B.dragHandle,G)))}),Q.call(ee.value)}}}),R}const Lo="vue-flow__node-desc",Fo="vue-flow__edge-desc",Pl="vue-flow__aria-live",Xo=["Enter"," ","Escape"],Le={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function dn(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,a=ye(o.hasAttribute)?o.hasAttribute("contenteditable"):!1,i=ye(o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||a||!!i}function Il(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Ol(e,t){return n=>e.some(o=>{const a=o.split("+").map(i=>i.trim().toLowerCase());return a.length===1?n.key===o:(t.add(n.key.toLowerCase()),a.every(i=>t.has(i)))})}const We=(e,t)=>{const n=Zt(),o=r.ref(te(e)===!0),a=r.ref(!1),i=r.ref(new Set);return r.watch(o,()=>{t==null||t(o.value)}),r.watch(()=>te(e),l=>{if(n&&typeof n.addEventListener<"u"&&Wt(n,"blur",()=>{o.value=!1}),$r(l)){o.value=l;return}Array.isArray(l)&&(l=Ol(l,i.value)),l&&(Fn(l,s=>{a.value=Il(s),!(!a.value&&dn(s))&&(s.preventDefault(),o.value=!0)},{eventName:"keydown"}),Fn(l,s=>{if(o.value){if(!a.value&&dn(s))return;a.value=!1,i.value.clear(),o.value=!1}},{eventName:"keyup"}))},{immediate:!0}),o},Rl=r.defineComponent({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){r.provide(uo,e.id);const t=oe(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),a=r.toRef(t,"noPanClassName"),i=r.toRef(t,"selectNodesOnDrag"),l=r.toRef(t,"nodesSelectionActive"),s=r.toRef(t,"multiSelectionActive"),u=r.toRef(t,"emits"),d=r.toRef(t,"findNode"),c=r.toRef(t,"removeSelectedNodes"),f=r.toRef(t,"addSelectedNodes"),h=r.toRef(t,"updateNodeDimensions"),b=r.toRef(t,"onUpdateNodeInternals"),m=r.toRef(t,"getIntersectingNodes"),x=r.toRef(t,"getNodeTypes"),k=r.toRef(t,"nodeExtent"),E=r.toRef(t,"elevateNodesOnSelect"),I=r.toRef(t,"disableKeyboardA11y"),X=r.toRef(t,"ariaLiveMessage"),v=r.toRef(t,"snapToGrid"),P=r.toRef(t,"snapGrid"),_=xo(),g=He(e,"node"),N=r.computed(()=>d.value(g.value.parentNode)),O=r.computed(()=>ut([g.value],o.value)),M=r.ref();r.provide(co,M);const{emit:R,on:q}=La(g.value,u.value),ee=Vo({id:e.id,el:M,disabled:()=>!e.draggable,selectable:()=>e.selectable,onStart(B){R.dragStart({...B,intersections:m.value(g.value)})},onDrag(B){R.drag({...B,intersections:m.value(g.value)})},onStop(B){R.dragStop({...B,intersections:m.value(g.value)})}}),y=r.computed(()=>g.value.class instanceof Function?g.value.class(g.value):g.value.class),A=r.computed(()=>{const B=(g.value.style instanceof Function?g.value.style(g.value):g.value.style)||{},p=g.value.width instanceof Function?g.value.width(g.value):g.value.width,w=g.value.height instanceof Function?g.value.height(g.value):g.value.height;return p&&(B.width=typeof p=="string"?p:`${p}px`),w&&(B.height=typeof w=="string"?w:`${w}px`),B}),S=()=>Number(g.value.zIndex??A.value.zIndex??0);return b.value(B=>{B.includes(e.id)&&j()}),r.onMounted(()=>{e.resizeObserver.observe(M.value)}),r.onBeforeUnmount(()=>{e.resizeObserver.unobserve(M.value)}),r.watch([()=>g.value.type,()=>g.value.sourcePosition,()=>g.value.targetPosition],()=>{h.value([{id:e.id,nodeElement:M.value,forceUpdate:!0}])},{flush:"pre"}),r.watch([()=>g.value.position.x,()=>g.value.position.y,()=>{var B;return(B=N.value)==null?void 0:B.computedPosition.x},()=>{var B;return(B=N.value)==null?void 0:B.computedPosition.y},()=>{var B;return(B=N.value)==null?void 0:B.computedPosition.z},()=>S(),()=>g.value.selected,()=>g.value.dimensions.height,()=>g.value.dimensions.width,()=>{var B;return(B=N.value)==null?void 0:B.dimensions.height},()=>{var B;return(B=N.value)==null?void 0:B.dimensions.width}],([B,p,w,V,$,L])=>{const F={x:B,y:p,z:L+(E.value&&g.value.selected?1e3:0)};ve(w)&&ve(V)?g.value.computedPosition=va({x:w,y:V,z:$},F):g.value.computedPosition=F},{flush:"pre",immediate:!0}),r.watch([()=>g.value.extent,()=>k.value],([B,p],[w,V])=>{(B!==w||p!==V)&&D()}),g.value.extent==="parent"||typeof g.value.extent=="object"&&"range"in g.value.extent&&g.value.extent.range==="parent"?se(()=>g.value.initialized).toBe(!0).then(D):D(),()=>r.h("div",{ref:M,"data-id":g.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[a.value]:e.draggable,dragging:ee==null?void 0:ee.value,selected:g.value.selected,selectable:e.selectable},y.value],style:{zIndex:g.value.computedPosition.z??S(),transform:`translate(${g.value.computedPosition.x}px,${g.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:g.value.initialized?"visible":"hidden",...A.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":I.value?void 0:`${Lo}-${n.value}`,"aria-label":g.value.ariaLabel,onMouseenter:K,onMousemove:T,onMouseleave:H,onContextmenu:z,onClick:G,onDblclick:Z,onKeydown:Q},[r.h(e.type===!1?x.value.default:e.type,{id:g.value.id,type:g.value.type,data:g.value.data,events:{...g.value.events,...q},selected:!!g.value.selected,resizing:!!g.value.resizing,dragging:ee.value,connectable:e.connectable,position:g.value.position,dimensions:g.value.dimensions,isValidTargetPos:g.value.isValidTargetPos,isValidSourcePos:g.value.isValidSourcePos,parent:g.value.parentNode,zIndex:g.value.computedPosition.z,targetPosition:g.value.targetPosition,sourcePosition:g.value.sourcePosition,label:g.value.label,dragHandle:g.value.dragHandle,onUpdateNodeInternals:j})]);function D(){const B=g.value.computedPosition;v.value&&(B.x=P.value[0]*Math.round(B.x/P.value[0]),B.y=P.value[1]*Math.round(B.y/P.value[1]));const{computedPosition:p,position:w}=on(g.value,B,u.value.error,k.value,N.value);(g.value.computedPosition.x!==p.x||g.value.computedPosition.y!==p.y)&&(g.value.computedPosition={...g.value.computedPosition,...p}),(g.value.position.x!==w.x||g.value.position.y!==w.y)&&(g.value.position=w)}function j(){M.value&&h.value([{id:e.id,nodeElement:M.value,forceUpdate:!0}])}function K(B){ee!=null&&ee.value||R.mouseEnter({event:B,node:g.value,connectedEdges:O.value})}function T(B){ee!=null&&ee.value||R.mouseMove({event:B,node:g.value,connectedEdges:O.value})}function H(B){ee!=null&&ee.value||R.mouseLeave({event:B,node:g.value,connectedEdges:O.value})}function z(B){return R.contextMenu({event:B,node:g.value,connectedEdges:O.value})}function Z(B){return R.doubleClick({event:B,node:g.value,connectedEdges:O.value})}function G(B){e.selectable&&(!i.value||!e.draggable)&&rn(g.value,s.value,f.value,c.value,l,!1,M.value),R.click({event:B,node:g.value,connectedEdges:O.value})}function Q(B){var p;if(!dn(B))if(Xo.includes(B.key)&&e.selectable){const w=B.key==="Escape";w&&((p=M.value)==null||p.blur()),rn(g.value,s.value,f.value,c.value,l,w,M.value)}else!I.value&&e.draggable&&g.value.selected&&Le[B.key]&&(X.value=`Moved selected node ${B.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~g.value.position.x}, y: ${~~g.value.position.y}`,_({x:Le[B.key].x,y:Le[B.key].y},B.shiftKey))}}}),Tl=Rl,$l=["transform"],Dl=["width","height","x","y","rx","ry"],Al=["y"],zl={name:"EdgeText",compatConfig:{MODE:3}},Vl=r.defineComponent({...zl,props:{x:null,y:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){let t=r.ref({x:0,y:0,width:0,height:0});const n=r.ref(null),o=r.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);r.onMounted(a),r.watch([()=>e.x,()=>e.y,n,()=>e.label],a);function a(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,l)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${r.unref(t).width+2*e.labelBgPadding[0]}px`,height:`${r.unref(t).height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Dl)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:r.unref(t).height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(i.$slots,"default",{},()=>[r.unref(we)(e.label)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64)):(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0}))])],16,Al)],8,$l))}}),_t=function({path:e,label:t,labelX:n,labelY:o,labelBgBorderRadius:a,labelBgPadding:i,labelBgStyle:l,labelShowBg:s=!0,labelStyle:u,markerStart:d,markerEnd:c,interactionWidth:f=20},{attrs:h}){return[r.h("path",{style:h.style,class:["vue-flow__edge-path",h.class].join(" "),d:e,"marker-end":c,"marker-start":d}),f?r.h("path",{d:e,fill:"none","stroke-opacity":0,"stroke-width":f}):null,t&&ve(n)&&ve(o)?r.h(Vl,{x:n,y:o,label:t,labelStyle:u,labelShowBg:s,labelBgStyle:l,labelBgPadding:i,labelBgBorderRadius:a}):null]};_t.props=["path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"],_t.inheritAttrs=!1,_t.compatConfig={MODE:3};const Et=_t;function Yo({sourceX:e,sourceY:t,targetX:n,targetY:o}){const a=Math.abs(n-e)/2,i=n<e?n+a:n-a,l=Math.abs(o-t)/2,s=o<t?o+l:o-l;return[i,s,a,l]}function Go({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:a,sourceControlY:i,targetControlX:l,targetControlY:s}){const u=e*.125+a*.375+l*.375+n*.125,d=t*.125+i*.375+s*.375+o*.125,c=Math.abs(u-e),f=Math.abs(d-t);return[u,d,c,f]}function kt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jo({pos:e,x1:t,y1:n,x2:o,y2:a,c:i}){let l,s;switch(e){case W.Left:l=t-kt(t-o,i),s=n;break;case W.Right:l=t+kt(o-t,i),s=n;break;case W.Top:l=t,s=n-kt(n-a,i);break;case W.Bottom:l=t,s=n+kt(a-n,i);break}return[l,s]}function Nt({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:a,targetPosition:i=W.Top,curvature:l=.25}){const[s,u]=jo({pos:n,x1:e,y1:t,x2:o,y2:a,c:l}),[d,c]=jo({pos:i,x1:o,y1:a,x2:e,y2:t,c:l}),[f,h,b,m]=Go({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:s,sourceControlY:u,targetControlX:d,targetControlY:c});return[`M${e},${t} C${s},${u} ${d},${c} ${o},${a}`,f,h,b,m]}const St=function({sourcePosition:e=W.Bottom,targetPosition:t=W.Top,...n},{attrs:o}){const[a,i,l]=Nt({sourcePosition:e,targetPosition:t,...n});return r.h(Et,{path:a,labelX:i,labelY:l,...n,...o})};St.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],St.inheritAttrs=!1,St.compatConfig={MODE:3};const Ll=St;function Ho({pos:e,x1:t,y1:n,x2:o,y2:a}){let i,l;switch(e){case W.Left:case W.Right:i=.5*(t+o),l=n;break;case W.Top:case W.Bottom:i=t,l=.5*(n+a);break}return[i,l]}function Uo({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:a,targetPosition:i=W.Top}){const[l,s]=Ho({pos:n,x1:e,y1:t,x2:o,y2:a}),[u,d]=Ho({pos:i,x1:o,y1:a,x2:e,y2:t}),[c,f,h,b]=Go({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${s} ${u},${d} ${o},${a}`,c,f,h,b]}const Ct=function({sourcePosition:e=W.Bottom,targetPosition:t=W.Top,...n},{attrs:o}){const[a,i,l]=Uo({sourcePosition:e,targetPosition:t,...n});return r.h(Et,{path:a,labelX:i,labelY:l,...n,...o})};Ct.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Ct.inheritAttrs=!1,Ct.compatConfig={MODE:3};const Fl=Ct,Ko={[W.Left]:{x:-1,y:0},[W.Right]:{x:1,y:0},[W.Top]:{x:0,y:-1},[W.Bottom]:{x:0,y:1}};function Xl({source:e,sourcePosition:t=W.Bottom,target:n}){return t===W.Left||t===W.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Wo(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Yl({source:e,sourcePosition:t=W.Bottom,target:n,targetPosition:o=W.Top,center:a,offset:i}){const l=Ko[t],s=Ko[o],u={x:e.x+l.x*i,y:e.y+l.y*i},d={x:n.x+s.x*i,y:n.y+s.y*i},c=Xl({source:u,sourcePosition:t,target:d}),f=c.x!==0?"x":"y",h=c[f];let b,m,x;const[k,E,I,X]=Yo({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[f]*s[f]===-1){m=a.x||k,x=a.y||E;const v=[{x:m,y:u.y},{x:m,y:d.y}],P=[{x:u.x,y:x},{x:d.x,y:x}];l[f]===h?b=f==="x"?v:P:b=f==="x"?P:v}else{const v=[{x:u.x,y:d.y}],P=[{x:d.x,y:u.y}];if(f==="x"?b=l.x===h?P:v:b=l.y===h?v:P,t!==o){const _=f==="x"?"y":"x",g=l[f]===s[_],N=u[_]>d[_],O=u[_]<d[_];(l[f]===1&&(!g&&N||g&&O)||l[f]!==1&&(!g&&O||g&&N))&&(b=f==="x"?v:P)}m=b[0].x,x=b[0].y}return[[e,u,...b,d,n],m,x,I,X]}function Gl(e,t,n,o){const a=Math.min(Wo(e,t)/2,Wo(t,n)/2,o),{x:i,y:l}=t;if(e.x===i&&i===n.x||e.y===l&&l===n.y)return`L${i} ${l}`;if(e.y===l){const d=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+a*d},${l}Q ${i},${l} ${i},${l+a*c}`}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${l+a*u}Q ${i},${l} ${i+a*s},${l}`}function fn({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:a,targetPosition:i=W.Top,borderRadius:l=5,centerX:s,centerY:u,offset:d=20}){const[c,f,h,b,m]=Yl({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:a},targetPosition:i,center:{x:s,y:u},offset:d});return[c.reduce((x,k,E)=>{let I;return E>0&&E<c.length-1?I=Gl(c[E-1],k,c[E+1],l):I=`${E===0?"M":"L"}${k.x} ${k.y}`,x+=I,x},""),f,h,b,m]}const Mt=function({sourcePosition:e=W.Bottom,targetPosition:t=W.Top,...n},{attrs:o}){const[a,i,l]=fn({sourcePosition:e,targetPosition:t,...n});return r.h(Et,{path:a,labelX:i,labelY:l,...n,...o})};Mt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],Mt.inheritAttrs=!1,Mt.compatConfig={MODE:3};const Zo=Mt,Bt=function(e,{attrs:t}){return r.h(Zo,{...e,...t,borderRadius:0})};Bt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Bt.inheritAttrs=!1,Bt.compatConfig={MODE:3};const jl=Bt;function qo({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[a,i,l,s]=Yo({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,a,i,l,s]}const Pt=function(e,{attrs:t}){const[n,o,a]=qo(e);return r.h(Et,{path:n,labelX:o,labelY:a,...e,...t})};Pt.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Pt.inheritAttrs=!1,Pt.compatConfig={MODE:3};const Hl=Pt;function Ul(e,t,n){return n===W.Left?e-t:n===W.Right?e+t:e}function Kl(e,t,n){return n===W.Top?e-t:n===W.Bottom?e+t:e}const hn=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=W.Top,type:a}){return r.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${a}`,cx:Ul(t,e,o),cy:Kl(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};hn.props=["radius","centerX","centerY","position","type"],hn.compatConfig={MODE:3};const Qo=hn;function Wl(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),updateStart:Y(),update:Y(),updateEnd:Y()}}function Zl(e,t){const n=Wl();return n.doubleClick.on(o=>{var a,i;t.edgeDoubleClick(o),(i=(a=e.events)==null?void 0:a.doubleClick)==null||i.call(a,o)}),n.click.on(o=>{var a,i;t.edgeClick(o),(i=(a=e.events)==null?void 0:a.click)==null||i.call(a,o)}),n.mouseEnter.on(o=>{var a,i;t.edgeMouseEnter(o),(i=(a=e.events)==null?void 0:a.mouseEnter)==null||i.call(a,o)}),n.mouseMove.on(o=>{var a,i;t.edgeMouseMove(o),(i=(a=e.events)==null?void 0:a.mouseMove)==null||i.call(a,o)}),n.mouseLeave.on(o=>{var a,i;t.edgeMouseLeave(o),(i=(a=e.events)==null?void 0:a.mouseLeave)==null||i.call(a,o)}),n.contextMenu.on(o=>{var a,i;t.edgeContextMenu(o),(i=(a=e.events)==null?void 0:a.contextMenu)==null||i.call(a,o)}),n.updateStart.on(o=>{var a,i;t.edgeUpdateStart(o),(i=(a=e.events)==null?void 0:a.updateStart)==null||i.call(a,o)}),n.update.on(o=>{var a,i;t.edgeUpdate(o),(i=(a=e.events)==null?void 0:a.update)==null||i.call(a,o)}),n.updateEnd.on(o=>{var a,i;t.edgeUpdateEnd(o),(i=(a=e.events)==null?void 0:a.updateEnd)==null||i.call(a,o)}),Object.entries(n).reduce((o,[a,i])=>(o.emit[a]=i.trigger,o.on[a]=i.on,o),{emit:{},on:{}})}const ql=r.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:a,emits:i,nodesSelectionActive:l,noPanClassName:s,getEdgeTypes:u,removeSelectedEdges:d,findEdge:c,findNode:f,isValidConnection:h}=oe(),b=Zl(e.edge,i),m=He(e,"edge");let x=r.ref(!1),k=r.ref(!1);const E=r.ref(""),I=r.ref(null),X=r.ref("source"),v=r.ref();r.provide(xa,e.id),r.provide(_a,v);const P=r.computed(()=>m.value.class instanceof Function?m.value.class(m.value):m.value.class),_=r.computed(()=>m.value.style instanceof Function?m.value.style(m.value):m.value.style),{handlePointerDown:g}=vo({nodeId:E,handleId:I,type:X,isValidConnection:h.value,edgeUpdaterType:X,onEdgeUpdate:M,onEdgeUpdateEnd:R});return()=>{const z=f(m.value.source),Z=f(m.value.target);if(!z||!Z||!m.value)return null;let G;o.value===Ce.Strict?G=z.handleBounds.source:G=[...z.handleBounds.source||[],...z.handleBounds.target||[]];const Q=fo(G,m.value.sourceHandle);let B;o.value===Ce.Strict?B=Z.handleBounds.target:B=[...Z.handleBounds.target||[],...Z.handleBounds.source||[]];const p=fo(B,m.value.targetHandle),w=Q?Q.position:W.Bottom,V=p?p.position:W.Top,{sourceX:$,sourceY:L,targetY:F,targetX:C}=ka(z,Q,w,Z,p,V);return m.value.sourceX=$,m.value.sourceY=L,m.value.targetX=C,m.value.targetY=F,r.h("g",{ref:v,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,s.value,P.value,{updating:x.value,selected:m.value.selected,animated:m.value.animated,inactive:!e.selectable}],onClick:ee,onContextmenu:y,onDblclick:A,onMouseenter:S,onMousemove:D,onMouseleave:j,onKeyDown:e.focusable?H:void 0,tabIndex:e.focusable?0:void 0,"aria-label":m.value.ariaLabel===null?void 0:m.value.ariaLabel||`Edge from ${m.value.source} to ${m.value.target}`,"aria-describedby":e.focusable?`${Fo}-${t}`:void 0,role:e.focusable?"button":void 0},[k.value?null:r.h(e.type===!1?u.value.default:e.type,{id:e.id,sourceNode:z,targetNode:Z,source:m.value.source,target:m.value.target,type:m.value.type,updatable:e.updatable,selected:m.value.selected,animated:m.value.animated,label:m.value.label,labelStyle:m.value.labelStyle,labelShowBg:m.value.labelShowBg,labelBgStyle:m.value.labelBgStyle,labelBgPadding:m.value.labelBgPadding,labelBgBorderRadius:m.value.labelBgBorderRadius,data:m.value.data,events:{...m.value.events,...b.on},style:_.value,markerStart:`url(#${Ne(m.value.markerStart,t)})`,markerEnd:`url(#${Ne(m.value.markerEnd,t)})`,sourcePosition:w,targetPosition:V,sourceX:$,sourceY:L,targetX:C,targetY:F,sourceHandleId:m.value.sourceHandle,targetHandleId:m.value.targetHandle,interactionWidth:m.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:K,onMouseenter:N,onMouseout:O},r.h(Qo,{position:w,centerX:$,centerY:L,radius:a.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:T,onMouseenter:N,onMouseout:O},r.h(Qo,{position:V,centerX:C,centerY:F,radius:a.value,type:"target","data-type":"target"}))]:null]])};function N(){x.value=!0}function O(){x.value=!1}function M(z,Z){b.emit.update({event:z,edge:m.value,connection:Z})}function R(z){b.emit.updateEnd({event:z,edge:m.value}),k.value=!1}function q(z,Z){z.button===0&&(k.value=!0,E.value=Z?m.value.target:m.value.source,I.value=(Z?m.value.targetHandle:m.value.sourceHandle)??"",X.value=Z?"target":"source",b.emit.updateStart({event:z,edge:m.value}),g(z))}function ee(z){const Z={event:z,edge:m.value};e.selectable&&(l.value=!1,n([m.value])),b.emit.click(Z)}function y(z){b.emit.contextMenu({event:z,edge:m.value})}function A(z){b.emit.doubleClick({event:z,edge:m.value})}function S(z){b.emit.mouseEnter({event:z,edge:m.value})}function D(z){b.emit.mouseMove({event:z,edge:m.value})}function j(z){b.emit.mouseLeave({event:z,edge:m.value})}function K(z){q(z,!0)}function T(z){q(z,!1)}function H(z){var Z;Xo.includes(z.key)&&e.selectable&&(z.key==="Escape"?((Z=v.value)==null||Z.blur(),d([c(e.id)])):n([c(e.id)]))}}}),Ql=ql,Jl={height:"0",width:"0"},es={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},ts=r.defineComponent({...es,setup(e){const{viewportRef:t}=oe(),n=r.computed(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,a)=>(r.openBlock(),r.createElementBlock("svg",null,[(r.openBlock(),r.createElementBlock("foreignObject",Jl,[(r.openBlock(),r.createBlock(r.Teleport,{to:r.unref(n),disabled:!r.unref(n)},[r.renderSlot(o.$slots,"default")],8,["to","disabled"]))]))]))}}),ns={class:"vue-flow__connection"},os=["d","marker-end","marker-start"],rs={name:"ConnectionLine",compatConfig:{MODE:3}},as=r.defineComponent({...rs,props:{sourceNode:null},setup(e){var t;const n=oe(),o=r.toRef(n,"connectionMode"),a=r.toRef(n,"connectionStartHandle"),i=r.toRef(n,"connectionEndHandle"),l=r.toRef(n,"connectionPosition"),s=r.toRef(n,"connectionLineType"),u=r.toRef(n,"connectionLineStyle"),d=r.toRef(n,"connectionLineOptions"),c=r.toRef(n,"connectionStatus"),f=r.toRef(n,"viewport"),h=r.toRef(n,"findNode"),b={[W.Left]:W.Right,[W.Right]:W.Left,[W.Top]:W.Bottom,[W.Bottom]:W.Top},m=(t=r.inject(dt))==null?void 0:t["connection-line"],x=r.computed(()=>a.value.handleId),k=r.computed(()=>a.value.type),E=r.computed(()=>{var M;return((M=i.value)==null?void 0:M.handleId)&&h.value(i.value.nodeId)||null}),I=r.computed(()=>{var M,R;return(o.value===Ce.Strict?(M=e.sourceNode.handleBounds[k.value])==null?void 0:M.find(q=>q.id===x.value):[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]].find(q=>q.id===x.value))||((R=e.sourceNode.handleBounds[k.value??"source"])==null?void 0:R[0])}),X=r.computed(()=>{var M,R,q;return E.value&&((M=i.value)==null?void 0:M.handleId)&&((o.value===Ce.Strict?(R=E.value.handleBounds[k.value==="source"?"target":"source"])==null?void 0:R.find(ee=>{var y;return ee.id===((y=i.value)==null?void 0:y.handleId)}):[...E.value.handleBounds.source||[],...E.value.handleBounds.target||[]].find(ee=>{var y;return ee.id===((y=i.value)==null?void 0:y.handleId)}))||((q=E.value.handleBounds[k.value??"target"])==null?void 0:q[0]))||null}),v=r.computed(()=>{var M;return(M=I.value)==null?void 0:M.position}),P=r.computed(()=>I.value?ft(v.value||W.Top,{...e.sourceNode.dimensions,...e.sourceNode.computedPosition},I.value):{x:e.sourceNode.dimensions.width/2,y:e.sourceNode.dimensions.height/2}),_=r.computed(()=>v.value?b[v.value]:void 0),g=r.computed(()=>(l.value.x-f.value.x)/f.value.zoom),N=r.computed(()=>(l.value.y-f.value.y)/f.value.zoom),O=r.computed(()=>{let M;const R={sourceX:P.value.x,sourceY:P.value.y,sourcePosition:v.value,targetX:g.value,targetY:N.value,targetPosition:_.value};switch(s.value??d.value.type){case Se.Bezier:[M]=Nt(R);break;case Se.Step:[M]=fn({...R,borderRadius:0});break;case Se.SmoothStep:[M]=fn(R);break;case Se.SimpleBezier:[M]=Uo(R);break;case Se.Straight:[M]=qo(R);break;default:[M]=Nt(R);break}return M});return(M,R)=>{var q;return r.openBlock(),r.createElementBlock("g",ns,[r.unref(m)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(m)),r.normalizeProps(r.mergeProps({key:0},{sourceX:r.unref(P).x,sourceY:r.unref(P).y,sourcePosition:(q=r.unref(I))==null?void 0:q.position,targetX:r.unref(g),targetY:r.unref(N),targetPosition:r.unref(_),sourceNode:e.sourceNode,sourceHandle:r.unref(I),targetNode:r.unref(E),targetHandle:r.unref(X),markerEnd:`url(#${r.unref(Ne)(r.unref(d).markerEnd)})`,markerStart:`url(#${r.unref(Ne)(r.unref(d).markerStart)})`,connectionStatus:r.unref(c)})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(O),class:r.normalizeClass(["vue-flow__connection-path",[r.unref(d).class,r.unref(c)]]),style:r.normalizeStyle(r.unref(u)||r.unref(d).style||{}),"marker-end":`url(#${r.unref(Ne)(r.unref(d).markerEnd)})`,"marker-start":`url(#${r.unref(Ne)(r.unref(d).markerStart)})`},null,14,os))])}}}),is=["tabIndex"],ls={name:"NodesSelection",compatConfig:{MODE:3}},ss=r.defineComponent({...ls,setup(e){const t=oe(),n=r.toRef(t,"emits"),o=r.toRef(t,"viewport"),a=r.toRef(t,"getSelectedNodes"),i=r.toRef(t,"noPanClassName"),l=r.toRef(t,"disableKeyboardA11y"),s=r.toRef(t,"userSelectionActive"),u=xo(),d=r.ref(),c=Vo({el:d,onStart(x){n.value.selectionDragStart(x)},onDrag(x){n.value.selectionDrag(x)},onStop(x){n.value.selectionDragStop(x)}});r.onMounted(()=>{var x;l.value||(x=d.value)==null||x.focus({preventScroll:!0})});const f=r.computed(()=>oo(a.value)),h=r.computed(()=>({width:`${f.value.width}px`,height:`${f.value.height}px`,top:`${f.value.y}px`,left:`${f.value.x}px`}));function b(x){n.value.selectionContextMenu({event:x,nodes:a.value})}function m(x){l.value||Le[x.key]&&u({x:Le[x.key].x,y:Le[x.key].y},x.shiftKey)}return(x,k)=>!r.unref(s)&&r.unref(f).width&&r.unref(f).height?(r.openBlock(),r.createElementBlock("div",{key:0,class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",r.unref(i)]),style:r.normalizeStyle({transform:`translate(${r.unref(o).x}px,${r.unref(o).y}px) scale(${r.unref(o).zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:d,class:r.normalizeClass([{dragging:r.unref(c)},"vue-flow__nodesselection-rect"]),style:r.normalizeStyle(r.unref(h)),tabIndex:r.unref(l)?void 0:-1,onContextmenu:b,onKeydown:m},null,46,is)],6)):r.createCommentVNode("",!0)}}),us={name:"UserSelection",compatConfig:{MODE:3}},cs=r.defineComponent({...us,setup(e){const{userSelectionRect:t}=oe();return(n,o)=>{var a,i,l,s;return r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:r.normalizeStyle({width:`${(a=r.unref(t))==null?void 0:a.width}px`,height:`${(i=r.unref(t))==null?void 0:i.height}px`,transform:`translate(${(l=r.unref(t))==null?void 0:l.x}px, ${(s=r.unref(t))==null?void 0:s.y}px)`})},null,4)}}}),ds={input:Ta,default:Ra,output:$a},fs={default:Ll,straight:Hl,step:jl,smoothstep:Zo,simplebezier:Fl};function hs(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Qt.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:ct.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Se.Bezier,style:{}},connectionMode:Ce.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:ua(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function Jo(e){const t=hs();return e&&Object.keys(e).forEach(n=>{const o=e[n];ne(o)&&(t[n]=o)}),t}function ps(e,t,n){const o=r.computed(()=>x=>e.nodes&&!t.value.length?e.nodes.find(k=>k.id===x):e.nodes[t.value.indexOf(x)]),a=r.computed(()=>x=>e.edges&&!n.value.length?e.edges.find(k=>k.id===x):e.edges[n.value.indexOf(x)]),i=r.computed(()=>{var x;const k={...fs,...e.edgeTypes},E=Object.keys(k);return(x=e.edges)==null||x.forEach(I=>I.type&&!E.includes(I.type)&&(k[I.type]=I.type)),k}),l=r.computed(()=>{var x;const k={...ds,...e.nodeTypes},E=Object.keys(k);return(x=e.nodes)==null||x.forEach(I=>I.type&&!E.includes(I.type)&&(k[I.type]=I.type)),k}),s=r.computed(()=>{const x=e.nodes.filter(k=>!k.hidden);return e.onlyRenderVisibleElements?x&&ro(x,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):x??[]}),u=(x,k,E)=>{if(k=k??o.value(x.source),E=E??o.value(x.target),!k||!E){e.hooks.error.trigger(new ae(re.EDGE_ORPHANED,x.id));return}return!x.hidden&&!E.hidden&&!k.hidden},d=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(x=>{const k=o.value(x.source),E=o.value(x.target);return u(x,k,E)&&Na({sourcePos:k.computedPosition||{x:0,y:0},targetPos:E.computedPosition||{x:0,y:0},sourceWidth:k.dimensions.width,sourceHeight:k.dimensions.height,targetWidth:E.dimensions.width,targetHeight:E.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(x=>u(x))),c=r.computed(()=>[...s.value,...d.value]),f=r.computed(()=>e.nodes.filter(x=>x.selected)),h=r.computed(()=>e.edges.filter(x=>x.selected)),b=r.computed(()=>[...f.value??[],...h.value??[]]),m=r.computed(()=>s.value.filter(x=>x.initialized&&x.handleBounds!==void 0));return{getNode:o,getEdge:a,getElements:c,getEdgeTypes:i,getNodeTypes:l,getEdges:d,getNodes:s,getSelectedElements:b,getSelectedNodes:f,getSelectedEdges:h,getNodesInitialized:m}}function pn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function er(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ze(){}var qe=.7,It=1/qe,Fe="\\s*([+-]?\\d+)\\s*",Qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gs=/^#([0-9a-f]{3,8})$/,ms=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),ys=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),vs=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${Qe}\\)$`),ws=new RegExp(`^rgba\\(${pe},${pe},${pe},${Qe}\\)$`),bs=new RegExp(`^hsl\\(${Qe},${pe},${pe}\\)$`),xs=new RegExp(`^hsla\\(${Qe},${pe},${pe},${Qe}\\)$`),tr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pn(Ze,Je,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nr,formatHex:nr,formatHex8:_s,formatHsl:Es,formatRgb:or,toString:or});function nr(){return this.rgb().formatHex()}function _s(){return this.rgb().formatHex8()}function Es(){return sr(this).formatHsl()}function or(){return this.rgb().formatRgb()}function Je(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gs.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rr(t):n===3?new ie(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ot(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ot(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ms.exec(e))?new ie(t[1],t[2],t[3],1):(t=ys.exec(e))?new ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vs.exec(e))?Ot(t[1],t[2],t[3],t[4]):(t=ws.exec(e))?Ot(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bs.exec(e))?lr(t[1],t[2]/100,t[3]/100,1):(t=xs.exec(e))?lr(t[1],t[2]/100,t[3]/100,t[4]):tr.hasOwnProperty(e)?rr(tr[e]):e==="transparent"?new ie(NaN,NaN,NaN,0):null}function rr(e){return new ie(e>>16&255,e>>8&255,e&255,1)}function Ot(e,t,n,o){return o<=0&&(e=t=n=NaN),new ie(e,t,n,o)}function ks(e){return e instanceof Ze||(e=Je(e)),e?(e=e.rgb(),new ie(e.r,e.g,e.b,e.opacity)):new ie}function gn(e,t,n,o){return arguments.length===1?ks(e):new ie(e,t,n,o??1)}function ie(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}pn(ie,gn,er(Ze,{brighter(e){return e=e==null?It:Math.pow(It,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qe:Math.pow(qe,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ie(Me(this.r),Me(this.g),Me(this.b),Rt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ar,formatHex:ar,formatHex8:Ns,formatRgb:ir,toString:ir}));function ar(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}`}function Ns(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}${Be((isNaN(this.opacity)?1:this.opacity)*255)}`}function ir(){const e=Rt(this.opacity);return`${e===1?"rgb(":"rgba("}${Me(this.r)}, ${Me(this.g)}, ${Me(this.b)}${e===1?")":`, ${e})`}`}function Rt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Me(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Be(e){return e=Me(e),(e<16?"0":"")+e.toString(16)}function lr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new de(e,t,n,o)}function sr(e){if(e instanceof de)return new de(e.h,e.s,e.l,e.opacity);if(e instanceof Ze||(e=Je(e)),!e)return new de;if(e instanceof de)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),i=Math.max(t,n,o),l=NaN,s=i-a,u=(i+a)/2;return s?(t===i?l=(n-o)/s+(n<o)*6:n===i?l=(o-t)/s+2:l=(t-n)/s+4,s/=u<.5?i+a:2-i-a,l*=60):s=u>0&&u<1?0:l,new de(l,s,u,e.opacity)}function Ss(e,t,n,o){return arguments.length===1?sr(e):new de(e,t,n,o??1)}function de(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}pn(de,Ss,er(Ze,{brighter(e){return e=e==null?It:Math.pow(It,e),new de(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qe:Math.pow(qe,e),new de(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new ie(mn(e>=240?e-240:e+120,a,o),mn(e,a,o),mn(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new de(ur(this.h),Tt(this.s),Tt(this.l),Rt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rt(this.opacity);return`${e===1?"hsl(":"hsla("}${ur(this.h)}, ${Tt(this.s)*100}%, ${Tt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ur(e){return e=(e||0)%360,e<0?e+360:e}function Tt(e){return Math.max(0,Math.min(1,e||0))}function mn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const cr=e=>()=>e;function Cs(e,t){return function(n){return e+n*t}}function Ms(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Bs(e){return(e=+e)==1?dr:function(t,n){return n-t?Ms(t,n,e):cr(isNaN(t)?n:t)}}function dr(e,t){var n=t-e;return n?Cs(e,n):cr(isNaN(e)?t:e)}const fr=function e(t){var n=Bs(t);function o(a,i){var l=n((a=gn(a)).r,(i=gn(i)).r),s=n(a.g,i.g),u=n(a.b,i.b),d=dr(a.opacity,i.opacity);return function(c){return a.r=l(c),a.g=s(c),a.b=u(c),a.opacity=d(c),a+""}}return o.gamma=e,o}(1);function ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vn=new RegExp(yn.source,"g");function Ps(e){return function(){return e}}function Is(e){return function(t){return e(t)+""}}function Os(e,t){var n=yn.lastIndex=vn.lastIndex=0,o,a,i,l=-1,s=[],u=[];for(e=e+"",t=t+"";(o=yn.exec(e))&&(a=vn.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),s[l]?s[l]+=i:s[++l]=i),(o=o[0])===(a=a[0])?s[l]?s[l]+=a:s[++l]=a:(s[++l]=null,u.push({i:l,x:ke(o,a)})),n=vn.lastIndex;return n<t.length&&(i=t.slice(n),s[l]?s[l]+=i:s[++l]=i),s.length<2?u[0]?Is(u[0].x):Ps(t):(t=u.length,function(d){for(var c=0,f;c<t;++c)s[(f=u[c]).i]=f.x(d);return s.join("")})}var hr=180/Math.PI,pr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gr(e,t,n,o,a,i){var l,s,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,u/=s),e*o<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*hr,skewX:Math.atan(u)*hr,scaleX:l,scaleY:s}}var $t;function Rs(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pr:gr(t.a,t.b,t.c,t.d,t.e,t.f)}function Ts(e){return e==null||($t||($t=document.createElementNS("http://www.w3.org/2000/svg","g")),$t.setAttribute("transform",e),!(e=$t.transform.baseVal.consolidate()))?pr:(e=e.matrix,gr(e.a,e.b,e.c,e.d,e.e,e.f))}function mr(e,t,n,o){function a(d){return d.length?d.pop()+" ":""}function i(d,c,f,h,b,m){if(d!==f||c!==h){var x=b.push("translate(",null,t,null,n);m.push({i:x-4,x:ke(d,f)},{i:x-2,x:ke(c,h)})}else(f||h)&&b.push("translate("+f+t+h+n)}function l(d,c,f,h){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),h.push({i:f.push(a(f)+"rotate(",null,o)-2,x:ke(d,c)})):c&&f.push(a(f)+"rotate("+c+o)}function s(d,c,f,h){d!==c?h.push({i:f.push(a(f)+"skewX(",null,o)-2,x:ke(d,c)}):c&&f.push(a(f)+"skewX("+c+o)}function u(d,c,f,h,b,m){if(d!==f||c!==h){var x=b.push(a(b)+"scale(",null,",",null,")");m.push({i:x-4,x:ke(d,f)},{i:x-2,x:ke(c,h)})}else(f!==1||h!==1)&&b.push(a(b)+"scale("+f+","+h+")")}return function(d,c){var f=[],h=[];return d=e(d),c=e(c),i(d.translateX,d.translateY,c.translateX,c.translateY,f,h),l(d.rotate,c.rotate,f,h),s(d.skewX,c.skewX,f,h),u(d.scaleX,d.scaleY,c.scaleX,c.scaleY,f,h),d=c=null,function(b){for(var m=-1,x=h.length,k;++m<x;)f[(k=h[m]).i]=k.x(b);return f.join("")}}}var $s=mr(Rs,"px, ","px)","deg)"),Ds=mr(Ts,", ",")",")"),As=1e-12;function yr(e){return((e=Math.exp(e))+1/e)/2}function zs(e){return((e=Math.exp(e))-1/e)/2}function Vs(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ls=function e(t,n,o){function a(i,l){var s=i[0],u=i[1],d=i[2],c=l[0],f=l[1],h=l[2],b=c-s,m=f-u,x=b*b+m*m,k,E;if(x<As)E=Math.log(h/d)/t,k=function(g){return[s+g*b,u+g*m,d*Math.exp(t*g*E)]};else{var I=Math.sqrt(x),X=(h*h-d*d+o*x)/(2*d*n*I),v=(h*h-d*d-o*x)/(2*h*n*I),P=Math.log(Math.sqrt(X*X+1)-X),_=Math.log(Math.sqrt(v*v+1)-v);E=(_-P)/t,k=function(g){var N=g*E,O=yr(P),M=d/(n*I)*(O*Vs(t*N+P)-zs(P));return[s+M*b,u+M*m,d*O/yr(t*N+P)]}}return k.duration=E*1e3*t/Math.SQRT2,k}return a.rho=function(i){var l=Math.max(.001,+i),s=l*l,u=s*s;return e(l,s,u)},a}(Math.SQRT2,2,4);var Xe=0,et=0,tt=0,vr=1e3,Dt,nt,At=0,Pe=0,zt=0,ot=typeof performance=="object"&&performance.now?performance:Date,wr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wn(){return Pe||(wr(Fs),Pe=ot.now()+zt)}function Fs(){Pe=0}function Vt(){this._call=this._time=this._next=null}Vt.prototype=br.prototype={constructor:Vt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?wn():+n)+(t==null?0:+t),!this._next&&nt!==this&&(nt?nt._next=this:Dt=this,nt=this),this._call=e,this._time=n,bn()},stop:function(){this._call&&(this._call=null,this._time=1/0,bn())}};function br(e,t,n){var o=new Vt;return o.restart(e,t,n),o}function Xs(){wn(),++Xe;for(var e=Dt,t;e;)(t=Pe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xe}function xr(){Pe=(At=ot.now())+zt,Xe=et=0;try{Xs()}finally{Xe=0,Gs(),Pe=0}}function Ys(){var e=ot.now(),t=e-At;t>vr&&(zt-=t,At=e)}function Gs(){for(var e,t=Dt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Dt=n);nt=e,bn(o)}function bn(e){if(!Xe){et&&(et=clearTimeout(et));var t=e-Pe;t>24?(e<1/0&&(et=setTimeout(xr,e-ot.now()-zt)),tt&&(tt=clearInterval(tt))):(tt||(At=ot.now(),tt=setInterval(Ys,vr)),Xe=1,wr(xr))}}function _r(e,t,n){var o=new Vt;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,n),o}var js=yt("start","end","cancel","interrupt"),Hs=[],Er=0,kr=1,xn=2,Lt=3,Nr=4,_n=5,Ft=6;function Xt(e,t,n,o,a,i){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Us(e,n,{name:t,index:o,group:a,on:js,tween:Hs,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Er})}function En(e,t){var n=fe(e,t);if(n.state>Er)throw new Error("too late; already scheduled");return n}function ge(e,t){var n=fe(e,t);if(n.state>Lt)throw new Error("too late; already running");return n}function fe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Us(e,t,n){var o=e.__transition,a;o[t]=n,n.timer=br(i,0,n.time);function i(d){n.state=kr,n.timer.restart(l,n.delay,n.time),n.delay<=d&&l(d-n.delay)}function l(d){var c,f,h,b;if(n.state!==kr)return u();for(c in o)if(b=o[c],b.name===n.name){if(b.state===Lt)return _r(l);b.state===Nr?(b.state=Ft,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete o[c]):+c<t&&(b.state=Ft,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete o[c])}if(_r(function(){n.state===Lt&&(n.state=Nr,n.timer.restart(s,n.delay,n.time),s(d))}),n.state=xn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===xn){for(n.state=Lt,a=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(b=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++f]=b);a.length=f+1}}function s(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=_n,1),f=-1,h=a.length;++f<h;)a[f].call(e,c);n.state===_n&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ft,n.timer.stop(),delete o[t];for(var d in o)return;delete e.__transition}}function Yt(e,t){var n=e.__transition,o,a,i=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){i=!1;continue}a=o.state>xn&&o.state<_n,o.state=Ft,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}i&&delete e.__transition}}function Ks(e){return this.each(function(){Yt(this,e)})}function Ws(e,t){var n,o;return function(){var a=ge(this,e),i=a.tween;if(i!==n){o=n=i;for(var l=0,s=o.length;l<s;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}a.tween=o}}function Zs(e,t,n){var o,a;if(typeof n!="function")throw new Error;return function(){var i=ge(this,e),l=i.tween;if(l!==o){a=(o=l).slice();for(var s={name:t,value:n},u=0,d=a.length;u<d;++u)if(a[u].name===t){a[u]=s;break}u===d&&a.push(s)}i.tween=a}}function qs(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=fe(this.node(),n).tween,a=0,i=o.length,l;a<i;++a)if((l=o[a]).name===e)return l.value;return null}return this.each((t==null?Ws:Zs)(n,e,t))}function kn(e,t,n){var o=e._id;return e.each(function(){var a=ge(this,o);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return fe(a,o).value[t]}}function Sr(e,t){var n;return(typeof t=="number"?ke:t instanceof Je?fr:(n=Je(t))?(t=n,fr):Os)(e,t)}function Qs(e){return function(){this.removeAttribute(e)}}function Js(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eu(e,t,n){var o,a=n+"",i;return function(){var l=this.getAttribute(e);return l===a?null:l===o?i:i=t(o=l,n)}}function tu(e,t,n){var o,a=n+"",i;return function(){var l=this.getAttributeNS(e.space,e.local);return l===a?null:l===o?i:i=t(o=l,n)}}function nu(e,t,n){var o,a,i;return function(){var l,s=n(this),u;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),u=s+"",l===u?null:l===o&&u===a?i:(a=u,i=t(o=l,s)))}}function ou(e,t,n){var o,a,i;return function(){var l,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),u=s+"",l===u?null:l===o&&u===a?i:(a=u,i=t(o=l,s)))}}function ru(e,t){var n=wt(e),o=n==="transform"?Ds:Sr;return this.attrTween(e,typeof t=="function"?(n.local?ou:nu)(n,o,kn(this,"attr."+e,t)):t==null?(n.local?Js:Qs)(n):(n.local?tu:eu)(n,o,t))}function au(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function iu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lu(e,t){var n,o;function a(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&iu(e,i)),n}return a._value=t,a}function su(e,t){var n,o;function a(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&au(e,i)),n}return a._value=t,a}function uu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=wt(e);return this.tween(n,(o.local?lu:su)(o,t))}function cu(e,t){return function(){En(this,e).delay=+t.apply(this,arguments)}}function du(e,t){return t=+t,function(){En(this,e).delay=t}}function fu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cu:du)(t,e)):fe(this.node(),t).delay}function hu(e,t){return function(){ge(this,e).duration=+t.apply(this,arguments)}}function pu(e,t){return t=+t,function(){ge(this,e).duration=t}}function gu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hu:pu)(t,e)):fe(this.node(),t).duration}function mu(e,t){if(typeof t!="function")throw new Error;return function(){ge(this,e).ease=t}}function yu(e){var t=this._id;return arguments.length?this.each(mu(t,e)):fe(this.node(),t).ease}function vu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ge(this,e).ease=n}}function wu(e){if(typeof e!="function")throw new Error;return this.each(vu(this._id,e))}function bu(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var i=t[a],l=i.length,s=o[a]=[],u,d=0;d<l;++d)(u=i[d])&&e.call(u,u.__data__,d,i)&&s.push(u);return new be(o,this._parents,this._name,this._id)}function xu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,i=Math.min(o,a),l=new Array(o),s=0;s<i;++s)for(var u=t[s],d=n[s],c=u.length,f=l[s]=new Array(c),h,b=0;b<c;++b)(h=u[b]||d[b])&&(f[b]=h);for(;s<o;++s)l[s]=t[s];return new be(l,this._parents,this._name,this._id)}function _u(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Eu(e,t,n){var o,a,i=_u(t)?En:ge;return function(){var l=i(this,e),s=l.on;s!==o&&(a=(o=s).copy()).on(t,n),l.on=a}}function ku(e,t){var n=this._id;return arguments.length<2?fe(this.node(),n).on.on(e):this.each(Eu(n,e,t))}function Nu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Su(){return this.on("end.remove",Nu(this._id))}function Cu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ln(e));for(var o=this._groups,a=o.length,i=new Array(a),l=0;l<a;++l)for(var s=o[l],u=s.length,d=i[l]=new Array(u),c,f,h=0;h<u;++h)(c=s[h])&&(f=e.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),d[h]=f,Xt(d[h],t,n,h,d,fe(c,n)));return new be(i,this._parents,t,n)}function Mu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=So(e));for(var o=this._groups,a=o.length,i=[],l=[],s=0;s<a;++s)for(var u=o[s],d=u.length,c,f=0;f<d;++f)if(c=u[f]){for(var h=e.call(c,c.__data__,f,u),b,m=fe(c,n),x=0,k=h.length;x<k;++x)(b=h[x])&&Xt(b,t,n,x,h,m);i.push(h),l.push(c)}return new be(i,l,t,n)}var Bu=Ue.prototype.constructor;function Pu(){return new Bu(this._groups,this._parents)}function Iu(e,t){var n,o,a;return function(){var i=ze(this,e),l=(this.style.removeProperty(e),ze(this,e));return i===l?null:i===n&&l===o?a:a=t(n=i,o=l)}}function Cr(e){return function(){this.style.removeProperty(e)}}function Ou(e,t,n){var o,a=n+"",i;return function(){var l=ze(this,e);return l===a?null:l===o?i:i=t(o=l,n)}}function Ru(e,t,n){var o,a,i;return function(){var l=ze(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),ze(this,e))),l===u?null:l===o&&u===a?i:(a=u,i=t(o=l,s))}}function Tu(e,t){var n,o,a,i="style."+t,l="end."+i,s;return function(){var u=ge(this,e),d=u.on,c=u.value[i]==null?s||(s=Cr(t)):void 0;(d!==n||a!==c)&&(o=(n=d).copy()).on(l,a=c),u.on=o}}function $u(e,t,n){var o=(e+="")=="transform"?$s:Sr;return t==null?this.styleTween(e,Iu(e,o)).on("end.style."+e,Cr(e)):typeof t=="function"?this.styleTween(e,Ru(e,o,kn(this,"style."+e,t))).each(Tu(this._id,e)):this.styleTween(e,Ou(e,o,t),n).on("end.style."+e,null)}function Du(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Au(e,t,n){var o,a;function i(){var l=t.apply(this,arguments);return l!==a&&(o=(a=l)&&Du(e,l,n)),o}return i._value=t,i}function zu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Au(e,t,n??""))}function Vu(e){return function(){this.textContent=e}}function Lu(e){return function(){var t=e(this);this.textContent=t??""}}function Fu(e){return this.tween("text",typeof e=="function"?Lu(kn(this,"text",e)):Vu(e==null?"":e+""))}function Xu(e){return function(t){this.textContent=e.call(this,t)}}function Yu(e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Xu(a)),t}return o._value=e,o}function Gu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Yu(e))}function ju(){for(var e=this._name,t=this._id,n=Mr(),o=this._groups,a=o.length,i=0;i<a;++i)for(var l=o[i],s=l.length,u,d=0;d<s;++d)if(u=l[d]){var c=fe(u,t);Xt(u,e,n,d,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new be(o,this._parents,e,n)}function Hu(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(i,l){var s={value:l},u={value:function(){--a===0&&i()}};n.each(function(){var d=ge(this,o),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),d.on=t}),a===0&&i()})}var Uu=0;function be(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Mr(){return++Uu}var xe=Ue.prototype;be.prototype={constructor:be,select:Cu,selectAll:Mu,selectChild:xe.selectChild,selectChildren:xe.selectChildren,filter:bu,merge:xu,selection:Pu,transition:ju,call:xe.call,nodes:xe.nodes,node:xe.node,size:xe.size,empty:xe.empty,each:xe.each,on:ku,attr:ru,attrTween:uu,style:$u,styleTween:zu,text:Fu,textTween:Gu,remove:Su,tween:qs,delay:fu,duration:gu,ease:yu,easeVarying:wu,end:Hu,[Symbol.iterator]:xe[Symbol.iterator]};function Ku(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wu={time:null,delay:0,duration:250,ease:Ku};function Zu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function qu(e){var t,n;e instanceof be?(t=e._id,e=e._name):(t=Mr(),(n=Wu).time=wn(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,i=0;i<a;++i)for(var l=o[i],s=l.length,u,d=0;d<s;++d)(u=l[d])&&Xt(u,e,t,d,l,n||Zu(u,t));return new be(o,this._parents,e,t)}Ue.prototype.interrupt=Ks,Ue.prototype.transition=qu;const Gt=e=>()=>e;function Qu(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function _e(e,t,n){this.k=e,this.x=t,this.y=n}_e.prototype={constructor:_e,scale:function(e){return e===1?this:new _e(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _e(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rt=new _e(1,0,0);_e.prototype;function Nn(e){e.stopImmediatePropagation()}function at(e){e.preventDefault(),e.stopImmediatePropagation()}function Ju(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ec(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Br(){return this.__zoom||rt}function tc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function nc(){return navigator.maxTouchPoints||"ontouchstart"in this}function oc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l))}function rc(){var e=Ju,t=ec,n=oc,o=tc,a=nc,i=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Ls,d=yt("start","zoom","end"),c,f,h,b=500,m=150,x=0,k=10;function E(y){y.property("__zoom",Br).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",ee).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(y,A,S,D){var j=y.selection?y.selection():y;j.property("__zoom",Br),y!==j?P(y,A,S,D):j.interrupt().each(function(){_(this,arguments).event(D).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},E.scaleBy=function(y,A,S,D){E.scaleTo(y,function(){var j=this.__zoom.k,K=typeof A=="function"?A.apply(this,arguments):A;return j*K},S,D)},E.scaleTo=function(y,A,S,D){E.transform(y,function(){var j=t.apply(this,arguments),K=this.__zoom,T=S==null?v(j):typeof S=="function"?S.apply(this,arguments):S,H=K.invert(T),z=typeof A=="function"?A.apply(this,arguments):A;return n(X(I(K,z),T,H),j,l)},S,D)},E.translateBy=function(y,A,S,D){E.transform(y,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),l)},null,D)},E.translateTo=function(y,A,S,D,j){E.transform(y,function(){var K=t.apply(this,arguments),T=this.__zoom,H=D==null?v(K):typeof D=="function"?D.apply(this,arguments):D;return n(rt.translate(H[0],H[1]).scale(T.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof S=="function"?-S.apply(this,arguments):-S),K,l)},D,j)};function I(y,A){return A=Math.max(i[0],Math.min(i[1],A)),A===y.k?y:new _e(A,y.x,y.y)}function X(y,A,S){var D=A[0]-S[0]*y.k,j=A[1]-S[1]*y.k;return D===y.x&&j===y.y?y:new _e(y.k,D,j)}function v(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function P(y,A,S,D){y.on("start.zoom",function(){_(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(D).end()}).tween("zoom",function(){var j=this,K=arguments,T=_(j,K).event(D),H=t.apply(j,K),z=S==null?v(H):typeof S=="function"?S.apply(j,K):S,Z=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),G=j.__zoom,Q=typeof A=="function"?A.apply(j,K):A,B=u(G.invert(z).concat(Z/G.k),Q.invert(z).concat(Z/Q.k));return function(p){if(p===1)p=Q;else{var w=B(p),V=Z/w[2];p=new _e(V,z[0]-w[0]*V,z[1]-w[1]*V)}T.zoom(null,p)}})}function _(y,A,S){return!S&&y.__zooming||new g(y,A)}function g(y,A){this.that=y,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,A),this.taps=0}g.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,A){return this.mouse&&y!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var A=ce(this.that).datum();d.call(y,this.that,new Qu(y,{sourceEvent:this.sourceEvent,target:E,type:y,transform:this.that.__zoom,dispatch:d}),A)}};function N(y,...A){if(!e.apply(this,arguments))return;var S=_(this,A).event(y),D=this.__zoom,j=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,o.apply(this,arguments)))),K=he(y);if(S.wheel)(S.mouse[0][0]!==K[0]||S.mouse[0][1]!==K[1])&&(S.mouse[1]=D.invert(S.mouse[0]=K)),clearTimeout(S.wheel);else{if(D.k===j)return;S.mouse=[K,D.invert(K)],Yt(this),S.start()}at(y),S.wheel=setTimeout(T,m),S.zoom("mouse",n(X(I(D,j),S.mouse[0],S.mouse[1]),S.extent,l));function T(){S.wheel=null,S.end()}}function O(y,...A){if(h||!e.apply(this,arguments))return;var S=y.currentTarget,D=_(this,A,!0).event(y),j=ce(y.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",Z,!0),K=he(y,S),T=y.clientX,H=y.clientY;Ao(y.view),Nn(y),D.mouse=[K,this.__zoom.invert(K)],Yt(this),D.start();function z(G){if(at(G),!D.moved){var Q=G.clientX-T,B=G.clientY-H;D.moved=Q*Q+B*B>x}D.event(G).zoom("mouse",n(X(D.that.__zoom,D.mouse[0]=he(G,S),D.mouse[1]),D.extent,l))}function Z(G){j.on("mousemove.zoom mouseup.zoom",null),zo(G.view,D.moved),at(G),D.event(G).end()}}function M(y,...A){if(e.apply(this,arguments)){var S=this.__zoom,D=he(y.changedTouches?y.changedTouches[0]:y,this),j=S.invert(D),K=S.k*(y.shiftKey?.5:2),T=n(X(I(S,K),D,j),t.apply(this,A),l);at(y),s>0?ce(this).transition().duration(s).call(P,T,D,y):ce(this).call(E.transform,T,D,y)}}function R(y,...A){if(e.apply(this,arguments)){var S=y.touches,D=S.length,j=_(this,A,y.changedTouches.length===D).event(y),K,T,H,z;for(Nn(y),T=0;T<D;++T)H=S[T],z=he(H,this),z=[z,this.__zoom.invert(z),H.identifier],j.touch0?!j.touch1&&j.touch0[2]!==z[2]&&(j.touch1=z,j.taps=0):(j.touch0=z,K=!0,j.taps=1+!!c);c&&(c=clearTimeout(c)),K&&(j.taps<2&&(f=z[0],c=setTimeout(function(){c=null},b)),Yt(this),j.start())}}function q(y,...A){if(this.__zooming){var S=_(this,A).event(y),D=y.changedTouches,j=D.length,K,T,H,z;for(at(y),K=0;K<j;++K)T=D[K],H=he(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=H:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=H);if(T=S.that.__zoom,S.touch1){var Z=S.touch0[0],G=S.touch0[1],Q=S.touch1[0],B=S.touch1[1],p=(p=Q[0]-Z[0])*p+(p=Q[1]-Z[1])*p,w=(w=B[0]-G[0])*w+(w=B[1]-G[1])*w;T=I(T,Math.sqrt(p/w)),H=[(Z[0]+Q[0])/2,(Z[1]+Q[1])/2],z=[(G[0]+B[0])/2,(G[1]+B[1])/2]}else if(S.touch0)H=S.touch0[0],z=S.touch0[1];else return;S.zoom("touch",n(X(T,H,z),S.extent,l))}}function ee(y,...A){if(this.__zooming){var S=_(this,A).event(y),D=y.changedTouches,j=D.length,K,T;for(Nn(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},b),K=0;K<j;++K)T=D[K],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=he(T,this),Math.hypot(f[0]-T[0],f[1]-T[1])<k)){var H=ce(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return E.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:Gt(+y),E):o},E.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Gt(!!y),E):e},E.touchable=function(y){return arguments.length?(a=typeof y=="function"?y:Gt(!!y),E):a},E.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Gt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),E):t},E.scaleExtent=function(y){return arguments.length?(i[0]=+y[0],i[1]=+y[1],E):[i[0],i[1]]},E.translateExtent=function(y){return arguments.length?(l[0][0]=+y[0][0],l[1][0]=+y[1][0],l[0][1]=+y[0][1],l[1][1]=+y[1][1],E):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},E.constrain=function(y){return arguments.length?(n=y,E):n},E.duration=function(y){return arguments.length?(s=+y,E):s},E.interpolate=function(y){return arguments.length?(u=y,E):u},E.on=function(){var y=d.on.apply(d,arguments);return y===d?E:y},E.clickDistance=function(y){return arguments.length?(x=(y=+y)*y,E):Math.sqrt(x)},E.tapDistance=function(y){return arguments.length?(k=+y,E):k},E}const Sn=.1;function Ie(){}const ac={zoomIn:Ie,zoomOut:Ie,zoomTo:Ie,fitView:Ie,setCenter:Ie,fitBounds:Ie,project:e=>e,setTransform:Ie,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1},ic=(e,t)=>{const n=e,o=r.toRef(n,"nodes"),a=r.toRef(n,"d3Zoom"),i=r.toRef(n,"d3Selection"),l=r.toRef(n,"dimensions"),s=r.toRef(n,"translateExtent"),u=r.toRef(n,"minZoom"),d=r.toRef(n,"maxZoom"),c=r.toRef(n,"viewport"),f=r.toRef(n,"snapToGrid"),h=r.toRef(n,"snapGrid"),b=r.toRef(n,"hooks"),m=t,x=r.toRef(m,"getNodes"),k=r.ref(!1);b.value.nodesInitialized.on(()=>{k.value=!0});const E=r.computed(()=>!!a.value&&!!i.value&&!!l.value.width&&!!l.value.height&&k.value);function I(v,P){i.value&&a.value&&a.value.scaleBy(Cn(i.value,P),v)}function X(v,P,_,g){const{x:N,y:O}=qn({x:-v,y:-P},s.value),M=rt.translate(-N,-O).scale(_);i.value&&a.value&&a.value.transform(Cn(i.value,g),M)}return r.computed(()=>E.value?{initialized:!0,zoomIn:v=>{I(1.2,v==null?void 0:v.duration)},zoomOut:v=>{I(1/1.2,v==null?void 0:v.duration)},zoomTo:(v,P)=>{i.value&&a.value&&a.value.scaleTo(Cn(i.value,P==null?void 0:P.duration),v)},setTransform:(v,P)=>{X(v.x,v.y,v.zoom,P==null?void 0:P.duration)},getTransform:()=>({x:c.value.x,y:c.value.y,zoom:c.value.zoom}),fitView:(v={padding:Sn,includeHiddenNodes:!1,duration:0})=>{if(!o.value.length)return;const P=(v.includeHiddenNodes?o.value:x.value).filter(M=>{var R;const q=M.initialized&&M.dimensions.width&&M.dimensions.height;let ee=!0;return(R=v.nodes)!=null&&R.length&&(ee=v.nodes.includes(M.id)),q&&ee}),_=oo(P),{x:g,y:N,zoom:O}=ao(_,l.value.width,l.value.height,v.minZoom??u.value,v.maxZoom??d.value,v.padding??Sn,v.offset);X(g,N,O,v==null?void 0:v.duration)},setCenter:(v,P,_)=>{const g=typeof(_==null?void 0:_.zoom)<"u"?_.zoom:d.value,N=l.value.width/2-v*g,O=l.value.height/2-P*g;X(N,O,g,_==null?void 0:_.duration)},fitBounds:(v,P={padding:Sn})=>{const{x:_,y:g,zoom:N}=ao(v,l.value.width,l.value.height,u.value,d.value,P.padding);X(_,g,N,P==null?void 0:P.duration)},project:v=>to(v,c.value,f.value,h.value)}:ac)};function Cn(e,t=0){return e.transition().duration(t)}function Mn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let a={};if(ye(t.style)?a={...t.style(t)}:t.style&&(a={...t.style}),a.width=a.width??`${t.dimensions.width}px`,a.height=a.height??`${t.dimensions.height}px`,n>0)if(we(a.width)){const i=Number(a.width.replace("px",""));a.width=`${i+n}px`}else a.width+=n;if(o>0)if(we(a.height)){const i=Number(a.height.replace("px",""));a.height=`${i+o}px`}else a.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,we(a.width)){const l=Number(a.width.replace("px",""));a.width=`${l+i}px`}else a.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,we(a.height)){const l=Number(a.height.replace("px",""));a.height=`${l+i}px`}else a.height+=i;e.position.y=0}t.dimensions.width=Number(a.width.toString().replace("px","")),t.dimensions.height=Number(a.height.toString().replace("px","")),ye(t.style)?t.style=i=>{const l=t.style;return{...l(i),...a}}:t.style={...t.style,...a}}}}function Pr(e,t){e.filter(o=>o.type==="add"||o.type==="remove").forEach(o=>{if(o.type==="add")t.findIndex(a=>a.id===o.item.id)===-1&&t.push(o.item);else if(o.type==="remove"){const a=t.findIndex(i=>i.id===o.id);a!==-1&&t.splice(a,1)}});const n=t.map(o=>o.id);return t.forEach(o=>{var a,i;const l=e.filter(s=>s.id===o.id);for(const s of l)switch(s.type){case"select":o.selected=s.selected;break;case"position":if($e(o)&&(typeof s.position<"u"&&(o.position=s.position),typeof s.dragging<"u"&&(o.dragging=s.dragging),o.expandParent&&o.parentNode)){const u=t[n.indexOf(o.parentNode)];u&&$e(u)&&Mn(o,u)}break;case"dimensions":if($e(o)){if(typeof s.dimensions<"u"&&(o.dimensions=s.dimensions),typeof s.updateStyle<"u"&&(o.style={...o.style||{},width:`${(a=s.dimensions)==null?void 0:a.width}px`,height:`${(i=s.dimensions)==null?void 0:i.height}px`}),typeof s.resizing<"u"&&(o.resizing=s.resizing),o.expandParent&&o.parentNode){const u=t[n.indexOf(o.parentNode)];u&&$e(u)&&(u.initialized?Mn(o,u):r.nextTick(()=>{Mn(o,u)}))}o.initialized||(o.initialized=!0)}break}}),t}function Ee(e,t){return{id:e,type:"select",selected:t}}function Ir(e){return{item:e,type:"add"}}function Bn(e){return{id:e,type:"remove"}}function Pn(e,t){return e.reduce((n,o)=>{let a=t.includes(o.id);ne(o.selectable)&&!o.selectable&&(a=!1);const i=$e(o)?"changedNodes":"changedEdges";return!o.selected&&a?n[i].push(Ee(o.id,!0)):o.selected&&!a&&n[i].push(Ee(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function lc(e,t,n,o){let a=!1;const i=ic(e,t),l=p=>{const w=p??n.value??[];e.hooks.updateNodeInternals.trigger(w)},s=p=>{if(p)return e.nodes&&!n.value.length?e.nodes.find(w=>w.id===p):e.nodes[n.value.indexOf(p)]},u=p=>{if(p)return e.edges&&!o.value.length?e.edges.find(w=>w.id===p):e.edges[o.value.indexOf(p)]},d=(p,w,V)=>{const $=[];p.forEach(L=>{var F,C;const U={id:L.id,type:"position",dragging:V,from:L.from};if(w&&(U.position=L.position,L.parentNode)){const J=s(L.parentNode);U.position={x:U.position.x-(((F=J==null?void 0:J.computedPosition)==null?void 0:F.x)??0),y:U.position.y-(((C=J==null?void 0:J.computedPosition)==null?void 0:C.y)??0)}}$.push(U)}),$!=null&&$.length&&e.hooks.nodesChange.trigger($)},c=p=>{var w;if(!e.vueFlowRef)return;const V=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!V)return;let $;if((w=e.__experimentalFeatures)!=null&&w.nestedFlow){let F=[V],C=V,U;for(;!U&&C;)C=C.parentElement,U=C==null?void 0:C.classList.contains("vue-flow__transformationpane"),U&&(F=[C,...F]);F.forEach(J=>{const le=window.getComputedStyle(J),{m22:Ge}=new window.DOMMatrixReadOnly(le.transform);$?$*=Ge:$=Ge})}else{const F=window.getComputedStyle(V),{m22:C}=new window.DOMMatrixReadOnly(F.transform);$=C}const L=p.reduce((F,C)=>{const U=s(C.id);if(U){const J=lt(C.nodeElement);J.width&&J.height&&(U.dimensions.width!==J.width||U.dimensions.height!==J.height||C.forceUpdate)&&(U.handleBounds.source=_o(".source",C.nodeElement,$),U.handleBounds.target=_o(".target",C.nodeElement,$),U.dimensions=J,U.initialized=!0,F.push({id:U.id,type:"dimensions",dimensions:J}))}return F},[]);e.fitViewOnInit&&!a&&(se(()=>i.value.initialized).toBe(!0).then(()=>{i.value.fitView()}),a=!0),L.length&&e.hooks.nodesChange.trigger(L)},f=(p,w)=>{const V=p.map(F=>F.id);let $,L=[];if(e.multiSelectionActive)$=V.map(F=>Ee(F,w));else{const F=Pn([...e.nodes,...e.edges],V);$=F.changedNodes,L=F.changedEdges}$.length&&e.hooks.nodesChange.trigger($),L.length&&e.hooks.edgesChange.trigger(L)},h=(p,w)=>{const V=p.map(F=>F.id);let $=[],L;if(e.multiSelectionActive)L=V.map(F=>Ee(F,w));else{const F=Pn([...e.nodes,...e.edges],V);$=F.changedNodes,L=F.changedEdges}$.length&&e.hooks.nodesChange.trigger($),L.length&&e.hooks.edgesChange.trigger(L)},b=(p,w)=>{const V=p.filter(st).map(C=>C.id),$=p.filter(Te).map(C=>C.id);let{changedNodes:L,changedEdges:F}=Pn([...e.nodes,...e.edges],[...V,...$]);e.multiSelectionActive&&(L=V.map(C=>Ee(C,w)),F=$.map(C=>Ee(C,w))),L.length&&e.hooks.nodesChange.trigger(L),F.length&&e.hooks.edgesChange.trigger(F)},m=p=>{f(p,!0)},x=p=>{h(p,!0)},k=p=>{b(p,!0)},E=p=>{if(!p.length)return f(p,!1);const w=p.map(V=>V.id).map(V=>Ee(V,!1));w.length&&e.hooks.nodesChange.trigger(w)},I=p=>{if(!p.length)return h(p,!1);const w=p.map(V=>V.id).map(V=>Ee(V,!1));w.length&&e.hooks.edgesChange.trigger(w)},X=p=>{if(!p||!p.length)return b([],!1);const{changedNodes:w,changedEdges:V}=p.reduce(($,L)=>{const F=Ee(L.id,!1);return st(L)?$.changedNodes.push(F):$.changedEdges.push(F),$},{changedNodes:[],changedEdges:[]});w.length&&e.hooks.nodesChange.trigger(w),V.length&&e.hooks.edgesChange.trigger(V)},v=p=>{var w;(w=e.d3Zoom)==null||w.scaleExtent([p,e.maxZoom]),e.minZoom=p},P=p=>{var w;(w=e.d3Zoom)==null||w.scaleExtent([e.minZoom,p]),e.maxZoom=p},_=p=>{var w;(w=e.d3Zoom)==null||w.translateExtent(p),e.translateExtent=p},g=p=>{e.nodeExtent=p,l(n.value)},N=p=>{e.nodesDraggable=p,e.nodesConnectable=p,e.elementsSelectable=p},O=p=>{const w=p instanceof Function?p(e.nodes):p;!e.initialized&&!w.length||(e.nodes=lo(w,e.nodes,s,e.hooks.error.trigger))},M=p=>{const w=p instanceof Function?p(e.edges):p;if(!e.initialized&&!w.length)return;const V=e.isValidConnection?w.filter($=>e.isValidConnection($,{edges:e.edges,sourceNode:s($.source),targetNode:s($.target)})):w;e.edges=V.reduce(($,L)=>{const F=s(L.source),C=s(L.target),U=!F||typeof F>"u",J=!C||typeof C>"u";if(U&&J?e.hooks.error.trigger(new ae(re.EDGE_SOURCE_TARGET_MISSING,L.id,L.source,L.target)):(U&&e.hooks.error.trigger(new ae(re.EDGE_SOURCE_MISSING,L.id,L.source)),J&&e.hooks.error.trigger(new ae(re.EDGE_TARGET_MISSING,L.id,L.target))),U||J)return $;const le=u(L.id);return $.push({...Jn(L,Object.assign({},le,e.defaultEdgeOptions)),sourceNode:F,targetNode:C}),$},[])},R=p=>{const w=p instanceof Function?p([...e.nodes,...e.edges]):p;!e.initialized&&!w.length||(O(w.filter(st)),M(w.filter(Te)))},q=p=>{const w=p instanceof Function?p(e.nodes):p,V=lo(w,e.nodes,s,e.hooks.error.trigger).map(Ir);V.length&&e.hooks.nodesChange.trigger(V)},ee=p=>{const w=p instanceof Function?p(e.edges):p,V=(e.isValidConnection?w.filter($=>e.isValidConnection($,{edges:e.edges,sourceNode:s($.source),targetNode:s($.target)})):w).reduce(($,L)=>{const F=wa({...L,...e.defaultEdgeOptions},e.edges,e.hooks.error.trigger);if(F){const C=s(F.source),U=s(F.target),J=!C||typeof C>"u",le=!U||typeof U>"u";if(J&&le?e.hooks.error.trigger(new ae(re.EDGE_SOURCE_TARGET_MISSING,F.id,F.source,F.target)):(J&&e.hooks.error.trigger(new ae(re.EDGE_SOURCE_MISSING,F.id,F.source)),le&&e.hooks.error.trigger(new ae(re.EDGE_TARGET_MISSING,F.id,F.target))),J||le)return $;$.push(Ir({...F,sourceNode:C,targetNode:U}))}return $},[]);V.length&&e.hooks.edgesChange.trigger(V)},y=(p,w=!0)=>{const V=p instanceof Function?p(e.nodes):p,$=[],L=[];V.forEach(F=>{const C=typeof F=="string"?s(F):F;if(!(ne(C.deletable)&&!C.deletable)&&($.push(Bn(C.id)),w)){const U=ut([C],e.edges).filter(J=>ne(J.deletable)?J.deletable:!0);L.push(...U.map(J=>Bn(J.id)))}}),L.length&&e.hooks.edgesChange.trigger(L),$.length&&e.hooks.nodesChange.trigger($)},A=p=>{const w=p instanceof Function?p(e.edges):p,V=[];w.forEach($=>{const L=typeof $=="string"?u($):$;ne(L.deletable)&&!L.deletable||V.push(Bn(typeof $=="string"?$:$.id))}),e.hooks.edgesChange.trigger(V)},S=(p,w,V=!0)=>ba(p,w,e.edges,u,V,e.hooks.error.trigger),D=p=>Pr(p,e.nodes),j=p=>Pr(p,e.edges),K=(p,w,V,$=!1)=>{$?e.connectionClickStartHandle=p:e.connectionStartHandle=p,e.connectionEndHandle=null,e.connectionStatus=null,w&&(e.connectionPosition=w)},T=(p,w=null,V=null)=>{e.connectionStartHandle&&(e.connectionPosition=p,e.connectionEndHandle=w,e.connectionStatus=V)},H=(p,w)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStatus=null,w?e.connectionClickStartHandle=null:e.connectionStartHandle=null},z=p=>{const w=fa(p),V=w?null:s(p.id);return!w&&!V?[null,null,w]:[w?p:Zn(V),V,w]},Z=(p,w=!0,V)=>{const[$,L,F]=z(p);return $?(V||e.nodes).filter(C=>{if(!F&&(C.id===L.id||!C.computedPosition))return!1;const U=Zn(C),J=qt(U,$);return w&&J>0||J>=Number(p.width)*Number(p.height)}):[]},G=(p,w,V=!0)=>{const[$]=z(p);if(!$)return!1;const L=qt($,w);return V&&L>0||L>=Number(p.width)*Number(p.height)},Q=p=>{const{viewport:w,dimensions:V,d3Zoom:$,d3Selection:L,translateExtent:F}=e;if(!$||!L||!p.x&&!p.y)return!1;const C=rt.translate(w.x+p.x,w.y+p.y).scale(w.zoom),U=[[0,0],[V.width,V.height]],J=$.constrain()(C,U,F);return $.transform(L,J),e.viewport.x!==J.x||e.viewport.y!==J.y||e.viewport.zoom!==J.k},B=p=>{const w=p instanceof Function?p(e):p,V=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"];ne(w.defaultEdgeOptions)&&(e.defaultEdgeOptions=w.defaultEdgeOptions);const $=w.modelValue||w.nodes||w.edges?[]:void 0;$&&(w.modelValue&&$.push(...w.modelValue),w.nodes&&$.push(...w.nodes),w.edges&&$.push(...w.edges),R($));const L=()=>{ne(w.maxZoom)&&P(w.maxZoom),ne(w.minZoom)&&v(w.minZoom),ne(w.translateExtent)&&_(w.translateExtent),ne(w.nodeExtent)&&g(w.nodeExtent)};Object.keys(w).forEach(F=>{const C=w[F];!V.includes(F)&&ne(C)&&(e[F]=C)}),e.d3Zoom?L():se(()=>e.d3Zoom).not.toBeUndefined().then(L),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:c,setElements:R,setNodes:O,setEdges:M,addNodes:q,addEdges:ee,removeNodes:y,removeEdges:A,findNode:s,findEdge:u,updateEdge:S,applyEdgeChanges:j,applyNodeChanges:D,addSelectedElements:k,addSelectedNodes:m,addSelectedEdges:x,setMinZoom:v,setMaxZoom:P,setTranslateExtent:_,setNodeExtent:g,removeSelectedElements:X,removeSelectedNodes:E,removeSelectedEdges:I,startConnection:K,updateConnection:T,endConnection:H,setInteractive:N,setState:B,getIntersectingNodes:Z,isNodeIntersecting:G,panBy:Q,fitView:async(p={padding:.1})=>{await se(()=>i.value.initialized).toBe(!0),i.value.fitView(p)},zoomIn:async p=>{await se(()=>i.value.initialized).toBe(!0),i.value.zoomIn(p)},zoomOut:async p=>{await se(()=>i.value.initialized).toBe(!0),i.value.zoomOut(p)},zoomTo:async(p,w)=>{await se(()=>i.value.initialized).toBe(!0),i.value.zoomTo(p,w)},setTransform:async(p,w)=>{await se(()=>i.value.initialized).toBe(!0),i.value.setTransform(p,w)},getTransform:()=>i.value.getTransform(),setCenter:async(p,w,V)=>{await se(()=>i.value.initialized).toBe(!0),i.value.setCenter(p,w,V)},fitBounds:async(p,w)=>{await se(()=>i.value.initialized).toBe(!0),i.value.fitBounds(p,w)},project:p=>i.value.project(p),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map(p=>{const{computedPosition:w,handleBounds:V,selected:$,dimensions:L,isParent:F,resizing:C,dragging:U,initialized:J,...le}=p;return le}),edges:e.edges.map(p=>{const{selected:w,sourceNode:V,targetNode:$,...L}=p;return L}),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:l,$reset:()=>{e.edges=[],e.nodes=[],B(Jo())},$destroy:()=>{}}}class Ye{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return Ye.instance||(Ye.instance=new Ye),Ye.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Jo(n),a=r.reactive(o),i=r.computed(()=>a.nodes.map(h=>h.id)),l=r.computed(()=>a.edges.map(h=>h.id)),s=ps(a,i,l),u=lc(a,s,i,l),d={};Object.entries(a.hooks).forEach(([h,b])=>{const m=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;d[m]=b.on});const c={};Object.entries(a.hooks).forEach(([h,b])=>{c[h]=b.trigger}),u.setState(a);const f={...d,...s,...u,...r.toRefs(a),emits:c,id:t,vueFlowVersion:"1.19.3",$destroy:()=>{this.remove(t)}};return this.set(t,f),f}getId(){return`vue-flow-${this.currentId++}`}}const oe=e=>{const t=Ye.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,a=(n==null?void 0:n.vueFlowId)||o;let i,l=!1;if(n){const s=r.inject(so,null);typeof s<"u"&&s!==null&&(i=s)}if(i||a&&(i=t.get(a)),!i||i&&o&&o!==i.id){const s=o??t.getId();i=t.create(s,e),n&&(l=!0)}else e&&i.setState(e);return n&&(r.provide(so,i),n.vueFlowId=i.id,l&&je(()=>{if(i){const s=t.get(i.id);s?s.$destroy():Kn(`No store instance found for id ${i.id} in storage.`)}})),i};function sc(e,t,n){const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let a,i,l=!!(n.nodes.value.length||n.edges.value.length);a=Oe([e.modelValue,()=>{var s,u;return(u=(s=e.modelValue)==null?void 0:s.value)==null?void 0:u.length}],([s])=>{s&&Array.isArray(s)&&(i==null||i.pause(),n.setElements(s),!i&&!l&&s.length?l=!0:i==null||i.resume())}),i=Oe([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([s,u])=>{var d;(d=e.modelValue)!=null&&d.value&&Array.isArray(e.modelValue.value)&&(a==null||a.pause(),e.modelValue.value=[...s,...u],r.nextTick(()=>{a==null||a.resume()}))},{immediate:l}),r.onScopeDispose(()=>{a==null||a.stop(),i==null||i.stop()})})},()=>{o.run(()=>{let a,i,l=!!n.nodes.value.length;a=Oe([e.nodes,()=>{var s,u;return(u=(s=e.nodes)==null?void 0:s.value)==null?void 0:u.length}],([s])=>{s&&Array.isArray(s)&&(i==null||i.pause(),n.setNodes(s),!i&&!l&&s.length?l=!0:i==null||i.resume())}),i=Oe([n.nodes,()=>n.nodes.value.length],([s])=>{var u;(u=e.nodes)!=null&&u.value&&Array.isArray(e.nodes.value)&&(a==null||a.pause(),e.nodes.value=[...s],r.nextTick(()=>{a==null||a.resume()}))},{immediate:l}),r.onScopeDispose(()=>{a==null||a.stop(),i==null||i.stop()})})},()=>{o.run(()=>{let a,i,l=!!n.edges.value.length;a=Oe([e.edges,()=>{var s,u;return(u=(s=e.edges)==null?void 0:s.value)==null?void 0:u.length}],([s])=>{s&&Array.isArray(s)&&(i==null||i.pause(),n.setEdges(s),!i&&!l&&s.length?l=!0:i==null||i.resume())}),i=Oe([n.edges,()=>n.edges.value.length],([s])=>{var u;(u=e.edges)!=null&&u.value&&Array.isArray(e.edges.value)&&(a==null||a.pause(),e.edges.value=[...s],r.nextTick(()=>{a==null||a.resume()}))},{immediate:l}),r.onScopeDispose(()=>{a==null||a.stop(),i==null||i.stop()})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&ne(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&ne(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&ne(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&ne(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{ne(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),r.watch(n.applyDefault,(a,i,l)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),l(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const a=async i=>{let l=i;ye(t.autoConnect)&&(l=await t.autoConnect(i)),l!==!1&&n.addEdges([l])};r.watch(()=>t.autoConnect,()=>{ne(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),r.watch(n.autoConnect,(i,l,s)=>{i?n.onConnect(a):n.hooks.value.connect.off(a),s(()=>{n.hooks.value.connect.off(a)})},{immediate:!0})})},()=>{const a=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(i=>{if(!a.includes(i)){const l=r.toRef(t,i),s=n[i];o.run(()=>{r.watch(l,u=>{ne(u)&&(s.value=u)},{flush:"pre"})})}})}].forEach(a=>a())}),()=>o.stop()}function Or(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const uc={name:"Pane",compatConfig:{MODE:3}},cc=r.defineComponent({...uc,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:a,viewport:i,emits:l,userSelectionActive:s,removeSelectedElements:u,panOnDrag:d,userSelectionRect:c,elementsSelectable:f,nodesSelectionActive:h,addSelectedElements:b,getSelectedEdges:m,getSelectedNodes:x,removeNodes:k,removeEdges:E,selectionMode:I,deleteKeyCode:X,multiSelectionKeyCode:v,multiSelectionActive:P}=oe(),_=r.ref(null),g=r.ref(0),N=r.ref(0),O=r.ref(),M=r.computed(()=>f.value&&(e.isSelecting||s.value));We(X,T=>{if(!T)return;const H=o.value.reduce((z,Z)=>((!Z.selected&&Z.parentNode&&z.find(G=>G.id===Z.parentNode)||Z.selected)&&z.push(Z),z),[]);(H||m.value)&&(m.value.length>0&&E(m.value),H.length>0&&k(H),h.value=!1,u())}),We(v,T=>{P.value=T});function R(){s.value=!1,c.value=null,g.value=0,N.value=0}function q(T){T.target!==_.value||M.value||(l.paneClick(T),u(),h.value=!1)}function ee(T){var H;if(T.target===_.value){if(Array.isArray(d.value)&&(H=d.value)!=null&&H.includes(2)){T.preventDefault();return}l.paneContextMenu(T)}}function y(T){T.target===_.value&&l.paneScroll(T)}function A(T){if(O.value=n.value.getBoundingClientRect(),!M.value||!f||!e.isSelecting||T.button!==0||T.target!==_.value||!O.value)return;const{x:H,y:z}=Or(T,O.value);u(),c.value={width:0,height:0,startX:H,startY:z,x:H,y:z},s.value=!0,l.selectionStart(T)}function S(T){if(!M.value)return l.paneMouseMove(T);if(!e.isSelecting||!O.value||!c.value)return;s.value||(s.value=!0),h.value&&(h.value=!1);const H=Or(T,O.value),z=c.value.startX??0,Z=c.value.startY??0,G={...c.value,x:H.x<z?H.x:z,y:H.y<Z?H.y:Z,width:Math.abs(H.x-z),height:Math.abs(H.y-Z)},Q=ro(o.value,c.value,i.value,I.value===Qt.Partial),B=ut(Q,a.value);g.value=Q.length,N.value=B.length,c.value=G,b([...Q,...B])}function D(T){M.value&&T.button===0&&(!s.value&&c.value&&T.target===_.value&&q(T),h.value=g.value>0,R(),l.selectionEnd(T))}function j(T){var H;if(!M.value)return l.paneMouseLeave(T);s.value&&(h.value=g.value>0,(H=l.selectionEnd)==null||H.call(l,T)),R()}function K(T){M.value||l.paneMouseEnter(T)}return(T,H)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"container",ref:_,key:`pane-${r.unref(t)}`,class:r.normalizeClass(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:q,onContextmenu:ee,onWheelPassive:y,onMouseenter:K,onMousedown:A,onMousemove:S,onMouseup:D,onMouseleave:j},[r.renderSlot(T.$slots,"default"),r.unref(s)&&r.unref(c)?(r.openBlock(),r.createBlock(cs,{key:0})):r.createCommentVNode("",!0),r.unref(h)&&r.unref(x).length?(r.openBlock(),r.createBlock(ss,{key:1})):r.createCommentVNode("",!0)],34))}}),dc={class:"vue-flow__nodes vue-flow__container"},fc={name:"Nodes",compatConfig:{MODE:3}},hc=r.defineComponent({...fc,setup(e){const t=r.inject(dt),n=oe(),o=r.toRef(n,"nodesDraggable"),a=r.toRef(n,"nodesFocusable"),i=r.toRef(n,"elementsSelectable"),l=r.toRef(n,"nodesConnectable"),s=r.toRef(n,"getNodes"),u=r.toRef(n,"getNodesInitialized"),d=r.toRef(n,"getNodeTypes"),c=r.toRef(n,"updateNodeDimensions"),f=r.toRef(n,"emits");let h=r.ref();se(()=>s.value.length>0&&u.value.length===s.value.length).toBe(!0).then(()=>{r.nextTick(()=>{f.value.nodesInitialized(u.value)})}),r.onMounted(()=>{h.value=new ResizeObserver(I=>{const X=I.map(v=>({id:v.target.getAttribute("data-id"),nodeElement:v.target,forceUpdate:!0}));c.value(X)})}),r.onBeforeUnmount(()=>{var I;return(I=h.value)==null?void 0:I.disconnect()});function b(I){return typeof I>"u"?o.value:I}function m(I){return typeof I>"u"?i.value:I}function x(I){return typeof I>"u"?l.value:I}function k(I){return typeof I>"u"?a.value:I}function E(I,X){const v=I||"default";let P=X??d.value[v];const _=r.getCurrentInstance();if(typeof P=="string"&&_){const N=Object.keys(_.appContext.components);N&&N.includes(v)&&(P=r.resolveComponent(v,!1))}return typeof P!="string"?P:(t==null?void 0:t[`node-${v}`])||(f.value.error(new ae(re.NODE_TYPE_MISSING,P)),!1)}return(I,X)=>(r.openBlock(),r.createElementBlock("div",dc,[r.unref(h)?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(r.unref(s),v=>(r.openBlock(),r.createBlock(r.unref(Tl),{id:v.id,key:v.id,"resize-observer":r.unref(h),type:E(v.type,v.template),name:v.type||"default",draggable:b(v.draggable),selectable:m(v.selectable),connectable:x(v.connectable),focusable:k(v.focusable),node:v},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):r.createCommentVNode("",!0)]))}}),pc=["id","markerWidth","markerHeight","markerUnits","orient"],gc=["stroke","stroke-width","fill"],mc=["stroke","stroke-width"],yc={name:"MarkerType",compatConfig:{MODE:3}},vc=r.defineComponent({...yc,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===r.unref(Jt).ArrowClosed?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,gc)):r.createCommentVNode("",!0),e.type===r.unref(Jt).Arrow?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,mc)):r.createCommentVNode("",!0)],8,pc))}}),wc={name:"MarkerDefinitions",compatConfig:{MODE:3}},bc=r.defineComponent({...wc,setup(e){const t=oe(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),a=r.toRef(t,"connectionLineOptions"),i=r.toRef(t,"defaultMarkerColor"),l=r.computed(()=>{const s=[],u=[],d=c=>{if(c){const f=Ne(c,n.value);s.includes(f)||(typeof c=="object"?u.push({...c,id:f,color:c.color||i.value}):u.push({id:f,color:i.value,type:c}),s.push(f))}};return[a.value.markerEnd,a.value.markerStart].forEach(d),o.value.reduce((c,f)=>([f.markerStart,f.markerEnd].forEach(d),c.sort((h,b)=>h.id.localeCompare(b.id))),u),u});return(s,u)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(l),d=>(r.openBlock(),r.createBlock(vc,{id:d.id,key:d.id,type:d.type,color:d.color,width:d.width,height:d.height,markerUnits:d.markerUnits,"stroke-width":d.strokeWidth,orient:d.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),xc={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},_c={name:"Edges",compatConfig:{MODE:3}},Ec=r.defineComponent({..._c,setup(e){const t=r.inject(dt),n=oe(),o=r.toRef(n,"connectionStartHandle"),a=r.toRef(n,"nodesConnectable"),i=r.toRef(n,"edgesUpdatable"),l=r.toRef(n,"edgesFocusable"),s=r.toRef(n,"elementsSelectable"),u=r.toRef(n,"getSelectedNodes"),d=r.toRef(n,"findNode"),c=r.toRef(n,"edges"),f=r.toRef(n,"getEdges"),h=r.toRef(n,"getNodesInitialized"),b=r.toRef(n,"getEdgeTypes"),m=r.toRef(n,"elevateEdgesOnSelect"),x=r.toRef(n,"dimensions"),k=r.toRef(n,"emits"),E=Ht(()=>{var N;return(N=o.value)==null?void 0:N.nodeId},()=>{var N;return(N=o.value)!=null&&N.nodeId?d.value(o.value.nodeId):!1}),I=Ht(()=>{var N;return(N=o.value)==null?void 0:N.nodeId},()=>{var N,O;return!!(E.value&&(typeof E.value.connectable>"u"?a.value:E.value.connectable)&&(N=o.value)!=null&&N.nodeId&&(O=o.value)!=null&&O.type)}),X=Ht([()=>c.value.map(N=>N.zIndex),()=>m.value?[u.value.length]:[0],()=>m.value?h.value.map(N=>N.computedPosition.z):[]],()=>Sa(f.value,d.value,m.value));function v(N){return typeof N>"u"?s.value:N}function P(N){return typeof N>"u"?i.value:N}function _(N){return typeof N>"u"?l.value:N}function g(N,O){const M=N||"default";let R=O??b.value[M];const q=r.getCurrentInstance();if(typeof R=="string"&&q){const y=Object.keys(q.appContext.components);y&&y.includes(M)&&(R=r.resolveComponent(M,!1))}return R&&typeof R!="string"?R:(t==null?void 0:t[`edge-${M}`])||(k.value.error(new ae(re.EDGE_TYPE_MISSING,R)),!1)}return(N,O)=>r.unref(x).width&&r.unref(x).height?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(X),M=>(r.openBlock(),r.createElementBlock("svg",{key:M.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${M.level}`)},[M.isMaxLevel?(r.openBlock(),r.createBlock(bc,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(M.edges,R=>(r.openBlock(),r.createBlock(r.unref(Ql),{id:R.id,key:R.id,edge:R,type:g(R.type,R.template),name:R.type||"default",selectable:v(R.selectable),updatable:P(R.updatable),focusable:_(R.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"]))),128))])],4))),128)),r.unref(I)&&r.unref(E)?(r.openBlock(),r.createElementBlock("svg",xc,[r.createVNode(as,{"source-node":r.unref(E)},null,8,["source-node"])])):r.createCommentVNode("",!0)],64)):r.createCommentVNode("",!0)}}),kc=r.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),Nc={name:"Transform",compatConfig:{MODE:3}},Sc=r.defineComponent({...Nc,setup(e){const{id:t,viewport:n,emits:o,d3Zoom:a,d3Selection:i,dimensions:l,...s}=oe(),u=r.ref(!jt);return se(()=>a.value&&i.value&&l.value.width>0&&l.value.height>0).toBeTruthy().then(()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:a,d3Selection:i,dimensions:l,...s}),setTimeout(()=>{u.value=!0},0)}),(d,c)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:r.unref(u)?void 0:0})},[r.createVNode(Ec),kc,r.createVNode(hc),r.renderSlot(d.$slots,"default")],4))}}),Cc={name:"Viewport",compatConfig:{MODE:3}},Mc=r.defineComponent({...Cc,setup(e){const t=oe(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),a=r.toRef(t,"maxZoom"),i=r.toRef(t,"defaultViewport"),l=r.toRef(t,"translateExtent"),s=r.toRef(t,"dimensions"),u=r.toRef(t,"zoomActivationKeyCode"),d=r.toRef(t,"selectionKeyCode"),c=r.toRef(t,"panActivationKeyCode"),f=r.toRef(t,"panOnScroll"),h=r.toRef(t,"panOnScrollMode"),b=r.toRef(t,"panOnScrollSpeed"),m=r.toRef(t,"panOnDrag"),x=r.toRef(t,"zoomOnDoubleClick"),k=r.toRef(t,"zoomOnPinch"),E=r.toRef(t,"zoomOnScroll"),I=r.toRef(t,"preventScrolling"),X=r.toRef(t,"noWheelClassName"),v=r.toRef(t,"noPanClassName"),P=r.toRef(t,"setState"),_=r.toRef(t,"emits"),g=r.toRef(t,"connectionStartHandle"),N=r.toRef(t,"userSelectionActive"),O=r.toRef(t,"paneDragging"),M=r.ref();let R=r.ref(!1),q=r.ref(!1),ee=r.ref(!1),y=r.ref(0);const A=We(c.value),S=r.computed(()=>!R.value&&m.value&&A.value),D=r.computed(()=>d.value!==!0&&R.value||d.value===!0&&S.value!==!0);let j=r.ref({x:0,y:0,zoom:0});r.onMounted(()=>{oa(M,z);const G=Zt();Wt(G,"resize",z)}),r.onMounted(()=>{const G=M.value,Q=G.getBoundingClientRect(),B=rc().scaleExtent([o.value,a.value]).translateExtent(l.value),p=ce(G).call(B),w=p.on("wheel.zoom"),V=rt.translate(i.value.x??0,i.value.y??0).scale(Re(i.value.zoom??1,o.value,a.value)),$=[[0,0],[Q.width,Q.height]],L=B.constrain()(V,$,l.value);B.transform(p,L),P.value({d3Zoom:B,d3Selection:p,d3ZoomHandler:w,viewport:{x:L.x,y:L.y,zoom:L.k},viewportRef:G}),We(d,C=>{R.value=C});const F=We(u.value);r.watchEffect(()=>{R.value&&N.value&&!q.value?B.on("zoom",null):!R.value&&!N.value&&B.on("zoom",C=>{P.value({viewport:{x:C.transform.x,y:C.transform.y,zoom:C.transform.k}});const U=H(C.transform);ee.value=K(m.value,y.value??0),_.value.viewportChange(U),_.value.move({event:C,flowTransform:U})})}),B.on("start",C=>{var U;if(!C.sourceEvent)return null;y.value=C.sourceEvent.button,q.value=!0;const J=H(C.transform);((U=C.sourceEvent)==null?void 0:U.type)==="mousedown"&&P.value({paneDragging:!0}),j.value=J,_.value.viewportChangeStart(J),_.value.moveStart({event:C,flowTransform:J})}),B.on("end",C=>{if(!C.sourceEvent)return null;if(q.value=!1,P.value({paneDragging:!1}),K(m.value,y.value??0)&&!ee.value&&_.value.paneContextMenu(C.sourceEvent),ee.value=!1,T(j.value,C.transform)){const U=H(C.transform);j.value=U,_.value.viewportChangeEnd(U),_.value.moveEnd({event:C,flowTransform:U})}}),r.watchEffect(()=>{f.value&&!F.value&&!N.value?p.on("wheel.zoom",C=>{if(Z(C,X.value))return!1;C.preventDefault(),C.stopImmediatePropagation();const U=p.property("__zoom").k||1;if(C.ctrlKey&&k.value){const On=he(C),Qc=-C.deltaY*(C.deltaMode===1?.05:C.deltaMode?1:.002)*10,Jc=U*2**Qc;B.scaleTo(p,Jc,On);return}const J=C.deltaMode===1?20:1,le=h.value===ct.Vertical?0:C.deltaX*J,Ge=h.value===ct.Horizontal?0:C.deltaY*J;B.translateBy(p,-(le/U)*b.value,-(Ge/U)*b.value)},{passive:!1}):typeof w<"u"&&p.on("wheel.zoom",function(C,U){if(!I.value||Z(C,X.value))return null;C.preventDefault(),w.call(this,C,U)},{passive:!1})}),B.filter(C=>{var U,J;const le=F.value||E.value,Ge=k.value&&C.ctrlKey;if(C.button===1&&C.type==="mousedown"&&((U=C.target)!=null&&U.closest(".vue-flow__node")||(J=C.target)!=null&&J.closest(".vue-flow__edge")))return!0;if(!m.value&&!le&&!f.value&&!x.value&&!k.value||N.value||!x.value&&C.type==="dblclick"||Z(C,X.value)&&C.type==="wheel"||Z(C,v.value)&&C.type!=="wheel"||!k.value&&C.ctrlKey&&C.type==="wheel"||!le&&!f.value&&!Ge&&C.type==="wheel"||!m.value&&(C.type==="mousedown"||C.type==="touchstart")||Array.isArray(m.value)&&!m.value.includes(C.button)&&(C.type==="mousedown"||C.type==="touchstart"))return!1;const On=Array.isArray(m.value)&&m.value.includes(C.button)||!C.button||C.button<=1;return(!C.ctrlKey||C.type==="wheel")&&On})});function K(G,Q){return Q===2&&Array.isArray(G)&&G.includes(2)}function T(G,Q){return G.x!==Q.x&&!isNaN(Q.x)||G.y!==Q.y&&!isNaN(Q.y)||G.zoom!==Q.k&&!isNaN(Q.k)}function H(G){return{x:G.x,y:G.y,zoom:G.k}}function z(){if(!M.value)return;const{width:G,height:Q}=lt(M.value);(G===0||Q===0)&&_.value.error(new ae(re.MISSING_VIEWPORT_DIMENSIONS)),s.value.width=G||500,s.value.height=Q||500}function Z(G,Q){return G.target.closest(`.${Q}`)}return(G,Q)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(),r.createElementBlock("div",{ref_key:"viewportEl",ref:M,key:`viewport-${r.unref(n)}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(cc,{"is-selecting":r.unref(D),class:r.normalizeClass({connecting:!!r.unref(g),dragging:r.unref(O),draggable:!!r.unref(m)})},{default:r.withCtx(()=>[r.createVNode(Sc,null,{default:r.withCtx(()=>[r.renderSlot(G.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),r.renderSlot(G.$slots,"default")],64))}}),Bc=["id"],Pc=["id"],Ic=["id"],Oc={name:"A11yDescriptions",compatConfig:{MODE:3}},Rc=r.defineComponent({...Oc,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=oe(),a={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(i,l)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("div",{id:`${r.unref(Lo)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+r.toDisplayString(r.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Bc),r.createElementVNode("div",{id:`${r.unref(Fo)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Pc),r.unref(n)?r.createCommentVNode("",!0):(r.openBlock(),r.createElementBlock("div",{key:0,id:`${r.unref(Pl)}-${r.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:a},r.toDisplayString(r.unref(o)),9,Ic))],64))}}),Tc={name:"VueFlow",compatConfig:{MODE:3}},$c=r.defineComponent({...Tc,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,panActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,a=He(o,"modelValue",n),i=He(o,"nodes",n),l=He(o,"edges",n),{vueFlowRef:s,hooks:u,getNodeTypes:d,getEdgeTypes:c,...f}=oe(o),h=sc({modelValue:a,nodes:i,edges:l},o,{vueFlowRef:s,hooks:u,getNodeTypes:d,getEdgeTypes:c,...f});ca(n,u);const b=r.ref();return r.provide(dt,r.useSlots()),r.onUnmounted(()=>{h()}),r.onMounted(()=>{s.value=b.value}),t({vueFlowRef:s,hooks:u,getNodeTypes:d,getEdgeTypes:c,...f}),(m,x)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:b,class:"vue-flow"},[r.createVNode(Mc,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(d)),k=>r.renderSlot(m.$slots,`node-${k}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(c)),k=>r.renderSlot(m.$slots,`edge-${k}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(m.$slots,"connection-line")]),"zoom-pane":r.withCtx(()=>[r.renderSlot(m.$slots,"zoom-pane")]),default:r.withCtx(()=>[r.renderSlot(m.$slots,"default")]),_:3}),r.createVNode(Rc)],512))}}),td="",nd="",Dc={key:0,class:"label-input-wrapper"},Ac=["onKeypress"],zc=r.defineComponent({__name:"EditableNode",props:{id:null,label:null,sourcePosition:null,targetPosition:null,data:null},emits:["change"],setup(e,{emit:t}){const n=e,o={top:W.Top,right:W.Right,bottom:W.Bottom,left:W.Left},a=r.computed(()=>o[n.sourcePosition]),i=r.computed(()=>o[n.targetPosition]),l=r.ref(),s=r.ref(""),u=r.ref(!1);let d=0;const c=()=>{let b=Date.now();b-d<500&&!u.value&&f(),d=b},f=async()=>{s.value=n.label,u.value=!0,await r.nextTick(),l.value.focus()},h=()=>{u.value=!1,t("change",s.value)};return(b,m)=>(r.openBlock(),r.createElementBlock("div",{onClick:m[2]||(m[2]=x=>c())},[r.createElementVNode("div",null,r.toDisplayString(n.label),1),u.value?(r.openBlock(),r.createElementBlock("div",Dc,[r.withDirectives(r.createElementVNode("input",{ref_key:"labelInput",ref:l,class:"label-input","onUpdate:modelValue":m[0]||(m[0]=x=>s.value=x),onBlur:m[1]||(m[1]=x=>u.value=!1),onKeypress:r.withKeys(h,["enter"])},null,40,Ac),[[r.vModelText,s.value]])])):r.createCommentVNode("",!0),n.data.hasInput?(r.openBlock(),r.createBlock(r.unref(Ae),{key:1,id:"a",type:"target",position:r.unref(i)},null,8,["position"])):r.createCommentVNode("",!0),n.data.hasOutput?(r.openBlock(),r.createBlock(r.unref(Ae),{key:2,id:"b",type:"source",position:r.unref(a)},null,8,["position"])):r.createCommentVNode("",!0)]))}}),od="",Vc=["id","d","marker-end"],Lc={class:"vue-flow__edge-label"},Fc={key:0,class:"label-input-wrapper"},Xc=["onKeypress"],Yc={inheritAttrs:!1},Gc=r.defineComponent({...Yc,__name:"EditableEdge",props:{id:null,sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null,data:null,markerEnd:null,style:null,label:null},emits:["change"],setup(e,{emit:t}){const n=e;oe();const o=r.ref(),a=r.ref(""),i=r.ref(!1);let l=0;const s=()=>{let f=Date.now();f-l<500&&!i.value&&u(),l=f},u=async()=>{a.value=n.label,i.value=!0,await r.nextTick(),o.value.focus()},d=()=>{i.value=!1,t("change",a.value)},c=r.computed(()=>Nt(n));return(f,h)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("path",{id:e.id,style:r.normalizeStyle(e.style),class:"vue-flow__edge-path",d:r.unref(c)[0],"marker-end":e.markerEnd},null,12,Vc),r.createVNode(r.unref(ts),null,{default:r.withCtx(()=>[r.createElementVNode("div",{style:r.normalizeStyle({pointerEvents:"all",position:"absolute",transform:`translate(-50%, -50%) translate(${r.unref(c)[1]}px,${r.unref(c)[2]}px)`}),class:"nodrag nopan editable-edge-label",onClick:h[2]||(h[2]=b=>s())},[r.createElementVNode("div",Lc,r.toDisplayString(n.label),1),i.value?(r.openBlock(),r.createElementBlock("div",Fc,[r.withDirectives(r.createElementVNode("input",{ref_key:"labelInput",ref:o,class:"label-input","onUpdate:modelValue":h[0]||(h[0]=b=>a.value=b),onBlur:h[1]||(h[1]=b=>i.value=!1),onKeypress:r.withKeys(d,["enter"])},null,40,Xc),[[r.vModelText,a.value]])])):r.createCommentVNode("",!0)],4)]),_:1})],64))}}),rd="",jc={class:"chart-controls"},Hc={class:"chart-controls-left"},Uc=r.createElementVNode("b",null,"Selected Node:",-1),Kc={class:"chart-controls-right"},Wc={key:0},Zc={key:1},In=r.defineComponent({__name:"NodeEditor",props:{modelValue:null,nodeContainerClass:null},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=r.ref(""),a=r.ref({}),i=r.ref(!1);r.ref({x:0,y:0});const l=r.ref(""),s=r.ref([]),u=r.computed(()=>{for(let _=0;_<s.value.length;_++)if(s.value[_].id==l.value)return _;return-1}),d=r.computed({get:()=>{let _=n.modelValue;n.nodeContainerClass?o.value=n.nodeContainerClass:o.value="defaultContainerClass";for(let g=0;g<_.length;g++)_[g].data={},_[g].type=="input"?(_[g].data.hasInput=!1,_[g].data.hasOutput=!0):_[g].type=="output"?(_[g].data.hasInput=!0,_[g].data.hasOutput=!1):(_[g].data.hasInput=!0,_[g].data.hasOutput=!0),_[g].class="vue-flow__node-default",_[g].type="editable";for(let g=0;g<_.length;g++){let N=_[g].id;_[g],_[g].events={click:()=>{l.value=N}}}return _},set:_=>{t("update:modelValue",JSON.parse(JSON.stringify(_)))}}),{getNodes:c,onPaneReady:f}=oe({});f(_=>{a.value=_}),s.value=d.value,r.onMounted(()=>{document.removeEventListener("keypress",k),document.addEventListener("keypress",k)}),r.onBeforeUnmount(()=>{document.removeEventListener("keypress",k)});const h=_=>({top:"right",right:"bottom",bottom:"left",left:"top"})[_],b=()=>{u.value>-1&&(s.value[u.value].sourcePosition=h(s.value[u.value].sourcePosition))},m=()=>{u.value>-1&&(s.value[u.value].targetPosition=h(s.value[u.value].targetPosition))},x=_=>{window.scrollBy(0,_.deltaY)},k=_=>{i.value&&_.ctrlKey==!0&&((_.key=="+"||_.key=="=")&&a.value.zoomIn(),_.key=="-"&&a.value.zoomOut())},E=()=>{a.value.fitView()},I=()=>{let _={x:Math.random()*200,y:Math.random()*200},g=!1;if(u.value>-1){const M=s.value[u.value];M.data.hasOutput&&(_={x:M.position.x+200,y:M.position.y+50},g=!0)}let N=s.value.length,O=`node-${N}`;if(s.value.push({id:O,label:"Node "+N,sourcePosition:"right",targetPosition:"left",class:"vue-flow__node-default",type:"editable",data:{hasInput:!0,hasOutput:!0},events:{click:()=>{l.value=O}},position:_}),g){let M=`edge-${N+1}`;s.value.push({id:M,source:l.value,target:O,type:"editable",label:`EDGE ${N+1}`,animated:!0,events:{click:()=>{l.value=M}}})}},X=_=>{console.log("edge connect",_)},v=_=>{console.log("edge double click",_)},P=(_,g)=>{for(let N=0;N<s.value.length;N++)if(s.value[N].id==g){s.value[N].label=_;break}};return(_,g)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["node-editor-wrapper",o.value]),onMouseover:g[8]||(g[8]=N=>i.value=!0),onMouseleave:g[9]||(g[9]=N=>i.value=!1)},[r.createElementVNode("div",jc,[r.createElementVNode("div",Hc,[r.createElementVNode("div",null,[Uc,r.createTextVNode(" "+r.toDisplayString(l.value?l.value:"none"),1)])]),r.createElementVNode("div",Kc,[r.createElementVNode("div",null,[r.createElementVNode("button",{class:"button-default",onClick:g[0]||(g[0]=N=>I())},"Add Node")]),r.createElementVNode("div",null,[r.createElementVNode("button",{class:"button-default",onClick:g[1]||(g[1]=N=>E())},"Center")]),r.unref(u)>-1?(r.openBlock(),r.createElementBlock("div",Wc,[r.createElementVNode("button",{class:"button-default",onClick:g[2]||(g[2]=N=>m())},"Shift Input Position")])):r.createCommentVNode("",!0),r.unref(u)>-1?(r.openBlock(),r.createElementBlock("div",Zc,[r.createElementVNode("button",{class:"button-default",onClick:g[3]||(g[3]=N=>b())},"Shift Output Position")])):r.createCommentVNode("",!0)])]),s.value&&s.value.length?(r.openBlock(),r.createBlock(r.unref($c),{key:0,onWheel:g[4]||(g[4]=r.withModifiers(N=>x(N),["prevent"])),class:"nowheel","prevent-scrolling":!0,"zoom-on-scroll":!1,"fit-view-on-init":!0,modelValue:s.value,"onUpdate:modelValue":g[5]||(g[5]=N=>s.value=N),onConnect:g[6]||(g[6]=N=>X(N)),onEdgeDoubleClick:g[7]||(g[7]=N=>v(N))},{"node-editable":r.withCtx(N=>[r.createVNode(zc,r.mergeProps(N,{onChange:O=>P(O,N.id)}),null,16,["onChange"])]),"edge-editable":r.withCtx(N=>[r.createVNode(Gc,r.mergeProps(N,{onChange:O=>P(O,N.id)}),null,16,["onChange"])]),_:1},8,["modelValue"])):r.createCommentVNode("",!0)],34))}}),ad="",Rr=r.defineComponent({__name:"StateEditor",props:["layout","nodeContainerClass","modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=r.computed({get:()=>{let i=n.modelValue,l={},s={},u=0,d=[];for(let c in i){d.length;let f={id:c,label:c,position:n.layout[c]&&n.layout[c].position?n.layout[c].position:{x:200*u,y:100},targetPosition:n.layout[c]&&n.layout[c].targetPosition?n.layout[c].targetPosition:"left",sourcePosition:n.layout[c]&&n.layout[c].sourcePosition?n.layout[c].sourcePosition:"right"};i[c].type&&i[c].type=="final"&&(f.type="output",f.class="default-output-node"),l[c]=f;let h=i[c].on;for(let b in i[c].on){let m=h[b];typeof m=="object"&&m.constructor===Object&&(m=m.target),d.push({id:`${c}-${h[b]}-${b}`,target:m,source:c,label:b,animated:!0}),s[m]=!0}u++}for(let c in l)s[c]||(l[c].type="input",l[c].class="default-input-node"),d.push(l[c]);return d},set:i=>{a(i)}}),a=i=>{let l={},s={},u={};for(let d=0;d<i.length;d++){let c=i[d];c.type=="input"?l[c.label]={on:{}}:c.type=="output"?l[c.label]={type:"final"}:c.source&&c.target?(s[c.source]=s[c.source]||{},s[c.source][c.label]={target:c.target}):l[c.label]={on:{}},u[c.id]=c.label}for(let d in s){let c=u[d];for(let f in s[d])l[c].on[f]=s[d][f]}t("update:modelValue",l)};return(i,l)=>(r.openBlock(),r.createElementBlock("div",null,[r.createVNode(In,{modelValue:r.unref(o),"onUpdate:modelValue":l[0]||(l[0]=s=>r.isRef(o)?o.value=s:null),"node-container-class":e.nodeContainerClass},null,8,["modelValue","node-container-class"])]))}});function qc(e){e.component("NodeEditor",In),e.component("StateEditor",Rr)}me.NodeEditor=In,me.StateEditor=Rr,me.install=qc,Object.defineProperty(me,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=node-editor.umd.cjs.map
