{"version":3,"file":"aform.umd.cjs","sources":["../src/components/form/ACheckbox.vue","../../utilities/dist/utilities.js","../src/components/form/ADate.vue","../src/components/form/ADropdown.vue","../src/components/form/ADropdown.vue","../src/components/AForm.vue","../src/components/form/AFieldset.vue","../src/components/form/ANumericInput.vue","../src/directives/mask.ts","../src/components/form/ATextInput.vue","../src/components/form/ATextInput.vue","../src/index.ts"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<label id=\"checkbox-container\">\r\n\t\t\t<input v-model=\"checkbox\" type=\"checkbox\" :id=\"uuid\" class=\"checkbox\" :readonly=\"readOnly\" :required=\"required\" />\r\n\t\t\t<span id=\"custom-checkbox\">{{ checkbox }}</span>\r\n\t\t</label>\r\n\t\t<label :for=\"uuid\" id=\"checkbox-label\">{{ label }}</label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, InputHTMLAttributes } from 'vue'\r\n\r\nconst props = withDefaults(\r\n\tdefineProps<{\r\n\t\tlabel?: string\r\n\t\tvalue?: InputHTMLAttributes['checked']\r\n\t\trequired?: boolean\r\n\t\treadOnly?: boolean\r\n\t\tuuid?: string\r\n\t\tvalidation?: Record<string, any>\r\n\t}>(),\r\n\t{\r\n\t\tvalidation: () => ({ errorMessage: '&nbsp;' }),\r\n\t}\r\n)\r\n\r\nconst emit = defineEmits<{\r\n\t(e: 'update:value', value: InputHTMLAttributes['checked']): void\r\n}>()\r\n\r\nconst checkbox = computed({\r\n\tget() {\r\n\t\treturn props.value\r\n\t},\r\n\tset(value) {\r\n\t\temit('update:value', value)\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tdisplay: inline-block;\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\n.checkbox {\r\n\tvisibility: hidden;\r\n}\r\n\r\n.checkbox + #custom-checkbox:after {\r\n\tcontent: '⬡';\r\n\tpadding: 1ch 0 0.5ch 0;\r\n\tfont-size: 120%;\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\tleft: -18px;\r\n}\r\n\r\n.checkbox:checked + #custom-checkbox:after {\r\n\tcontent: '⬣';\r\n\tpadding: 1ch 0 0.5ch 0;\r\n\tfont-size: 120%;\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\tleft: -18px;\r\n}\r\n\r\n#custom-checkbox {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n#checkbox-container {\r\n\tdisplay: inline-block;\r\n\tmin-width: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\theight: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\n#checkbox-container:hover {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\n#checkbox-container:hover + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n\r\n#checkbox-label {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n</style>\r\n","import { unref as Q, getCurrentScope as U, onScopeDispose as K, ref as B, watch as D, onMounted as W, onBeforeUnmount as V } from \"vue\";\nvar v;\nconst M = typeof window < \"u\", F = (e) => typeof e == \"string\", j = () => {\n};\nM && ((v = window == null ? void 0 : window.navigator) != null && v.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);\nfunction H(e) {\n  return typeof e == \"function\" ? e() : Q(e);\n}\nfunction q(e) {\n  return e;\n}\nfunction G(e) {\n  return U() ? (K(e), !0) : !1;\n}\nfunction y(e) {\n  var t;\n  const r = H(e);\n  return (t = r == null ? void 0 : r.$el) != null ? t : r;\n}\nconst N = M ? window : void 0;\nfunction z(...e) {\n  let t, r, n, o;\n  if (F(e[0]) || Array.isArray(e[0]) ? ([r, n, o] = e, t = N) : [t, r, n, o] = e, !t)\n    return j;\n  Array.isArray(r) || (r = [r]), Array.isArray(n) || (n = [n]);\n  const l = [], s = () => {\n    l.forEach((c) => c()), l.length = 0;\n  }, a = (c, g, p, i) => (c.addEventListener(g, p, i), () => c.removeEventListener(g, p, i)), C = D(() => [y(t), H(o)], ([c, g]) => {\n    s(), c && l.push(...r.flatMap((p) => n.map((i) => a(c, p, i, g))));\n  }, { immediate: !0, flush: \"post\" }), d = () => {\n    C(), s();\n  };\n  return G(d), d;\n}\nconst O = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {}, T = \"__vueuse_ssr_handlers__\";\nO[T] = O[T] || {};\nfunction J(e, { window: t = N, scrollTarget: r } = {}) {\n  const n = B(!1), o = () => {\n    if (!t)\n      return;\n    const l = t.document, s = y(e);\n    if (!s)\n      n.value = !1;\n    else {\n      const a = s.getBoundingClientRect();\n      n.value = a.top <= (t.innerHeight || l.documentElement.clientHeight) && a.left <= (t.innerWidth || l.documentElement.clientWidth) && a.bottom >= 0 && a.right >= 0;\n    }\n  };\n  return D(() => y(e), () => o(), { immediate: !0, flush: \"post\" }), t && z(r || t, \"scroll\", o, {\n    capture: !1,\n    passive: !0\n  }), n;\n}\nvar P;\n(function(e) {\n  e.UP = \"UP\", e.RIGHT = \"RIGHT\", e.DOWN = \"DOWN\", e.LEFT = \"LEFT\", e.NONE = \"NONE\";\n})(P || (P = {}));\nvar X = Object.defineProperty, I = Object.getOwnPropertySymbols, Y = Object.prototype.hasOwnProperty, Z = Object.prototype.propertyIsEnumerable, _ = (e, t, r) => t in e ? X(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, ee = (e, t) => {\n  for (var r in t || (t = {}))\n    Y.call(t, r) && _(e, r, t[r]);\n  if (I)\n    for (var r of I(t))\n      Z.call(t, r) && _(e, r, t[r]);\n  return e;\n};\nconst te = {\n  easeInSine: [0.12, 0, 0.39, 0],\n  easeOutSine: [0.61, 1, 0.88, 1],\n  easeInOutSine: [0.37, 0, 0.63, 1],\n  easeInQuad: [0.11, 0, 0.5, 0],\n  easeOutQuad: [0.5, 1, 0.89, 1],\n  easeInOutQuad: [0.45, 0, 0.55, 1],\n  easeInCubic: [0.32, 0, 0.67, 0],\n  easeOutCubic: [0.33, 1, 0.68, 1],\n  easeInOutCubic: [0.65, 0, 0.35, 1],\n  easeInQuart: [0.5, 0, 0.75, 0],\n  easeOutQuart: [0.25, 1, 0.5, 1],\n  easeInOutQuart: [0.76, 0, 0.24, 1],\n  easeInQuint: [0.64, 0, 0.78, 0],\n  easeOutQuint: [0.22, 1, 0.36, 1],\n  easeInOutQuint: [0.83, 0, 0.17, 1],\n  easeInExpo: [0.7, 0, 0.84, 0],\n  easeOutExpo: [0.16, 1, 0.3, 1],\n  easeInOutExpo: [0.87, 0, 0.13, 1],\n  easeInCirc: [0.55, 0, 1, 0.45],\n  easeOutCirc: [0, 0.55, 0.45, 1],\n  easeInOutCirc: [0.85, 0, 0.15, 1],\n  easeInBack: [0.36, 0, 0.66, -0.56],\n  easeOutBack: [0.34, 1.56, 0.64, 1],\n  easeInOutBack: [0.68, -0.6, 0.32, 1.6]\n};\nee({\n  linear: q\n}, te);\nconst f = (e) => {\n  let t = J(e).value;\n  return t = t && e.offsetHeight > 0, t;\n}, u = (e) => e.tabIndex >= 0, A = (e) => {\n  const t = e.target;\n  return E(t);\n}, E = (e) => {\n  var r;\n  let t;\n  if (e instanceof HTMLTableCellElement) {\n    const n = (r = e.parentElement) == null ? void 0 : r.previousElementSibling;\n    if (n) {\n      const l = Array.from(n.children)[e.cellIndex];\n      l && (t = l);\n    }\n  } else if (e instanceof HTMLTableRowElement) {\n    const n = e.previousElementSibling;\n    n && (t = n);\n  }\n  return t && (!u(t) || !f(t)) ? E(t) : t;\n}, ne = (e) => {\n  var n;\n  const t = e.target;\n  let r;\n  if (t instanceof HTMLTableCellElement) {\n    const o = (n = t.parentElement) == null ? void 0 : n.parentElement;\n    if (o) {\n      const s = o.firstElementChild.children[t.cellIndex];\n      s && (r = s);\n    }\n  } else if (t instanceof HTMLTableRowElement) {\n    const o = t.parentElement;\n    if (o) {\n      const l = o.firstElementChild;\n      l && (r = l);\n    }\n  }\n  return r && (!u(r) || !f(r)) ? w(r) : r;\n}, x = (e) => {\n  const t = e.target;\n  return w(t);\n}, w = (e) => {\n  var r;\n  let t;\n  if (e instanceof HTMLTableCellElement) {\n    const n = (r = e.parentElement) == null ? void 0 : r.nextElementSibling;\n    if (n) {\n      const l = Array.from(n.children)[e.cellIndex];\n      l && (t = l);\n    }\n  } else if (e instanceof HTMLTableRowElement) {\n    const n = e.nextElementSibling;\n    n && (t = n);\n  }\n  return t && (!u(t) || !f(t)) ? w(t) : t;\n}, re = (e) => {\n  var n;\n  const t = e.target;\n  let r;\n  if (t instanceof HTMLTableCellElement) {\n    const o = (n = t.parentElement) == null ? void 0 : n.parentElement;\n    if (o) {\n      const s = o.lastElementChild.children[t.cellIndex];\n      s && (r = s);\n    }\n  } else if (t instanceof HTMLTableRowElement) {\n    const o = t.parentElement;\n    if (o) {\n      const l = o.lastElementChild;\n      l && (r = l);\n    }\n  }\n  return r && (!u(r) || !f(r)) ? E(r) : r;\n}, k = (e) => {\n  const t = e.target;\n  return h(t);\n}, h = (e) => {\n  var r;\n  let t;\n  if (e.previousElementSibling)\n    t = e.previousElementSibling;\n  else {\n    const n = (r = e.parentElement) == null ? void 0 : r.previousElementSibling;\n    t = n == null ? void 0 : n.lastElementChild;\n  }\n  return t && (!u(t) || !f(t)) ? h(t) : t;\n}, S = (e) => {\n  const t = e.target;\n  return b(t);\n}, b = (e) => {\n  var r;\n  let t;\n  if (e.nextElementSibling)\n    t = e.nextElementSibling;\n  else {\n    const n = (r = e.parentElement) == null ? void 0 : r.nextElementSibling;\n    t = n == null ? void 0 : n.firstElementChild;\n  }\n  return t && (!u(t) || !f(t)) ? b(t) : t;\n}, L = (e) => {\n  const n = e.target.parentElement.firstElementChild;\n  return n && (!u(n) || !f(n)) ? b(n) : n;\n}, R = (e) => {\n  const n = e.target.parentElement.lastElementChild;\n  return n && (!u(n) || !f(n)) ? h(n) : n;\n}, m = [\"alt\", \"control\", \"shift\", \"meta\"], oe = {\n  ArrowUp: \"up\",\n  ArrowDown: \"down\",\n  ArrowLeft: \"left\",\n  ArrowRight: \"right\"\n}, le = {\n  \"keydown.up\": (e) => {\n    const t = A(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.down\": (e) => {\n    const t = x(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.left\": (e) => {\n    const t = k(e);\n    e.preventDefault(), e.stopPropagation(), t && t.focus();\n  },\n  \"keydown.right\": (e) => {\n    const t = S(e);\n    e.preventDefault(), e.stopPropagation(), t && t.focus();\n  },\n  \"keydown.control.up\": (e) => {\n    const t = ne(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.down\": (e) => {\n    const t = re(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.left\": (e) => {\n    const t = L(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.right\": (e) => {\n    const t = R(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.end\": (e) => {\n    const t = R(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.enter\": (e) => {\n    if (e.target instanceof HTMLTableCellElement) {\n      e.preventDefault(), e.stopPropagation();\n      const r = x(e);\n      r && r.focus();\n    }\n  },\n  \"keydown.shift.enter\": (e) => {\n    if (e.target instanceof HTMLTableCellElement) {\n      e.preventDefault(), e.stopPropagation();\n      const r = A(e);\n      r && r.focus();\n    }\n  },\n  \"keydown.home\": (e) => {\n    const t = L(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.tab\": (e) => {\n    const t = S(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.shift.tab\": (e) => {\n    const t = k(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  }\n};\nfunction ie(e) {\n  const t = (n) => {\n    let o = null;\n    n.parent && (typeof n.parent == \"string\" ? o = document.querySelector(n.parent) : n.parent instanceof Element ? o = n.parent : o = n.parent.value);\n    let l = [];\n    if (n.selectors)\n      if (typeof n.selectors == \"string\")\n        l = o ? Array.from(o.querySelectorAll(n.selectors)) : Array.from(document.querySelectorAll(n.selectors));\n      else if (n.selectors instanceof Element)\n        l.push(n.selectors);\n      else if (Array.isArray(n.selectors.value))\n        for (const s of n.selectors.value)\n          s instanceof Element ? l.push(s) : l.push(s.$el);\n      else\n        l.push(n.selectors.value);\n    else\n      l = Array.from(o.children).filter((a) => u(a) && f(a));\n    return l;\n  }, r = (n) => (o) => {\n    const l = oe[o.key] || o.key.toLowerCase();\n    if (m.includes(l))\n      return;\n    const s = n.handlers || le;\n    for (const a of Object.keys(s)) {\n      const [C, ...d] = a.split(\".\");\n      if (C === \"keydown\" && d.includes(l)) {\n        const c = s[a], g = d.filter((i) => m.includes(i)), p = m.some((i) => {\n          const $ = i.charAt(0).toUpperCase() + i.slice(1);\n          return o.getModifierState($);\n        });\n        if (g.length > 0) {\n          if (p) {\n            for (const i of m)\n              if (d.includes(i)) {\n                const $ = i.charAt(0).toUpperCase() + i.slice(1);\n                o.getModifierState($) && c(o);\n              }\n          }\n        } else\n          p || c(o);\n      }\n    }\n  };\n  W(() => {\n    for (const n of e) {\n      const o = t(n);\n      for (const l of o)\n        l.addEventListener(\"keydown\", r(n));\n    }\n  }), V(() => {\n    for (const n of e) {\n      const o = t(n);\n      for (const l of o)\n        l.removeEventListener(\"keydown\", r(n));\n    }\n  });\n}\nfunction ae(e) {\n}\nexport {\n  le as defaultKeypressHandlers,\n  ae as install,\n  ie as useKeyboardNav\n};\n//# sourceMappingURL=utilities.js.map\n","<template>\r\n\t<div\r\n\t\tv-if=\"!readonly\"\r\n\t\t:event=\"event\"\r\n\t\t:colIndex=\"colIndex\"\r\n\t\t:rowIndex=\"rowIndex\"\r\n\t\t:tableid=\"tableid\"\r\n\t\tclass=\"adate\"\r\n\t\ttabindex=\"0\"\r\n\t\tref=\"adatepicker\">\r\n\t\t<table>\r\n\t\t\t<tr>\r\n\t\t\t\t<td @click=\"previousMonth\" :tabindex=\"-1\">&lt;</td>\r\n\t\t\t\t<th colspan=\"5\">{{ monthAndYear }}</th>\r\n\t\t\t\t<td @click=\"nextMonth\" :tabindex=\"-1\">&gt;</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr v-for=\"rowNo in numberOfRows\" :key=\"rowNo\">\r\n\t\t\t\t<!-- TODO: (style) remove inline styling and replace with theme package -->\r\n\t\t\t\t<td\r\n\t\t\t\t\tv-for=\"colNo in numberOfColumns\"\r\n\t\t\t\t\t:key=\"(rowNo - 1) * numberOfColumns + colNo\"\r\n\t\t\t\t\t:contenteditable=\"false\"\r\n\t\t\t\t\t:spellcheck=\"false\"\r\n\t\t\t\t\t:tabindex=\"0\"\r\n\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\tborder: isSelectedDate(currentDates[(rowNo - 1) * numberOfColumns + colNo])\r\n\t\t\t\t\t\t\t? '2px solid var(--focus-cell-outline)'\r\n\t\t\t\t\t\t\t: 'none',\r\n\t\t\t\t\t\tborderBottomColor: isTodaysDate(currentDates[(rowNo - 1) * numberOfColumns + colNo])\r\n\t\t\t\t\t\t\t? 'var(--focus-cell-outline)'\r\n\t\t\t\t\t\t\t: 'none',\r\n\t\t\t\t\t}\"\r\n\t\t\t\t\t@click.prevent.stop=\"selectDate($event, (rowNo - 1) * numberOfColumns + colNo)\"\r\n\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\ttodaysdate: isTodaysDate(currentDates[(rowNo - 1) * numberOfColumns + colNo]),\r\n\t\t\t\t\t\tselecteddate: isSelectedDate(currentDates[(rowNo - 1) * numberOfColumns + colNo]),\r\n\t\t\t\t\t}\">\r\n\t\t\t\t\t{{ new Date(currentDates[(rowNo - 1) * numberOfColumns + colNo]).getDate() }}\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject, nextTick, onMounted, ref, watch } from 'vue'\r\n\r\nimport { TableDataStore } from '@agritheory/atable'\r\nimport { defaultKeypressHandlers, useKeyboardNav } from '@agritheory/utilities'\r\n\r\nconst props = defineProps<{\r\n\tcolIndex?: number\r\n\trowIndex?: number\r\n\ttableid?: string\r\n\tevent?: Event\r\n\tindent?: number\r\n\treadonly?: boolean\r\n}>()\r\n\r\nconst tableData = inject<TableDataStore>(props.tableid)\r\n\r\nconst numberOfRows = 6\r\nconst numberOfColumns = 7\r\nconst todaysDate = new Date()\r\n\r\nconst selectedDate = ref<Date>()\r\nconst currentMonth = ref<number>()\r\nconst currentYear = ref<number>()\r\nconst currentDates = ref<number[]>([])\r\n// const width = ref('')\r\n\r\nonMounted(async () => {\r\n\tlet cellDate = tableData.cellData<string | number | Date>(props.colIndex, props.rowIndex)\r\n\tif (cellDate) {\r\n\t\tif (!(cellDate instanceof Date)) {\r\n\t\t\tcellDate = new Date(cellDate)\r\n\t\t}\r\n\r\n\t\tselectedDate.value = cellDate\r\n\t\tcurrentMonth.value = selectedDate.value.getMonth()\r\n\t\tcurrentYear.value = selectedDate.value.getFullYear()\r\n\t} else {\r\n\t\tcurrentMonth.value = todaysDate.getMonth()\r\n\t\tcurrentYear.value = todaysDate.getFullYear()\r\n\t}\r\n\r\n\trenderMonth()\r\n\tawait nextTick()\r\n\r\n\tconst $selectedDate = document.getElementsByClassName('selecteddate')\r\n\tif ($selectedDate.length > 0) {\r\n\t\t;($selectedDate[0] as HTMLElement).focus()\r\n\t} else {\r\n\t\tconst $todaysDate = document.getElementsByClassName('todaysdate')\r\n\t\tif ($todaysDate.length > 0) {\r\n\t\t\t;($todaysDate[0] as HTMLElement).focus()\r\n\t\t}\r\n\t}\r\n})\r\n\r\nwatch([currentMonth, currentYear], () => {\r\n\trenderMonth()\r\n})\r\n\r\nconst renderMonth = () => {\r\n\tcurrentDates.value = []\r\n\tconst firstOfMonth = new Date(currentYear.value, currentMonth.value, 1)\r\n\tconst monthStartWeekday = firstOfMonth.getDay()\r\n\tconst calendarStartDay = firstOfMonth.setDate(firstOfMonth.getDate() - monthStartWeekday)\r\n\tfor (let dayIndex of Array(43).keys()) {\r\n\t\tcurrentDates.value.push(calendarStartDay + dayIndex * 86400000)\r\n\t}\r\n}\r\n\r\nconst previousYear = () => {\r\n\tcurrentYear.value -= 1\r\n}\r\n\r\nconst nextYear = () => {\r\n\tcurrentYear.value += 1\r\n}\r\n\r\nconst previousMonth = () => {\r\n\tif (currentMonth.value == 0) {\r\n\t\tcurrentMonth.value = 11\r\n\t\tpreviousYear()\r\n\t} else {\r\n\t\tcurrentMonth.value -= 1\r\n\t}\r\n}\r\n\r\nconst nextMonth = () => {\r\n\tif (currentMonth.value == 11) {\r\n\t\tcurrentMonth.value = 0\r\n\t\tnextYear()\r\n\t} else {\r\n\t\tcurrentMonth.value += 1\r\n\t}\r\n}\r\n\r\nconst isTodaysDate = (day: string | number | Date) => {\r\n\tif (currentMonth.value !== todaysDate.getMonth()) {\r\n\t\treturn\r\n\t}\r\n\treturn todaysDate.toDateString() === new Date(day).toDateString()\r\n}\r\n\r\nconst isSelectedDate = (day: string | number | Date) => {\r\n\treturn new Date(day).toDateString() === new Date(selectedDate.value).toDateString()\r\n}\r\n\r\nconst selectDate = (event: Event, currentIndex: number) => {\r\n\tselectedDate.value = new Date(currentDates.value[currentIndex])\r\n\tupdateData()\r\n\t// TODO: (typing) figure out a way to close datepicker\r\n\t// context.refs.adatepicker.destroy()\r\n}\r\n\r\nconst updateData = () => {\r\n\t// TODO: check proper date format to feed back (assuming number for now)\r\n\ttableData.setCellData(props.rowIndex, props.colIndex, selectedDate.value.getTime())\r\n}\r\n\r\n// const dayWidth = computed(() => {\r\n// \tconst widthValue = Number(width.value.replace('px', ''))\r\n// \treturn `${widthValue / (numberOfColumns - 1)}px`\r\n// })\r\n\r\nconst monthAndYear = computed(() => {\r\n\treturn new Date(currentYear.value, currentMonth.value, 1).toLocaleDateString(undefined, {\r\n\t\tyear: 'numeric',\r\n\t\tmonth: 'long',\r\n\t})\r\n})\r\n\r\n// setup keyboard navigation\r\nuseKeyboardNav([\r\n\t{\r\n\t\tparent: 'table.adate',\r\n\t\tselectors: 'td',\r\n\t\thandlers: {\r\n\t\t\t...defaultKeypressHandlers,\r\n\t\t\t...{\r\n\t\t\t\t'keydown.pageup': previousMonth,\r\n\t\t\t\t'keydown.shift.pageup': previousYear,\r\n\t\t\t\t'keydown.pagedown': nextMonth,\r\n\t\t\t\t'keydown.shift.pagedown': nextYear,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n])\r\n</script>\r\n\r\n<style scoped>\r\n@import '@/theme/aform.css';\r\n\r\n.adate {\r\n\tborder: 2px solid var(--focus-cell-outline);\r\n\tposition: absolute;\r\n\tz-index: 100;\r\n\tfont-size: var(--table-font-size);\r\n\tdisplay: inline-table;\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tcolor: var(--cell-text-color);\r\n\toutline: none;\r\n\twidth: calc(100% - 4px);\r\n}\r\n\r\n.adate tr {\r\n\theight: 1.15rem;\r\n\ttext-align: center;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.adate td {\r\n\tborder: 2px solid transparent;\r\n\tmin-width: 2.25ch; /* this doesn't zoom correctly */\r\n}\r\n\r\n.adate td:hover {\r\n\tborder: 2px solid var(--focus-cell-outline);\r\n}\r\n\r\n.adate td {\r\n\tborder: 1px;\r\n\tborder-style: solid;\r\n\tborder-color: var(--cell-border-color);\r\n\tborder-radius: 0px;\r\n\tbox-sizing: border-box;\r\n\tmargin: 0px;\r\n\toutline: none;\r\n\tbox-shadow: none;\r\n\tcolor: var(--cell-text-color);\r\n\ttext-overflow: ellipsis;\r\n\toverflow: hidden;\r\n\tpadding-left: 0.5ch;\r\n\tpadding-right: 0.5ch;\r\n}\r\n\r\n.adate td:focus,\r\n.adate td:focus-within {\r\n\tbackground-color: var(--focus-cell-background);\r\n\toutline-width: 2px;\r\n\toutline-style: solid;\r\n\toutline-color: var(--focus-cell-outline);\r\n\tbox-shadow: none;\r\n\toverflow: hidden;\r\n\tmin-height: 1.15em;\r\n\tmax-height: 1.15em;\r\n\toverflow: hidden;\r\n}\r\n\r\nbutton {\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tborder: none;\r\n\tpadding: 0px;\r\n\tmargin: 0px;\r\n\tcolor: var(--cell-text-color);\r\n\toutline: none;\r\n\tfont-size: var(--table-font-size);\r\n}\r\n\r\n.dateheader {\r\n\tfont-weight: 700;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n}\r\n\r\n.adate .todaysdate {\r\n\tborder-bottom-color: var(--focus-cell-outline);\r\n}\r\n\r\n.adate .selecteddate {\r\n\tborder: 2px solid var(--focus-cell-outline);\r\n}\r\n</style>\r\n","<template>\r\n\t<div class=\"autocomplete\" :class=\"{ isOpen: isOpen }\">\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<input\r\n\t\t\t\tref=\"mopInput\"\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\t@input=\"onChange\"\r\n\t\t\t\t@focus=\"onChange\"\r\n\t\t\t\tv-model=\"search\"\r\n\t\t\t\t@keydown.down=\"onArrowDown\"\r\n\t\t\t\t@keydown.up=\"onArrowUp\"\r\n\t\t\t\t@keydown.enter=\"onEnter\" />\r\n\t\t\t<ul id=\"autocomplete-results\" v-show=\"isOpen\" class=\"autocomplete-results\">\r\n\t\t\t\t<li class=\"loading autocomplete-result\" v-if=\"isLoading\">Loading results...</li>\r\n\t\t\t\t<li\r\n\t\t\t\t\tv-else\r\n\t\t\t\t\tv-for=\"(result, i) in results\"\r\n\t\t\t\t\t:key=\"i\"\r\n\t\t\t\t\t@click=\"setResult(result)\"\r\n\t\t\t\t\tclass=\"autocomplete-result\"\r\n\t\t\t\t\t:class=\"{ 'is-active': i === arrowCounter }\">\r\n\t\t\t\t\t{{ result }}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<label>{{ label }}</label>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({\r\n\tname: 'ADropdown',\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: '',\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tvalue: String,\r\n\t\titems: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: () => [],\r\n\t\t},\r\n\t\tisAsync: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t},\r\n\temits: ['update:modelValue', 'filterChanged'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tresults: [],\r\n\t\t\tsearch: this.modelValue,\r\n\t\t\tisLoading: false,\r\n\t\t\tarrowCounter: 0,\r\n\t\t\tisOpen: false,\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\titems: function (value, oldValue) {\r\n\t\t\tthis.isLoading = false\r\n\t\t\tthis.results = value\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tdocument.addEventListener('click', this.handleClickOutside)\r\n\t\tthis.filterResults()\r\n\t},\r\n\tdestroyed() {\r\n\t\tdocument.removeEventListener('click', this.handleClickOutside)\r\n\t},\r\n\tmethods: {\r\n\t\tsetResult(result) {\r\n\t\t\tthis.search = result\r\n\t\t\tthis.closeResults()\r\n\t\t},\r\n\t\tfilterResults() {\r\n\t\t\tthis.results = this.items.filter(item => {\r\n\t\t\t\treturn item.toLowerCase().indexOf(this.search.toLowerCase()) > -1\r\n\t\t\t})\r\n\t\t},\r\n\t\tonChange() {\r\n\t\t\tthis.isOpen = true\r\n\t\t\tif (this.isAsync) {\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tthis.$emit('filterChanged', this.search)\r\n\t\t\t} else {\r\n\t\t\t\tthis.filterResults()\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleClickOutside(event) {\r\n\t\t\tif (!this.$el.contains(event.target)) {\r\n\t\t\t\tthis.closeResults()\r\n\t\t\t\tthis.arrowCounter = 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloseResults() {\r\n\t\t\tthis.isOpen = false\r\n\r\n\t\t\tif (!this.items.includes(this.search)) {\r\n\t\t\t\tthis.search = ''\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('update:modelValue', this.search)\r\n\t\t},\r\n\t\tonArrowDown() {\r\n\t\t\tif (this.arrowCounter < this.results.length) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter + 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonArrowUp() {\r\n\t\t\tif (this.arrowCounter > 0) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter - 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.search = this.results[this.arrowCounter]\r\n\t\t\tthis.closeResults()\r\n\t\t\tthis.arrowCounter = 0\r\n\t\t},\r\n\t\topenWithSearch() {\r\n\t\t\tthis.search = ''\r\n\t\t\tthis.onChange()\r\n\t\t\tthis.$refs.mopInput.focus()\r\n\t\t},\r\n\t},\r\n})\r\n</script>\r\n\r\n<style>\r\n/* variables taken from here: https://github.com/frappe/frappe/blob/version-13/frappe/public/scss/common/awesomeplete.scss */\r\n.autocomplete {\r\n\tposition: relative;\r\n}\r\n\r\n.input-wrapper {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0.25rem 0.25rem 0 0;\r\n\tborder-bottom: none;\r\n}\r\n\r\nlabel {\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\n.autocomplete-results {\r\n\tposition: absolute;\r\n\twidth: calc(100% - 1ch + 1.5px);\r\n\tz-index: 1;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tcolor: #000000;\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0 0 0.25rem 0.25rem;\r\n\tborder-top: none;\r\n}\r\n\r\n.autocomplete-result {\r\n\tlist-style: none;\r\n\ttext-align: left;\r\n\tpadding: 4px 6px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.autocomplete-result.is-active,\r\n.autocomplete-result:hover {\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tcolor: #000000;\r\n}\r\n</style>\r\n","<template>\r\n\t<div class=\"autocomplete\" :class=\"{ isOpen: isOpen }\">\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<input\r\n\t\t\t\tref=\"mopInput\"\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\t@input=\"onChange\"\r\n\t\t\t\t@focus=\"onChange\"\r\n\t\t\t\tv-model=\"search\"\r\n\t\t\t\t@keydown.down=\"onArrowDown\"\r\n\t\t\t\t@keydown.up=\"onArrowUp\"\r\n\t\t\t\t@keydown.enter=\"onEnter\" />\r\n\t\t\t<ul id=\"autocomplete-results\" v-show=\"isOpen\" class=\"autocomplete-results\">\r\n\t\t\t\t<li class=\"loading autocomplete-result\" v-if=\"isLoading\">Loading results...</li>\r\n\t\t\t\t<li\r\n\t\t\t\t\tv-else\r\n\t\t\t\t\tv-for=\"(result, i) in results\"\r\n\t\t\t\t\t:key=\"i\"\r\n\t\t\t\t\t@click=\"setResult(result)\"\r\n\t\t\t\t\tclass=\"autocomplete-result\"\r\n\t\t\t\t\t:class=\"{ 'is-active': i === arrowCounter }\">\r\n\t\t\t\t\t{{ result }}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<label>{{ label }}</label>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({\r\n\tname: 'ADropdown',\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: '',\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tvalue: String,\r\n\t\titems: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: () => [],\r\n\t\t},\r\n\t\tisAsync: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t},\r\n\temits: ['update:modelValue', 'filterChanged'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tresults: [],\r\n\t\t\tsearch: this.modelValue,\r\n\t\t\tisLoading: false,\r\n\t\t\tarrowCounter: 0,\r\n\t\t\tisOpen: false,\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\titems: function (value, oldValue) {\r\n\t\t\tthis.isLoading = false\r\n\t\t\tthis.results = value\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tdocument.addEventListener('click', this.handleClickOutside)\r\n\t\tthis.filterResults()\r\n\t},\r\n\tdestroyed() {\r\n\t\tdocument.removeEventListener('click', this.handleClickOutside)\r\n\t},\r\n\tmethods: {\r\n\t\tsetResult(result) {\r\n\t\t\tthis.search = result\r\n\t\t\tthis.closeResults()\r\n\t\t},\r\n\t\tfilterResults() {\r\n\t\t\tthis.results = this.items.filter(item => {\r\n\t\t\t\treturn item.toLowerCase().indexOf(this.search.toLowerCase()) > -1\r\n\t\t\t})\r\n\t\t},\r\n\t\tonChange() {\r\n\t\t\tthis.isOpen = true\r\n\t\t\tif (this.isAsync) {\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tthis.$emit('filterChanged', this.search)\r\n\t\t\t} else {\r\n\t\t\t\tthis.filterResults()\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleClickOutside(event) {\r\n\t\t\tif (!this.$el.contains(event.target)) {\r\n\t\t\t\tthis.closeResults()\r\n\t\t\t\tthis.arrowCounter = 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloseResults() {\r\n\t\t\tthis.isOpen = false\r\n\r\n\t\t\tif (!this.items.includes(this.search)) {\r\n\t\t\t\tthis.search = ''\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('update:modelValue', this.search)\r\n\t\t},\r\n\t\tonArrowDown() {\r\n\t\t\tif (this.arrowCounter < this.results.length) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter + 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonArrowUp() {\r\n\t\t\tif (this.arrowCounter > 0) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter - 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.search = this.results[this.arrowCounter]\r\n\t\t\tthis.closeResults()\r\n\t\t\tthis.arrowCounter = 0\r\n\t\t},\r\n\t\topenWithSearch() {\r\n\t\t\tthis.search = ''\r\n\t\t\tthis.onChange()\r\n\t\t\tthis.$refs.mopInput.focus()\r\n\t\t},\r\n\t},\r\n})\r\n</script>\r\n\r\n<style>\r\n/* variables taken from here: https://github.com/frappe/frappe/blob/version-13/frappe/public/scss/common/awesomeplete.scss */\r\n.autocomplete {\r\n\tposition: relative;\r\n}\r\n\r\n.input-wrapper {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0.25rem 0.25rem 0 0;\r\n\tborder-bottom: none;\r\n}\r\n\r\nlabel {\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\n.autocomplete-results {\r\n\tposition: absolute;\r\n\twidth: calc(100% - 1ch + 1.5px);\r\n\tz-index: 1;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tcolor: #000000;\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0 0 0.25rem 0.25rem;\r\n\tborder-top: none;\r\n}\r\n\r\n.autocomplete-result {\r\n\tlist-style: none;\r\n\ttext-align: left;\r\n\tpadding: 4px 6px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.autocomplete-result.is-active,\r\n.autocomplete-result:hover {\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tcolor: #000000;\r\n}\r\n</style>\r\n","<template>\r\n\t<form>\r\n\t\t<component\r\n\t\t\tv-for=\"(componentObj, key) in modelValue\"\r\n\t\t\t:is=\"componentObj.component\"\r\n\t\t\t:key=\"key\"\r\n\t\t\t:schema=\"componentObj\"\r\n\t\t\tv-model=\"childModels[key].value\"\r\n\t\t\t:data=\"formData[componentObj.fieldname]\"\r\n\t\t\t:readonly=\"readonly\"\r\n\t\t\tv-bind=\"componentProps(componentObj)\">\r\n\t\t</component>\r\n\t</form>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue'\r\n\r\nimport { SchemaTypes } from 'types'\r\n\r\nconst props = defineProps<{\r\n\tmodelValue: SchemaTypes[]\r\n\tdata: Record<string, any>\r\n\treadonly?: boolean\r\n}>()\r\n\r\nconst emit = defineEmits(['update:modelValue'])\r\n\r\nconst formData = ref(props.data || {})\r\n\r\nconst componentProps = (componentObj: SchemaTypes) => {\r\n\tlet propsToPass = {}\r\n\tfor (const [key, value] of Object.entries(componentObj)) {\r\n\t\tif (!['component', 'fieldtype'].includes(key)) {\r\n\t\t\tpropsToPass[key] = value\r\n\t\t}\r\n\r\n\t\t// handle ATable data formats in case the table is nested under an AFormm;\r\n\t\t// TODO: there's probably a better way to do this\r\n\t\tif (key === 'rows') {\r\n\t\t\tif (value && (value as any[]).length === 0) {\r\n\t\t\t\tpropsToPass['rows'] = formData.value[componentObj.fieldname]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn propsToPass\r\n}\r\n\r\nconst childModels = computed({\r\n\tget: () => {\r\n\t\treturn props.modelValue.map((val, i) => {\r\n\t\t\treturn computed({\r\n\t\t\t\tget() {\r\n\t\t\t\t\treturn val.value\r\n\t\t\t\t},\r\n\t\t\t\tset: newValue => {\r\n\t\t\t\t\t// Find the component in modelValue and update it\r\n\t\t\t\t\tprops.modelValue[i].value = newValue\r\n\t\t\t\t\temit('update:modelValue', props.modelValue)\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tset: (/* newValue */) => {\r\n\t\t//emit('update:modelValue', '')\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\nform {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: flex-start;\r\n\talign-items: baseline;\r\n}\r\n</style>\r\n","<template>\r\n\t<fieldset>\r\n\t\t<legend @click=\"toggleCollapse\" @submit=\"toggleCollapse\">\r\n\t\t\t{{ label }}\r\n\t\t\t<CollapseButton v-if=\"collapsible\" :collapsed=\"collapsed\" />\r\n\t\t</legend>\r\n\t\t<slot :collapsed=\"collapsed\">\r\n\t\t\t<AForm v-show=\"!collapsed\" v-model=\"formSchema\" :data=\"formData\" />\r\n\t\t</slot>\r\n\t</fieldset>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\n\r\nimport CollapseButton from '@/components/base/CollapseButton.vue'\r\nimport AForm from '@/components/AForm.vue'\r\nimport { SchemaTypes } from 'types/index'\r\n\r\nconst props = defineProps<{\r\n\tschema: SchemaTypes[]\r\n\tlabel: string\r\n\tcollapsible?: boolean\r\n\tdata?: any\r\n}>()\r\n\r\nconst formData = ref(props.data || [])\r\nlet collapsed = ref(false)\r\nlet collapsible = ref(props.collapsible)\r\n\r\nconst formSchema = ref(props.schema)\r\nfunction toggleCollapse(event: Event) {\r\n\tevent.preventDefault()\r\n\tif (!collapsible.value) {\r\n\t\treturn\r\n\t}\r\n\tcollapsed.value = !collapsed.value\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nfieldset {\r\n\tmax-width: 100%;\r\n\twidth: 100%;\r\n\tmargin-right: 2ch;\r\n\tborder: 1px solid transparent;\r\n\tborder-bottom: 1px solid var(--gray-50);\r\n}\r\n\r\nlegend {\r\n\twidth: 100%;\r\n\theight: 1.15rem;\r\n\tborder: 1px solid transparent;\r\n\tpadding-bottom: 0.5rem;\r\n\tfont-size: 110%;\r\n\tfont-weight: 600;\r\n\tuser-select: none;\r\n}\r\n\r\n.collapse-button {\r\n\tfloat: right;\r\n}\r\n</style>\r\n","<template>\r\n\t<div>\r\n\t\t<input v-model=\"inputNumber\" type=\"number\" :id=\"uuid\" :disabled=\"readonly\" :required=\"required\" />\r\n\t\t<label :for=\"uuid\">{{ label }}</label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue'\r\n\r\nconst props = withDefaults(\r\n\tdefineProps<{\r\n\t\tlabel: string\r\n\t\tmodelValue: any\r\n\t\trequired?: boolean\r\n\t\treadonly?: boolean\r\n\t\tuuid?: string\r\n\t\tvalidation?: Record<string, any>\r\n\t}>(),\r\n\t{\r\n\t\tvalidation: () => ({ errorMessage: '&nbsp;' }),\r\n\t}\r\n)\r\nconst emit = defineEmits(['update:modelValue'])\r\nconst inputNumber = computed({\r\n\tget: () => {\r\n\t\treturn props.modelValue\r\n\t},\r\n\tset: newValue => {\r\n\t\temit('update:modelValue', newValue)\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\nlabel {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\ninput:focus + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n</style>\r\n","import type { FormSchema } from 'types'\r\nimport { DirectiveBinding } from 'vue'\r\n\r\nconst NAMED_MASKS = {\r\n\tdate: '##/##/####',\r\n\tdatetime: '####/##/## ##:##',\r\n\ttime: '##:##',\r\n\tfulltime: '##:##:##',\r\n\tphone: '(###) ### - ####',\r\n\tcard: '#### #### #### ####',\r\n}\r\n\r\nfunction extractMaskFn(mask: string): ((args: any) => string) | void {\r\n\ttry {\r\n\t\t// eslint-disable-next-line @typescript-eslint/no-implied-eval\r\n\t\treturn Function(`\"use strict\";return (${mask})`)()\r\n\t} catch (error) {\r\n\t\tif (error instanceof ReferenceError) {\r\n\t\t\t// assume mask is a string\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction getMask(binding: DirectiveBinding<string>) {\r\n\tlet mask = binding.value\r\n\r\n\tif (mask) {\r\n\t\tconst maskFn = extractMaskFn(mask)\r\n\t\tif (maskFn) {\r\n\t\t\t// TODO: (state) replace with state management;\r\n\t\t\t// pass the entire form/table data to the function\r\n\t\t\tconst locale = binding.instance['locale']\r\n\t\t\tmask = maskFn(locale)\r\n\t\t}\r\n\t} else {\r\n\t\t// TODO: (state) handle using state management\r\n\t\tconst schema: FormSchema = binding.instance['schema']\r\n\t\tconst fieldType: string | undefined = schema.fieldtype?.toLowerCase()\r\n\t\tif (fieldType && NAMED_MASKS[fieldType]) {\r\n\t\t\tmask = NAMED_MASKS[fieldType]\r\n\t\t}\r\n\t}\r\n\r\n\treturn mask\r\n}\r\n\r\nfunction unmaskInput(input: string, maskToken?: string) {\r\n\tif (!maskToken) {\r\n\t\tmaskToken = '#'\r\n\t}\r\n\r\n\tlet unmaskedInput = input\r\n\tconst maskChars = [maskToken, '/', '-', '(', ')', ' ']\r\n\r\n\tfor (const char of maskChars) {\r\n\t\tunmaskedInput = unmaskedInput.replaceAll(char, '')\r\n\t}\r\n\r\n\treturn unmaskedInput\r\n}\r\n\r\nfunction fillMask(input: string, mask: string, maskToken?: string) {\r\n\tif (!maskToken) {\r\n\t\tmaskToken = '#'\r\n\t}\r\n\r\n\tlet replacement = mask\r\n\tfor (const inputChar of input) {\r\n\t\tconst replaceIndex = replacement.indexOf(maskToken)\r\n\t\tif (replaceIndex !== -1) {\r\n\t\t\tconst prefix = replacement.substring(0, replaceIndex)\r\n\t\t\tconst suffix = replacement.substring(replaceIndex + 1)\r\n\t\t\treplacement = prefix + inputChar + suffix\r\n\t\t}\r\n\t}\r\n\r\n\treturn replacement.slice(0, mask.length)\r\n}\r\n\r\nexport function useStringMask(el: HTMLInputElement, binding: DirectiveBinding<string>) {\r\n\tconst mask = getMask(binding)\r\n\tif (!mask) return\r\n\r\n\tconst maskToken = '#'\r\n\tconst inputText = el.value\r\n\r\n\t// process input value with mask\r\n\tconst unmaskedInput = unmaskInput(inputText, maskToken)\r\n\tif (unmaskedInput) {\r\n\t\tconst replacement = fillMask(unmaskedInput, mask, maskToken)\r\n\r\n\t\t// TODO: (state) this is very opinionated;\r\n\t\t// most likely fixed with state management;\r\n\t\t// a better way could be to emit back to instance;\r\n\r\n\t\tif (binding.instance['maskFilled']) {\r\n\t\t\tbinding.instance['maskFilled'] = !replacement.includes(maskToken)\r\n\t\t}\r\n\r\n\t\tel.value = replacement\r\n\t} else {\r\n\t\tel.value = mask\r\n\t}\r\n}\r\n","<template>\r\n\t<div>\r\n\t\t<input\r\n\t\t\tv-model=\"inputText\"\r\n\t\t\t:id=\"uuid\"\r\n\t\t\t:disabled=\"readonly\"\r\n\t\t\t:maxlength=\"mask ? maskFilled && mask.length : undefined\"\r\n\t\t\t:required=\"required\"\r\n\t\t\tv-mask=\"mask\" />\r\n\t\t<label :for=\"uuid\">{{ label }} </label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, PropType, ref, computed } from 'vue'\r\n\r\nimport { FormSchema } from 'types'\r\nimport { useStringMask } from '@/directives/mask'\r\n\r\n// TODO: when moving to composition API, figure out how to provide mask\r\n// as a custom directive\r\nexport default defineComponent({\r\n\tname: 'ATextInput',\r\n\tprops: {\r\n\t\tschema: {\r\n\t\t\ttype: Object as PropType<FormSchema>,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tmodelValue: {\r\n\t\t\ttype: null as unknown as PropType<string | number>,\r\n\t\t},\r\n\t\tmask: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\trequired: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\treadonly: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\tuuid: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\tvalidation: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({ errorMessage: '&nbsp;' }),\r\n\t\t},\r\n\t},\r\n\tsetup(props, context) {\r\n\t\tconst maskFilled = ref(false)\r\n\r\n\t\t// TODO: (state) replace with state management\r\n\t\tconst locale = inject<string>('locale', '')\r\n\r\n\t\tconst inputText = computed({\r\n\t\t\tget() {\r\n\t\t\t\treturn props.modelValue\r\n\t\t\t},\r\n\t\t\tset(newValue) {\r\n\t\t\t\tcontext.emit('update:modelValue', newValue)\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn { inputText, locale, maskFilled }\r\n\t},\r\n\tdirectives: {\r\n\t\tmask: useStringMask,\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\nlabel {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\ninput:focus + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n</style>\r\n","<template>\r\n\t<div>\r\n\t\t<input\r\n\t\t\tv-model=\"inputText\"\r\n\t\t\t:id=\"uuid\"\r\n\t\t\t:disabled=\"readonly\"\r\n\t\t\t:maxlength=\"mask ? maskFilled && mask.length : undefined\"\r\n\t\t\t:required=\"required\"\r\n\t\t\tv-mask=\"mask\" />\r\n\t\t<label :for=\"uuid\">{{ label }} </label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, PropType, ref, computed } from 'vue'\r\n\r\nimport { FormSchema } from 'types'\r\nimport { useStringMask } from '@/directives/mask'\r\n\r\n// TODO: when moving to composition API, figure out how to provide mask\r\n// as a custom directive\r\nexport default defineComponent({\r\n\tname: 'ATextInput',\r\n\tprops: {\r\n\t\tschema: {\r\n\t\t\ttype: Object as PropType<FormSchema>,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tmodelValue: {\r\n\t\t\ttype: null as unknown as PropType<string | number>,\r\n\t\t},\r\n\t\tmask: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\trequired: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\treadonly: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\tuuid: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\tvalidation: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({ errorMessage: '&nbsp;' }),\r\n\t\t},\r\n\t},\r\n\tsetup(props, context) {\r\n\t\tconst maskFilled = ref(false)\r\n\r\n\t\t// TODO: (state) replace with state management\r\n\t\tconst locale = inject<string>('locale', '')\r\n\r\n\t\tconst inputText = computed({\r\n\t\t\tget() {\r\n\t\t\t\treturn props.modelValue\r\n\t\t\t},\r\n\t\t\tset(newValue) {\r\n\t\t\t\tcontext.emit('update:modelValue', newValue)\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn { inputText, locale, maskFilled }\r\n\t},\r\n\tdirectives: {\r\n\t\tmask: useStringMask,\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\nlabel {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\ninput:focus + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n</style>\r\n","import { App } from 'vue'\r\n\r\nimport ACheckbox from '@/components/form/ACheckbox.vue'\r\nimport AComboBox from '@/components/form/AComboBox.vue'\r\nimport ADate from '@/components/form/ADate.vue'\r\nimport ADropdown from '@/components/form/ADropdown.vue'\r\nimport AFieldset from '@/components/form/AFieldset.vue'\r\nimport AForm from '@/components/AForm.vue'\r\nimport ANumericInput from '@/components/form/ANumericInput.vue'\r\nimport ATextInput from '@/components/form/ATextInput.vue'\r\n// import { ACurrency } from '@/components/form/ACurrency.vue'\r\n// import { AQuantity } from '@/components/form/AQuantity.vue'\r\n\r\nfunction install(app: App /* options */) {\r\n\tapp.component('ACheckbox', ACheckbox)\r\n\tapp.component('ACombobox', AComboBox)\r\n\tapp.component('ADate', ADate)\r\n\tapp.component('ADropdown', ADropdown)\r\n\tapp.component('AFieldset', AFieldset)\r\n\tapp.component('AForm', AForm)\r\n\tapp.component('ANumericInput', ANumericInput)\r\n\tapp.component('ATextInput', ATextInput)\r\n\t// app.component('ACurrency', ACurrency)\r\n\t// app.component('AQuantity', AQuantity)\r\n}\r\n\r\nexport { ACheckbox, AComboBox, ADate, ADropdown, AFieldset, AForm, ANumericInput, ATextInput, install }\r\n"],"names":["props","__props","emit","__emit","checkbox","computed","value","v","M","F","j","H","Q","q","G","U","K","y","r","N","z","n","o","l","c","a","g","p","i","C","D","d","O","T","J","B","P","X","I","Y","Z","_","ee","f","u","A","E","t","ne","s","w","x","re","k","h","S","b","L","R","m","oe","le","ie","$","W","V","numberOfRows","numberOfColumns","tableData","inject","todaysDate","selectedDate","ref","currentMonth","currentYear","currentDates","onMounted","cellDate","renderMonth","nextTick","$selectedDate","$todaysDate","watch","firstOfMonth","monthStartWeekday","calendarStartDay","dayIndex","previousYear","nextYear","previousMonth","nextMonth","isTodaysDate","day","isSelectedDate","selectDate","event","currentIndex","updateData","monthAndYear","useKeyboardNav","defaultKeypressHandlers","_sfc_main$5","defineComponent","oldValue","result","item","_hoisted_1","_hoisted_2","_hoisted_3","_sfc_render","_ctx","_cache","$props","$setup","$data","isOpen","_normalizeClass","_createElementVNode","_withDirectives","search","args","$event","_withKeys","_vModelText","_openBlock","_createElementBlock","_Fragment","_renderList","setResult","_vShow","formData","componentProps","componentObj","propsToPass","key","childModels","val","newValue","collapsed","collapsible","formSchema","toggleCollapse","inputNumber","NAMED_MASKS","extractMaskFn","mask","getMask","binding","maskFn","locale","fieldType","_a","unmaskInput","input","maskToken","unmaskedInput","maskChars","char","fillMask","replacement","inputChar","replaceIndex","prefix","suffix","useStringMask","el","inputText","_sfc_main","context","maskFilled","_resolveDirective","required","_directive_mask","validation","_toDisplayString","install","app","ACheckbox","AComboBox","ADate","ADropdown","AFieldset","AForm","ANumericInput","ATextInput"],"mappings":"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"}