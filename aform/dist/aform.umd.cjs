(function(m,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(m=typeof globalThis<"u"?globalThis:m||self,t(m["@stonecrop/aform"]={},m.Vue))})(this,function(m,t){"use strict";const oe={id:"checkbox-container"},le=["id","readonly","required"],ae={id:"custom-checkbox"},re=["for"],se=["innerHTML"],ie=t.defineComponent({__name:"ACheckbox",props:{label:{},value:{},required:{type:Boolean},readOnly:{type:Boolean},uuid:{},validation:{default:()=>({errorMessage:"&nbsp;"})}},emits:["update:value"],setup(e,{emit:n}){const o=e,l=n,r=t.computed({get(){return o.value},set(a){l("update:value",a)}});return(a,s)=>(t.openBlock(),t.createElementBlock("div",null,[t.createElementVNode("label",oe,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i),type:"checkbox",id:a.uuid,class:"checkbox",readonly:a.readOnly,required:a.required},null,8,le),[[t.vModelCheckbox,r.value]]),t.createElementVNode("span",ae,t.toDisplayString(r.value),1)]),t.createElementVNode("label",{for:a.uuid,id:"checkbox-label"},t.toDisplayString(a.label),9,re),t.withDirectives(t.createElementVNode("p",{innerHTML:a.validation.errorMessage},null,8,se),[[t.vShow,a.validation.errorMessage]])]))}}),dt="",_=(e,n)=>{const o=e.__vccOpts||e;for(const[l,r]of n)o[l]=r;return o},$=_(ie,[["__scopeId","data-v-743cd4db"]]),ce=t.createElementVNode("div",null,[t.createElementVNode("input",{type:"text"}),t.createElementVNode("input",{type:"text"}),t.createElementVNode("input",{type:"text"})],-1),O=t.defineComponent({__name:"AComboBox",props:["event","cellData","tableID"],setup(e){return(n,o)=>{const l=t.resolveComponent("ATableModal");return t.openBlock(),t.createBlock(l,{event:e.event,cellData:e.cellData,class:"amodal"},{default:t.withCtx(()=>[ce]),_:1},8,["event","cellData"])}}});var L;const N=typeof window<"u",de=e=>typeof e=="string",ue=()=>{};N&&(L=window==null?void 0:window.navigator)!=null&&L.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function q(e){return typeof e=="function"?e():t.unref(e)}function pe(e){return e}function me(e){return t.getCurrentScope()?(t.onScopeDispose(e),!0):!1}function V(e){var n;const o=q(e);return(n=o==null?void 0:o.$el)!=null?n:o}const F=N?window:void 0;function fe(...e){let n,o,l,r;if(de(e[0])||Array.isArray(e[0])?([o,l,r]=e,n=F):[n,o,l,r]=e,!n)return ue;Array.isArray(o)||(o=[o]),Array.isArray(l)||(l=[l]);const a=[],s=()=>{a.forEach(d=>d()),a.length=0},i=(d,y,g,f)=>(d.addEventListener(y,g,f),()=>d.removeEventListener(y,g,f)),p=t.watch(()=>[V(n),q(r)],([d,y])=>{s(),d&&a.push(...o.flatMap(g=>l.map(f=>i(d,g,f,y))))},{immediate:!0,flush:"post"}),c=()=>{p(),s()};return me(c),c}const x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P="__vueuse_ssr_handlers__";x[P]=x[P]||{};function he(e,{window:n=F,scrollTarget:o}={}){const l=t.ref(!1),r=()=>{if(!n)return;const a=n.document,s=V(e);if(!s)l.value=!1;else{const i=s.getBoundingClientRect();l.value=i.top<=(n.innerHeight||a.documentElement.clientHeight)&&i.left<=(n.innerWidth||a.documentElement.clientWidth)&&i.bottom>=0&&i.right>=0}};return t.watch(()=>V(e),()=>r(),{immediate:!0,flush:"post"}),n&&fe(o||n,"scroll",r,{capture:!1,passive:!0}),l}var H;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(H||(H={}));var ye=Object.defineProperty,R=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,U=(e,n,o)=>n in e?ye(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,be=(e,n)=>{for(var o in n||(n={}))ge.call(n,o)&&U(e,o,n[o]);if(R)for(var o of R(n))_e.call(n,o)&&U(e,o,n[o]);return e};be({linear:pe},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const b=e=>{let n=he(e).value;return n=n&&e.offsetHeight>0,n},w=e=>e.tabIndex>=0,Q=e=>{const n=e.target;return B(n)},B=e=>{var n;let o;if(e instanceof HTMLTableCellElement){const l=(n=e.parentElement)==null?void 0:n.previousElementSibling;if(l){const r=Array.from(l.children)[e.cellIndex];r&&(o=r)}}else if(e instanceof HTMLTableRowElement){const l=e.previousElementSibling;l&&(o=l)}return o&&(!w(o)||!b(o))?B(o):o},we=e=>{var n;const o=e.target;let l;if(o instanceof HTMLTableCellElement){const r=(n=o.parentElement)==null?void 0:n.parentElement;if(r){const a=r.firstElementChild.children[o.cellIndex];a&&(l=a)}}else if(o instanceof HTMLTableRowElement){const r=o.parentElement;if(r){const a=r.firstElementChild;a&&(l=a)}}return l&&(!w(l)||!b(l))?I(l):l},j=e=>{const n=e.target;return I(n)},I=e=>{var n;let o;if(e instanceof HTMLTableCellElement){const l=(n=e.parentElement)==null?void 0:n.nextElementSibling;if(l){const r=Array.from(l.children)[e.cellIndex];r&&(o=r)}}else if(e instanceof HTMLTableRowElement){const l=e.nextElementSibling;l&&(o=l)}return o&&(!w(o)||!b(o))?I(o):o},ke=e=>{var n;const o=e.target;let l;if(o instanceof HTMLTableCellElement){const r=(n=o.parentElement)==null?void 0:n.parentElement;if(r){const a=r.lastElementChild.children[o.cellIndex];a&&(l=a)}}else if(o instanceof HTMLTableRowElement){const r=o.parentElement;if(r){const a=r.lastElementChild;a&&(l=a)}}return l&&(!w(l)||!b(l))?B(l):l},Y=e=>{const n=e.target;return S(n)},S=e=>{var n;let o;if(e.previousElementSibling)o=e.previousElementSibling;else{const l=(n=e.parentElement)==null?void 0:n.previousElementSibling;o=l==null?void 0:l.lastElementChild}return o&&(!w(o)||!b(o))?S(o):o},z=e=>{const n=e.target;return M(n)},M=e=>{var n;let o;if(e.nextElementSibling)o=e.nextElementSibling;else{const l=(n=e.parentElement)==null?void 0:n.nextElementSibling;o=l==null?void 0:l.firstElementChild}return o&&(!w(o)||!b(o))?M(o):o},W=e=>{const n=e.target.parentElement.firstElementChild;return n&&(!w(n)||!b(n))?M(n):n},K=e=>{const n=e.target.parentElement.lastElementChild;return n&&(!w(n)||!b(n))?S(n):n},A=["alt","control","shift","meta"],Ee={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"},G={"keydown.up":e=>{const n=Q(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.down":e=>{const n=j(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.left":e=>{const n=Y(e);e.preventDefault(),e.stopPropagation(),n&&n.focus()},"keydown.right":e=>{const n=z(e);e.preventDefault(),e.stopPropagation(),n&&n.focus()},"keydown.control.up":e=>{const n=we(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.control.down":e=>{const n=ke(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.control.left":e=>{const n=W(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.control.right":e=>{const n=K(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.end":e=>{const n=K(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.enter":e=>{if(e.target instanceof HTMLTableCellElement){e.preventDefault(),e.stopPropagation();const n=j(e);n&&n.focus()}},"keydown.shift.enter":e=>{if(e.target instanceof HTMLTableCellElement){e.preventDefault(),e.stopPropagation();const n=Q(e);n&&n.focus()}},"keydown.home":e=>{const n=W(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.tab":e=>{const n=z(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())},"keydown.shift.tab":e=>{const n=Y(e);n&&(e.preventDefault(),e.stopPropagation(),n.focus())}};function Ce(e){const n=l=>{let r=null;l.parent&&(typeof l.parent=="string"?r=document.querySelector(l.parent):l.parent instanceof Element?r=l.parent:r=l.parent.value);let a=[];if(l.selectors)if(typeof l.selectors=="string")a=r?Array.from(r.querySelectorAll(l.selectors)):Array.from(document.querySelectorAll(l.selectors));else if(l.selectors instanceof Element)a.push(l.selectors);else if(Array.isArray(l.selectors.value))for(const s of l.selectors.value)s instanceof Element?a.push(s):a.push(s.$el);else a.push(l.selectors.value);else a=Array.from(r.children).filter(s=>w(s)&&b(s));return a},o=l=>r=>{const a=Ee[r.key]||r.key.toLowerCase();if(A.includes(a))return;const s=l.handlers||G;for(const i of Object.keys(s)){const[p,...c]=i.split(".");if(p==="keydown"&&c.includes(a)){const d=s[i],y=c.filter(f=>A.includes(f)),g=A.some(f=>{const D=f.charAt(0).toUpperCase()+f.slice(1);return r.getModifierState(D)});if(y.length>0){if(g){for(const f of A)if(c.includes(f)){const D=f.charAt(0).toUpperCase()+f.slice(1);r.getModifierState(D)&&d(r)}}}else g||d(r)}}};t.onMounted(()=>{for(const l of e){const r=n(l);for(const a of r)a.addEventListener("keydown",o(l))}}),t.onBeforeUnmount(()=>{for(const l of e){const r=n(l);for(const a of r)a.removeEventListener("keydown",o(l))}})}const De=["event","colIndex","rowIndex","tableid"],Ae={colspan:"5"},Ve=["onClick"],Be=6,E=7,Ie=t.defineComponent({__name:"ADate",props:{colIndex:{},rowIndex:{},tableid:{},event:{},indent:{},readonly:{type:Boolean}},setup(e){const n=e,o=t.inject(n.tableid),l=new Date,r=t.ref(),a=t.ref(),s=t.ref(),i=t.ref([]);t.onMounted(async()=>{let u=o.cellData(n.colIndex,n.rowIndex);u?(u instanceof Date||(u=new Date(u)),r.value=u,a.value=r.value.getMonth(),s.value=r.value.getFullYear()):(a.value=l.getMonth(),s.value=l.getFullYear()),p(),await t.nextTick();const C=document.getElementsByClassName("selecteddate");if(C.length>0)C[0].focus();else{const h=document.getElementsByClassName("todaysdate");h.length>0&&h[0].focus()}}),t.watch([a,s],()=>{p()});const p=()=>{i.value=[];const u=new Date(s.value,a.value,1),C=u.getDay(),h=u.setDate(u.getDate()-C);for(let k of Array(43).keys())i.value.push(h+k*864e5)},c=()=>{s.value-=1},d=()=>{s.value+=1},y=()=>{a.value==0?(a.value=11,c()):a.value-=1},g=()=>{a.value==11?(a.value=0,d()):a.value+=1},f=u=>{if(a.value===l.getMonth())return l.toDateString()===new Date(u).toDateString()},D=u=>new Date(u).toDateString()===new Date(r.value).toDateString(),rt=(u,C)=>{r.value=new Date(i.value[C]),st()},st=()=>{o.setCellData(n.rowIndex,n.colIndex,r.value.getTime())},it=t.computed(()=>new Date(s.value,a.value,1).toLocaleDateString(void 0,{year:"numeric",month:"long"}));return Ce([{parent:"table.adate",selectors:"td",handlers:{...G,"keydown.pageup":y,"keydown.shift.pageup":c,"keydown.pagedown":g,"keydown.shift.pagedown":d}}]),(u,C)=>u.readonly?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,event:u.event,colIndex:u.colIndex,rowIndex:u.rowIndex,tableid:u.tableid,class:"adate",tabindex:"0",ref:"adatepicker"},[t.createElementVNode("table",null,[t.createElementVNode("tr",null,[t.createElementVNode("td",{onClick:y,tabindex:-1},"<"),t.createElementVNode("th",Ae,t.toDisplayString(it.value),1),t.createElementVNode("td",{onClick:g,tabindex:-1},">")]),(t.openBlock(),t.createElementBlock(t.Fragment,null,t.renderList(Be,h=>t.createElementVNode("tr",{key:h},[(t.openBlock(),t.createElementBlock(t.Fragment,null,t.renderList(E,k=>t.createElementVNode("td",{key:(h-1)*E+k,contenteditable:!1,spellcheck:!1,tabindex:0,style:t.normalizeStyle({border:D(i.value[(h-1)*E+k])?"2px solid var(--focus-cell-outline)":"none",borderBottomColor:f(i.value[(h-1)*E+k])?"var(--focus-cell-outline)":"none"}),onClick:t.withModifiers(ct=>rt(ct,(h-1)*E+k),["prevent","stop"]),class:t.normalizeClass({todaysdate:f(i.value[(h-1)*E+k]),selecteddate:D(i.value[(h-1)*E+k])})},t.toDisplayString(new Date(i.value[(h-1)*E+k]).getDate()),15,Ve)),64))])),64))])],8,De))}}),pt="",J=_(Ie,[["__scopeId","data-v-169f1184"]]),Se=t.defineComponent({name:"ADropdown",props:{modelValue:{type:String,required:!1,default:""},label:{type:String,required:!0},value:String,items:{type:Array,required:!1,default:()=>[]},isAsync:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue","filterChanged"],data(){return{results:[],search:this.modelValue,isLoading:!1,arrowCounter:0,isOpen:!1}},watch:{items:function(e,n){this.isLoading=!1,this.results=e}},mounted(){document.addEventListener("click",this.handleClickOutside),this.filterResults()},destroyed(){document.removeEventListener("click",this.handleClickOutside)},methods:{setResult(e){this.search=e,this.closeResults()},filterResults(){this.results=this.items.filter(e=>e.toLowerCase().indexOf(this.search.toLowerCase())>-1)},onChange(){this.isOpen=!0,this.isAsync?(this.isLoading=!0,this.$emit("filterChanged",this.search)):this.filterResults()},handleClickOutside(e){this.$el.contains(e.target)||(this.closeResults(),this.arrowCounter=0)},closeResults(){this.isOpen=!1,this.items.includes(this.search)||(this.search=""),this.$emit("update:modelValue",this.search)},onArrowDown(){this.arrowCounter<this.results.length&&(this.arrowCounter=this.arrowCounter+1)},onArrowUp(){this.arrowCounter>0&&(this.arrowCounter=this.arrowCounter-1)},onEnter(){this.search=this.results[this.arrowCounter],this.closeResults(),this.arrowCounter=0},openWithSearch(){this.search="",this.onChange(),this.$refs.mopInput.focus()}}}),mt="",Me={class:"input-wrapper"},ve={id:"autocomplete-results",class:"autocomplete-results"},Te={key:0,class:"loading autocomplete-result"},$e=["onClick"],Oe={key:0};function Le(e,n,o,l,r,a){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["autocomplete",{isOpen:e.isOpen}])},[t.createElementVNode("div",Me,[t.withDirectives(t.createElementVNode("input",{ref:"mopInput",type:"text",onInput:n[0]||(n[0]=(...s)=>e.onChange&&e.onChange(...s)),onFocus:n[1]||(n[1]=(...s)=>e.onChange&&e.onChange(...s)),"onUpdate:modelValue":n[2]||(n[2]=s=>e.search=s),onKeydown:[n[3]||(n[3]=t.withKeys((...s)=>e.onArrowDown&&e.onArrowDown(...s),["down"])),n[4]||(n[4]=t.withKeys((...s)=>e.onArrowUp&&e.onArrowUp(...s),["up"])),n[5]||(n[5]=t.withKeys((...s)=>e.onEnter&&e.onEnter(...s),["enter"]))]},null,544),[[t.vModelText,e.search]]),t.withDirectives(t.createElementVNode("ul",ve,[e.isLoading?(t.openBlock(),t.createElementBlock("li",Te,"Loading results...")):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(e.results,(s,i)=>(t.openBlock(),t.createElementBlock("li",{key:i,onClick:p=>e.setResult(s),class:t.normalizeClass(["autocomplete-result",{"is-active":i===e.arrowCounter}])},t.toDisplayString(s),11,$e))),128))],512),[[t.vShow,e.isOpen]]),e.label?(t.openBlock(),t.createElementBlock("label",Oe,t.toDisplayString(e.label),1)):t.createCommentVNode("",!0)])],2)}const v=_(Se,[["render",Le],["__scopeId","data-v-35e27f15"]]),Ne=t.defineComponent({__name:"CollapseButton",props:{collapsed:{type:Boolean}},setup(e){return(n,o)=>(t.openBlock(),t.createElementBlock("button",{class:t.normalizeClass(["collapse-button",n.collapsed?"rotated":"unrotated"])},"Ã—",2))}}),ft="",qe=_(Ne,[["__scopeId","data-v-6f1c1b45"]]),Fe=t.defineComponent({__name:"AForm",props:{modelValue:{},data:{},readonly:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,l=n,r=t.ref(o.data||{}),a=i=>{let p={};for(const[c,d]of Object.entries(i))["component","fieldtype"].includes(c)||(p[c]=d),c==="rows"&&d&&d.length===0&&(p.rows=r.value[i.fieldname]);return p},s=t.computed({get:()=>o.modelValue.map((i,p)=>t.computed({get(){return i.value},set:c=>{o.modelValue[p].value=c,l("update:modelValue",o.modelValue)}})),set:()=>{}});return(i,p)=>(t.openBlock(),t.createElementBlock("form",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.modelValue,(c,d)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(c.component),t.mergeProps({key:d,schema:c,modelValue:s.value[d].value,"onUpdate:modelValue":y=>s.value[d].value=y,data:r.value[c.fieldname],readonly:i.readonly},a(c)),null,16,["schema","modelValue","onUpdate:modelValue","data","readonly"]))),128))]))}}),ht="",T=_(Fe,[["__scopeId","data-v-82492bb4"]]),xe=t.defineComponent({__name:"AFieldset",props:{schema:{},label:{},collapsible:{type:Boolean},data:{}},setup(e){const n=e,o=t.ref(n.data||[]);let l=t.ref(!1),r=t.ref(n.collapsible);const a=t.ref(n.schema);function s(i){i.preventDefault(),r.value&&(l.value=!l.value)}return(i,p)=>(t.openBlock(),t.createElementBlock("fieldset",null,[t.createElementVNode("legend",{onClick:s,onSubmit:s},[t.createTextVNode(t.toDisplayString(i.label)+" ",1),t.unref(r)?(t.openBlock(),t.createBlock(qe,{key:0,collapsed:t.unref(l)},null,8,["collapsed"])):t.createCommentVNode("",!0)],32),t.renderSlot(i.$slots,"default",{collapsed:t.unref(l)},()=>[t.withDirectives(t.createVNode(T,{modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=c=>a.value=c),data:o.value},null,8,["modelValue","data"]),[[t.vShow,!t.unref(l)]])],!0)]))}}),yt="",X=_(xe,[["__scopeId","data-v-cad9b578"]]),Pe=["id","disabled","required"],He=["for"],Re=["innerHTML"],Ue=t.defineComponent({__name:"ANumericInput",props:{label:{},modelValue:{},required:{type:Boolean},readonly:{type:Boolean},uuid:{},validation:{default:()=>({errorMessage:"&nbsp;"})}},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,l=n,r=t.computed({get:()=>o.modelValue,set:a=>{l("update:modelValue",a)}});return(a,s)=>(t.openBlock(),t.createElementBlock("div",null,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i),type:"number",id:a.uuid,disabled:a.readonly,required:a.required},null,8,Pe),[[t.vModelText,r.value]]),t.createElementVNode("label",{for:a.uuid},t.toDisplayString(a.label),9,He),t.withDirectives(t.createElementVNode("p",{innerHTML:a.validation.errorMessage},null,8,Re),[[t.vShow,a.validation.errorMessage]])]))}}),gt="",Z=_(Ue,[["__scopeId","data-v-be33e6c4"]]),Qe={class:"input-group"},je=["for"],Ye=["id","disabled","required"],ze=["innerHTML"],We=t.defineComponent({__name:"AQuantity",props:{label:{},modelValue:{default:()=>({quantity:0})},required:{type:Boolean},readonly:{type:Boolean},uuid:{},validation:{default:()=>({errorMessage:""})}},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,l=n;t.computed(()=>o.modelValue.quantity*o.modelValue.conversionFactor);const r=t.computed({get:()=>o.modelValue,set:a=>{l("update:modelValue",a)}});return(a,s)=>(t.openBlock(),t.createElementBlock("div",Qe,[t.createElementVNode("label",{for:a.uuid},t.toDisplayString(a.label),9,je),t.withDirectives(t.createElementVNode("input",t.mergeProps({"onUpdate:modelValue":s[0]||(s[0]=i=>r.value.quantity=i),type:"number",id:a.uuid,disabled:a.readonly,required:a.required},r.value),null,16,Ye),[[t.vModelText,r.value.quantity]]),r.value.uom?(t.openBlock(),t.createBlock(v,{key:0,modelValue:r.value.uom,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value.uom=i),label:"",items:r.value.uoms,class:"input-group-append"},null,8,["modelValue","items"])):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("p",{innerHTML:a.validation.errorMessage},null,8,ze),[[t.vShow,a.validation.errorMessage]])]))}}),_t="",ee=_(We,[["__scopeId","data-v-45134904"]]),te={date:"##/##/####",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"};function Ke(e){try{return Function(`"use strict";return (${e})`)()}catch{}}function Ge(e){var o;let n=e.value;if(n){const l=Ke(n);if(l){const r=e.instance.locale;n=l(r)}}else{const r=(o=e.instance.schema.fieldtype)==null?void 0:o.toLowerCase();r&&te[r]&&(n=te[r])}return n}function Je(e,n){n||(n="#");let o=e;const l=[n,"/","-","(",")"," "];for(const r of l)o=o.replaceAll(r,"");return o}function Xe(e,n,o){o||(o="#");let l=n;for(const r of e){const a=l.indexOf(o);if(a!==-1){const s=l.substring(0,a),i=l.substring(a+1);l=s+r+i}}return l.slice(0,n.length)}function Ze(e,n){const o=Ge(n);if(!o)return;const l="#",r=e.value,a=Je(r,l);if(a){const s=Xe(a,o,l);n.instance.maskFilled&&(n.instance.maskFilled=!s.includes(l)),e.value=s}else e.value=o}const et=t.defineComponent({name:"ATextInput",props:{schema:{type:Object,required:!0},label:{type:String,required:!0},modelValue:{type:null},mask:{type:String},required:{type:Boolean},readonly:{type:Boolean},uuid:{type:String},validation:{type:Object,default:()=>({errorMessage:"&nbsp;"})}},setup(e,n){const o=t.ref(!1),l=t.inject("locale","");return{inputText:t.computed({get(){return e.modelValue},set(a){n.emit("update:modelValue",a)}}),locale:l,maskFilled:o}},directives:{mask:Ze}}),bt="",tt=["id","disabled","maxlength","required"],nt=["for"],ot=["innerHTML"];function lt(e,n,o,l,r,a){const s=t.resolveDirective("mask");return t.openBlock(),t.createElementBlock("div",null,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>e.inputText=i),id:e.uuid,disabled:e.readonly,maxlength:e.mask?e.maskFilled&&e.mask.length:void 0,required:e.required},null,8,tt),[[t.vModelText,e.inputText],[s,e.mask]]),t.createElementVNode("label",{for:e.uuid},t.toDisplayString(e.label),9,nt),t.withDirectives(t.createElementVNode("p",{innerHTML:e.validation.errorMessage},null,8,ot),[[t.vShow,e.validation.errorMessage]])])}const ne=_(et,[["render",lt],["__scopeId","data-v-76dba9b8"]]);function at(e){e.component("ACheckbox",$),e.component("ACombobox",O),e.component("ADate",J),e.component("ADropdown",v),e.component("AFieldset",X),e.component("AForm",T),e.component("ANumericInput",Z),e.component("AQuantity",ee),e.component("ATextInput",ne)}m.ACheckbox=$,m.AComboBox=O,m.ADate=J,m.ADropdown=v,m.AFieldset=X,m.AForm=T,m.ANumericInput=Z,m.AQuantity=ee,m.ATextInput=ne,m.install=at,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=aform.umd.cjs.map
