{"version":3,"file":"aform.js","sources":["../src/components/form/ACheckbox.vue","../../utilities/dist/utilities.js","../src/components/form/ADate.vue","../src/components/form/ADropdown.vue","../src/components/form/ADropdown.vue","../src/components/AForm.vue","../src/components/form/AFieldset.vue","../src/components/form/ANumericInput.vue","../src/directives/mask.ts","../src/components/form/ATextInput.vue","../src/components/form/ATextInput.vue","../src/index.ts"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<label id=\"checkbox-container\">\r\n\t\t\t<input v-model=\"checkbox\" type=\"checkbox\" :id=\"uuid\" class=\"checkbox\" :readonly=\"readOnly\" :required=\"required\" />\r\n\t\t\t<span id=\"custom-checkbox\">{{ checkbox }}</span>\r\n\t\t</label>\r\n\t\t<label :for=\"uuid\" id=\"checkbox-label\">{{ label }}</label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { InputHTMLAttributes } from 'vue'\r\n\r\nwithDefaults(\r\n\tdefineProps<{\r\n\t\tlabel?: string\r\n\t\trequired?: boolean\r\n\t\treadOnly?: boolean\r\n\t\tuuid?: string\r\n\t\tvalidation?: Record<string, any>\r\n\t}>(),\r\n\t{\r\n\t\tvalidation: () => ({ errorMessage: '&nbsp;' }),\r\n\t}\r\n)\r\n\r\nconst checkbox = defineModel<InputHTMLAttributes['checked']>()\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tdisplay: inline-block;\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\n.checkbox {\r\n\tvisibility: hidden;\r\n}\r\n\r\n.checkbox + #custom-checkbox:after {\r\n\tcontent: '⬡';\r\n\tpadding: 1ch 0 0.5ch 0;\r\n\tfont-size: 120%;\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\tleft: -18px;\r\n}\r\n\r\n.checkbox:checked + #custom-checkbox:after {\r\n\tcontent: '⬣';\r\n\tpadding: 1ch 0 0.5ch 0;\r\n\tfont-size: 120%;\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\tleft: -18px;\r\n}\r\n\r\n#custom-checkbox {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n#checkbox-container {\r\n\tdisplay: inline-block;\r\n\tmin-width: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\theight: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\n#checkbox-container:hover {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\n#checkbox-container:hover + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n\r\n#checkbox-label {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n</style>\r\n","import { unref as Q, getCurrentScope as U, onScopeDispose as K, ref as B, watch as D, onMounted as W, onBeforeUnmount as V } from \"vue\";\nvar v;\nconst M = typeof window < \"u\", F = (e) => typeof e == \"string\", j = () => {\n};\nM && ((v = window == null ? void 0 : window.navigator) != null && v.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);\nfunction H(e) {\n  return typeof e == \"function\" ? e() : Q(e);\n}\nfunction q(e) {\n  return e;\n}\nfunction G(e) {\n  return U() ? (K(e), !0) : !1;\n}\nfunction y(e) {\n  var t;\n  const r = H(e);\n  return (t = r == null ? void 0 : r.$el) != null ? t : r;\n}\nconst N = M ? window : void 0;\nfunction z(...e) {\n  let t, r, n, o;\n  if (F(e[0]) || Array.isArray(e[0]) ? ([r, n, o] = e, t = N) : [t, r, n, o] = e, !t)\n    return j;\n  Array.isArray(r) || (r = [r]), Array.isArray(n) || (n = [n]);\n  const l = [], s = () => {\n    l.forEach((c) => c()), l.length = 0;\n  }, a = (c, g, p, i) => (c.addEventListener(g, p, i), () => c.removeEventListener(g, p, i)), C = D(() => [y(t), H(o)], ([c, g]) => {\n    s(), c && l.push(...r.flatMap((p) => n.map((i) => a(c, p, i, g))));\n  }, { immediate: !0, flush: \"post\" }), d = () => {\n    C(), s();\n  };\n  return G(d), d;\n}\nconst O = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {}, T = \"__vueuse_ssr_handlers__\";\nO[T] = O[T] || {};\nfunction J(e, { window: t = N, scrollTarget: r } = {}) {\n  const n = B(!1), o = () => {\n    if (!t)\n      return;\n    const l = t.document, s = y(e);\n    if (!s)\n      n.value = !1;\n    else {\n      const a = s.getBoundingClientRect();\n      n.value = a.top <= (t.innerHeight || l.documentElement.clientHeight) && a.left <= (t.innerWidth || l.documentElement.clientWidth) && a.bottom >= 0 && a.right >= 0;\n    }\n  };\n  return D(() => y(e), () => o(), { immediate: !0, flush: \"post\" }), t && z(r || t, \"scroll\", o, {\n    capture: !1,\n    passive: !0\n  }), n;\n}\nvar P;\n(function(e) {\n  e.UP = \"UP\", e.RIGHT = \"RIGHT\", e.DOWN = \"DOWN\", e.LEFT = \"LEFT\", e.NONE = \"NONE\";\n})(P || (P = {}));\nvar X = Object.defineProperty, I = Object.getOwnPropertySymbols, Y = Object.prototype.hasOwnProperty, Z = Object.prototype.propertyIsEnumerable, _ = (e, t, r) => t in e ? X(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, ee = (e, t) => {\n  for (var r in t || (t = {}))\n    Y.call(t, r) && _(e, r, t[r]);\n  if (I)\n    for (var r of I(t))\n      Z.call(t, r) && _(e, r, t[r]);\n  return e;\n};\nconst te = {\n  easeInSine: [0.12, 0, 0.39, 0],\n  easeOutSine: [0.61, 1, 0.88, 1],\n  easeInOutSine: [0.37, 0, 0.63, 1],\n  easeInQuad: [0.11, 0, 0.5, 0],\n  easeOutQuad: [0.5, 1, 0.89, 1],\n  easeInOutQuad: [0.45, 0, 0.55, 1],\n  easeInCubic: [0.32, 0, 0.67, 0],\n  easeOutCubic: [0.33, 1, 0.68, 1],\n  easeInOutCubic: [0.65, 0, 0.35, 1],\n  easeInQuart: [0.5, 0, 0.75, 0],\n  easeOutQuart: [0.25, 1, 0.5, 1],\n  easeInOutQuart: [0.76, 0, 0.24, 1],\n  easeInQuint: [0.64, 0, 0.78, 0],\n  easeOutQuint: [0.22, 1, 0.36, 1],\n  easeInOutQuint: [0.83, 0, 0.17, 1],\n  easeInExpo: [0.7, 0, 0.84, 0],\n  easeOutExpo: [0.16, 1, 0.3, 1],\n  easeInOutExpo: [0.87, 0, 0.13, 1],\n  easeInCirc: [0.55, 0, 1, 0.45],\n  easeOutCirc: [0, 0.55, 0.45, 1],\n  easeInOutCirc: [0.85, 0, 0.15, 1],\n  easeInBack: [0.36, 0, 0.66, -0.56],\n  easeOutBack: [0.34, 1.56, 0.64, 1],\n  easeInOutBack: [0.68, -0.6, 0.32, 1.6]\n};\nee({\n  linear: q\n}, te);\nconst f = (e) => {\n  let t = J(e).value;\n  return t = t && e.offsetHeight > 0, t;\n}, u = (e) => e.tabIndex >= 0, A = (e) => {\n  const t = e.target;\n  return E(t);\n}, E = (e) => {\n  var r;\n  let t;\n  if (e instanceof HTMLTableCellElement) {\n    const n = (r = e.parentElement) == null ? void 0 : r.previousElementSibling;\n    if (n) {\n      const l = Array.from(n.children)[e.cellIndex];\n      l && (t = l);\n    }\n  } else if (e instanceof HTMLTableRowElement) {\n    const n = e.previousElementSibling;\n    n && (t = n);\n  }\n  return t && (!u(t) || !f(t)) ? E(t) : t;\n}, ne = (e) => {\n  var n;\n  const t = e.target;\n  let r;\n  if (t instanceof HTMLTableCellElement) {\n    const o = (n = t.parentElement) == null ? void 0 : n.parentElement;\n    if (o) {\n      const s = o.firstElementChild.children[t.cellIndex];\n      s && (r = s);\n    }\n  } else if (t instanceof HTMLTableRowElement) {\n    const o = t.parentElement;\n    if (o) {\n      const l = o.firstElementChild;\n      l && (r = l);\n    }\n  }\n  return r && (!u(r) || !f(r)) ? w(r) : r;\n}, x = (e) => {\n  const t = e.target;\n  return w(t);\n}, w = (e) => {\n  var r;\n  let t;\n  if (e instanceof HTMLTableCellElement) {\n    const n = (r = e.parentElement) == null ? void 0 : r.nextElementSibling;\n    if (n) {\n      const l = Array.from(n.children)[e.cellIndex];\n      l && (t = l);\n    }\n  } else if (e instanceof HTMLTableRowElement) {\n    const n = e.nextElementSibling;\n    n && (t = n);\n  }\n  return t && (!u(t) || !f(t)) ? w(t) : t;\n}, re = (e) => {\n  var n;\n  const t = e.target;\n  let r;\n  if (t instanceof HTMLTableCellElement) {\n    const o = (n = t.parentElement) == null ? void 0 : n.parentElement;\n    if (o) {\n      const s = o.lastElementChild.children[t.cellIndex];\n      s && (r = s);\n    }\n  } else if (t instanceof HTMLTableRowElement) {\n    const o = t.parentElement;\n    if (o) {\n      const l = o.lastElementChild;\n      l && (r = l);\n    }\n  }\n  return r && (!u(r) || !f(r)) ? E(r) : r;\n}, k = (e) => {\n  const t = e.target;\n  return h(t);\n}, h = (e) => {\n  var r;\n  let t;\n  if (e.previousElementSibling)\n    t = e.previousElementSibling;\n  else {\n    const n = (r = e.parentElement) == null ? void 0 : r.previousElementSibling;\n    t = n == null ? void 0 : n.lastElementChild;\n  }\n  return t && (!u(t) || !f(t)) ? h(t) : t;\n}, S = (e) => {\n  const t = e.target;\n  return b(t);\n}, b = (e) => {\n  var r;\n  let t;\n  if (e.nextElementSibling)\n    t = e.nextElementSibling;\n  else {\n    const n = (r = e.parentElement) == null ? void 0 : r.nextElementSibling;\n    t = n == null ? void 0 : n.firstElementChild;\n  }\n  return t && (!u(t) || !f(t)) ? b(t) : t;\n}, L = (e) => {\n  const n = e.target.parentElement.firstElementChild;\n  return n && (!u(n) || !f(n)) ? b(n) : n;\n}, R = (e) => {\n  const n = e.target.parentElement.lastElementChild;\n  return n && (!u(n) || !f(n)) ? h(n) : n;\n}, m = [\"alt\", \"control\", \"shift\", \"meta\"], oe = {\n  ArrowUp: \"up\",\n  ArrowDown: \"down\",\n  ArrowLeft: \"left\",\n  ArrowRight: \"right\"\n}, le = {\n  \"keydown.up\": (e) => {\n    const t = A(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.down\": (e) => {\n    const t = x(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.left\": (e) => {\n    const t = k(e);\n    e.preventDefault(), e.stopPropagation(), t && t.focus();\n  },\n  \"keydown.right\": (e) => {\n    const t = S(e);\n    e.preventDefault(), e.stopPropagation(), t && t.focus();\n  },\n  \"keydown.control.up\": (e) => {\n    const t = ne(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.down\": (e) => {\n    const t = re(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.left\": (e) => {\n    const t = L(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.right\": (e) => {\n    const t = R(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.end\": (e) => {\n    const t = R(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.enter\": (e) => {\n    if (e.target instanceof HTMLTableCellElement) {\n      e.preventDefault(), e.stopPropagation();\n      const r = x(e);\n      r && r.focus();\n    }\n  },\n  \"keydown.shift.enter\": (e) => {\n    if (e.target instanceof HTMLTableCellElement) {\n      e.preventDefault(), e.stopPropagation();\n      const r = A(e);\n      r && r.focus();\n    }\n  },\n  \"keydown.home\": (e) => {\n    const t = L(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.tab\": (e) => {\n    const t = S(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.shift.tab\": (e) => {\n    const t = k(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  }\n};\nfunction ie(e) {\n  const t = (n) => {\n    let o = null;\n    n.parent && (typeof n.parent == \"string\" ? o = document.querySelector(n.parent) : n.parent instanceof Element ? o = n.parent : o = n.parent.value);\n    let l = [];\n    if (n.selectors)\n      if (typeof n.selectors == \"string\")\n        l = o ? Array.from(o.querySelectorAll(n.selectors)) : Array.from(document.querySelectorAll(n.selectors));\n      else if (n.selectors instanceof Element)\n        l.push(n.selectors);\n      else if (Array.isArray(n.selectors.value))\n        for (const s of n.selectors.value)\n          s instanceof Element ? l.push(s) : l.push(s.$el);\n      else\n        l.push(n.selectors.value);\n    else\n      l = Array.from(o.children).filter((a) => u(a) && f(a));\n    return l;\n  }, r = (n) => (o) => {\n    const l = oe[o.key] || o.key.toLowerCase();\n    if (m.includes(l))\n      return;\n    const s = n.handlers || le;\n    for (const a of Object.keys(s)) {\n      const [C, ...d] = a.split(\".\");\n      if (C === \"keydown\" && d.includes(l)) {\n        const c = s[a], g = d.filter((i) => m.includes(i)), p = m.some((i) => {\n          const $ = i.charAt(0).toUpperCase() + i.slice(1);\n          return o.getModifierState($);\n        });\n        if (g.length > 0) {\n          if (p) {\n            for (const i of m)\n              if (d.includes(i)) {\n                const $ = i.charAt(0).toUpperCase() + i.slice(1);\n                o.getModifierState($) && c(o);\n              }\n          }\n        } else\n          p || c(o);\n      }\n    }\n  };\n  W(() => {\n    for (const n of e) {\n      const o = t(n);\n      for (const l of o)\n        l.addEventListener(\"keydown\", r(n));\n    }\n  }), V(() => {\n    for (const n of e) {\n      const o = t(n);\n      for (const l of o)\n        l.removeEventListener(\"keydown\", r(n));\n    }\n  });\n}\nfunction ae(e) {\n}\nexport {\n  le as defaultKeypressHandlers,\n  ae as install,\n  ie as useKeyboardNav\n};\n//# sourceMappingURL=utilities.js.map\n","<template>\r\n\t<div\r\n\t\tv-if=\"!readonly\"\r\n\t\t:event=\"event\"\r\n\t\t:colIndex=\"colIndex\"\r\n\t\t:rowIndex=\"rowIndex\"\r\n\t\t:tableid=\"tableid\"\r\n\t\tclass=\"adate\"\r\n\t\ttabindex=\"0\"\r\n\t\tref=\"adatepicker\">\r\n\t\t<table>\r\n\t\t\t<tr>\r\n\t\t\t\t<td @click=\"previousMonth\" :tabindex=\"-1\">&lt;</td>\r\n\t\t\t\t<th colspan=\"5\">{{ monthAndYear }}</th>\r\n\t\t\t\t<td @click=\"nextMonth\" :tabindex=\"-1\">&gt;</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr v-for=\"rowNo in numberOfRows\" :key=\"rowNo\">\r\n\t\t\t\t<!-- TODO: (style) remove inline styling and replace with theme package -->\r\n\t\t\t\t<td\r\n\t\t\t\t\tv-for=\"colNo in numberOfColumns\"\r\n\t\t\t\t\t:key=\"(rowNo - 1) * numberOfColumns + colNo\"\r\n\t\t\t\t\t:contenteditable=\"false\"\r\n\t\t\t\t\t:spellcheck=\"false\"\r\n\t\t\t\t\t:tabindex=\"0\"\r\n\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\tborder: isSelectedDate(currentDates[(rowNo - 1) * numberOfColumns + colNo])\r\n\t\t\t\t\t\t\t? '2px solid var(--focus-cell-outline)'\r\n\t\t\t\t\t\t\t: 'none',\r\n\t\t\t\t\t\tborderBottomColor: isTodaysDate(currentDates[(rowNo - 1) * numberOfColumns + colNo])\r\n\t\t\t\t\t\t\t? 'var(--focus-cell-outline)'\r\n\t\t\t\t\t\t\t: 'none',\r\n\t\t\t\t\t}\"\r\n\t\t\t\t\t@click.prevent.stop=\"selectDate($event, (rowNo - 1) * numberOfColumns + colNo)\"\r\n\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\ttodaysdate: isTodaysDate(currentDates[(rowNo - 1) * numberOfColumns + colNo]),\r\n\t\t\t\t\t\tselecteddate: isSelectedDate(currentDates[(rowNo - 1) * numberOfColumns + colNo]),\r\n\t\t\t\t\t}\">\r\n\t\t\t\t\t{{ new Date(currentDates[(rowNo - 1) * numberOfColumns + colNo]).getDate() }}\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject, nextTick, onMounted, ref, watch } from 'vue'\r\n\r\nimport { TableDataStore } from '@stonecrop/atable'\r\nimport { defaultKeypressHandlers, useKeyboardNav } from '@stonecrop/utilities'\r\n\r\nconst props = defineProps<{\r\n\tcolIndex?: number\r\n\trowIndex?: number\r\n\ttableid?: string\r\n\tevent?: Event\r\n\tindent?: number\r\n\treadonly?: boolean\r\n}>()\r\n\r\nconst tableData = inject<TableDataStore>(props.tableid)\r\n\r\nconst numberOfRows = 6\r\nconst numberOfColumns = 7\r\nconst todaysDate = new Date()\r\n\r\nconst selectedDate = ref<Date>()\r\nconst currentMonth = ref<number>()\r\nconst currentYear = ref<number>()\r\nconst currentDates = ref<number[]>([])\r\n// const width = ref('')\r\n\r\nonMounted(async () => {\r\n\tlet cellDate = tableData.cellData<string | number | Date>(props.colIndex, props.rowIndex)\r\n\tif (cellDate) {\r\n\t\tif (!(cellDate instanceof Date)) {\r\n\t\t\tcellDate = new Date(cellDate)\r\n\t\t}\r\n\r\n\t\tselectedDate.value = cellDate\r\n\t\tcurrentMonth.value = selectedDate.value.getMonth()\r\n\t\tcurrentYear.value = selectedDate.value.getFullYear()\r\n\t} else {\r\n\t\tcurrentMonth.value = todaysDate.getMonth()\r\n\t\tcurrentYear.value = todaysDate.getFullYear()\r\n\t}\r\n\r\n\trenderMonth()\r\n\tawait nextTick()\r\n\r\n\tconst $selectedDate = document.getElementsByClassName('selecteddate')\r\n\tif ($selectedDate.length > 0) {\r\n\t\t;($selectedDate[0] as HTMLElement).focus()\r\n\t} else {\r\n\t\tconst $todaysDate = document.getElementsByClassName('todaysdate')\r\n\t\tif ($todaysDate.length > 0) {\r\n\t\t\t;($todaysDate[0] as HTMLElement).focus()\r\n\t\t}\r\n\t}\r\n})\r\n\r\nwatch([currentMonth, currentYear], () => {\r\n\trenderMonth()\r\n})\r\n\r\nconst renderMonth = () => {\r\n\tcurrentDates.value = []\r\n\tconst firstOfMonth = new Date(currentYear.value, currentMonth.value, 1)\r\n\tconst monthStartWeekday = firstOfMonth.getDay()\r\n\tconst calendarStartDay = firstOfMonth.setDate(firstOfMonth.getDate() - monthStartWeekday)\r\n\tfor (let dayIndex of Array(43).keys()) {\r\n\t\tcurrentDates.value.push(calendarStartDay + dayIndex * 86400000)\r\n\t}\r\n}\r\n\r\nconst previousYear = () => {\r\n\tcurrentYear.value -= 1\r\n}\r\n\r\nconst nextYear = () => {\r\n\tcurrentYear.value += 1\r\n}\r\n\r\nconst previousMonth = () => {\r\n\tif (currentMonth.value == 0) {\r\n\t\tcurrentMonth.value = 11\r\n\t\tpreviousYear()\r\n\t} else {\r\n\t\tcurrentMonth.value -= 1\r\n\t}\r\n}\r\n\r\nconst nextMonth = () => {\r\n\tif (currentMonth.value == 11) {\r\n\t\tcurrentMonth.value = 0\r\n\t\tnextYear()\r\n\t} else {\r\n\t\tcurrentMonth.value += 1\r\n\t}\r\n}\r\n\r\nconst isTodaysDate = (day: string | number | Date) => {\r\n\tif (currentMonth.value !== todaysDate.getMonth()) {\r\n\t\treturn\r\n\t}\r\n\treturn todaysDate.toDateString() === new Date(day).toDateString()\r\n}\r\n\r\nconst isSelectedDate = (day: string | number | Date) => {\r\n\treturn new Date(day).toDateString() === new Date(selectedDate.value).toDateString()\r\n}\r\n\r\nconst selectDate = (event: Event, currentIndex: number) => {\r\n\tselectedDate.value = new Date(currentDates.value[currentIndex])\r\n\tupdateData()\r\n\t// TODO: (typing) figure out a way to close datepicker\r\n\t// context.refs.adatepicker.destroy()\r\n}\r\n\r\nconst updateData = () => {\r\n\t// TODO: check proper date format to feed back (assuming number for now)\r\n\ttableData.setCellData(props.rowIndex, props.colIndex, selectedDate.value.getTime())\r\n}\r\n\r\n// const dayWidth = computed(() => {\r\n// \tconst widthValue = Number(width.value.replace('px', ''))\r\n// \treturn `${widthValue / (numberOfColumns - 1)}px`\r\n// })\r\n\r\nconst monthAndYear = computed(() => {\r\n\treturn new Date(currentYear.value, currentMonth.value, 1).toLocaleDateString(undefined, {\r\n\t\tyear: 'numeric',\r\n\t\tmonth: 'long',\r\n\t})\r\n})\r\n\r\n// setup keyboard navigation\r\nuseKeyboardNav([\r\n\t{\r\n\t\tparent: 'table.adate',\r\n\t\tselectors: 'td',\r\n\t\thandlers: {\r\n\t\t\t...defaultKeypressHandlers,\r\n\t\t\t...{\r\n\t\t\t\t'keydown.pageup': previousMonth,\r\n\t\t\t\t'keydown.shift.pageup': previousYear,\r\n\t\t\t\t'keydown.pagedown': nextMonth,\r\n\t\t\t\t'keydown.shift.pagedown': nextYear,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n])\r\n</script>\r\n\r\n<style scoped>\r\n@import '@/theme/aform.css';\r\n\r\n.adate {\r\n\tborder: 2px solid var(--focus-cell-outline);\r\n\tposition: absolute;\r\n\tz-index: 100;\r\n\tfont-size: var(--table-font-size);\r\n\tdisplay: inline-table;\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tcolor: var(--cell-text-color);\r\n\toutline: none;\r\n\twidth: calc(100% - 4px);\r\n}\r\n\r\n.adate tr {\r\n\theight: 1.15rem;\r\n\ttext-align: center;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.adate td {\r\n\tborder: 2px solid transparent;\r\n\tmin-width: 2.25ch; /* this doesn't zoom correctly */\r\n}\r\n\r\n.adate td:hover {\r\n\tborder: 2px solid var(--focus-cell-outline);\r\n}\r\n\r\n.adate td {\r\n\tborder: 1px;\r\n\tborder-style: solid;\r\n\tborder-color: var(--cell-border-color);\r\n\tborder-radius: 0px;\r\n\tbox-sizing: border-box;\r\n\tmargin: 0px;\r\n\toutline: none;\r\n\tbox-shadow: none;\r\n\tcolor: var(--cell-text-color);\r\n\ttext-overflow: ellipsis;\r\n\toverflow: hidden;\r\n\tpadding-left: 0.5ch;\r\n\tpadding-right: 0.5ch;\r\n}\r\n\r\n.adate td:focus,\r\n.adate td:focus-within {\r\n\tbackground-color: var(--focus-cell-background);\r\n\toutline-width: 2px;\r\n\toutline-style: solid;\r\n\toutline-color: var(--focus-cell-outline);\r\n\tbox-shadow: none;\r\n\toverflow: hidden;\r\n\tmin-height: 1.15em;\r\n\tmax-height: 1.15em;\r\n\toverflow: hidden;\r\n}\r\n\r\nbutton {\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tborder: none;\r\n\tpadding: 0px;\r\n\tmargin: 0px;\r\n\tcolor: var(--cell-text-color);\r\n\toutline: none;\r\n\tfont-size: var(--table-font-size);\r\n}\r\n\r\n.dateheader {\r\n\tfont-weight: 700;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n}\r\n\r\n.adate .todaysdate {\r\n\tborder-bottom-color: var(--focus-cell-outline);\r\n}\r\n\r\n.adate .selecteddate {\r\n\tborder: 2px solid var(--focus-cell-outline);\r\n}\r\n</style>\r\n","<template>\r\n\t<div class=\"autocomplete\" :class=\"{ isOpen: isOpen }\">\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<input\r\n\t\t\t\tref=\"mopInput\"\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\t@input=\"onChange\"\r\n\t\t\t\t@focus=\"onChange\"\r\n\t\t\t\tv-model=\"search\"\r\n\t\t\t\t@keydown.down=\"onArrowDown\"\r\n\t\t\t\t@keydown.up=\"onArrowUp\"\r\n\t\t\t\t@keydown.enter=\"onEnter\" />\r\n\t\t\t<ul id=\"autocomplete-results\" v-show=\"isOpen\" class=\"autocomplete-results\">\r\n\t\t\t\t<li class=\"loading autocomplete-result\" v-if=\"isLoading\">Loading results...</li>\r\n\t\t\t\t<li\r\n\t\t\t\t\tv-else\r\n\t\t\t\t\tv-for=\"(result, i) in results\"\r\n\t\t\t\t\t:key=\"i\"\r\n\t\t\t\t\t@click=\"setResult(result)\"\r\n\t\t\t\t\tclass=\"autocomplete-result\"\r\n\t\t\t\t\t:class=\"{ 'is-active': i === arrowCounter }\">\r\n\t\t\t\t\t{{ result }}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<label>{{ label }}</label>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({\r\n\tname: 'ADropdown',\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: '',\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tvalue: String,\r\n\t\titems: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: () => [],\r\n\t\t},\r\n\t\tisAsync: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t},\r\n\temits: ['update:modelValue', 'filterChanged'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tresults: [],\r\n\t\t\tsearch: this.modelValue,\r\n\t\t\tisLoading: false,\r\n\t\t\tarrowCounter: 0,\r\n\t\t\tisOpen: false,\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\titems: function (value, oldValue) {\r\n\t\t\tthis.isLoading = false\r\n\t\t\tthis.results = value\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tdocument.addEventListener('click', this.handleClickOutside)\r\n\t\tthis.filterResults()\r\n\t},\r\n\tdestroyed() {\r\n\t\tdocument.removeEventListener('click', this.handleClickOutside)\r\n\t},\r\n\tmethods: {\r\n\t\tsetResult(result) {\r\n\t\t\tthis.search = result\r\n\t\t\tthis.closeResults()\r\n\t\t},\r\n\t\tfilterResults() {\r\n\t\t\tthis.results = this.items.filter(item => {\r\n\t\t\t\treturn item.toLowerCase().indexOf(this.search.toLowerCase()) > -1\r\n\t\t\t})\r\n\t\t},\r\n\t\tonChange() {\r\n\t\t\tthis.isOpen = true\r\n\t\t\tif (this.isAsync) {\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tthis.$emit('filterChanged', this.search)\r\n\t\t\t} else {\r\n\t\t\t\tthis.filterResults()\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleClickOutside(event) {\r\n\t\t\tif (!this.$el.contains(event.target)) {\r\n\t\t\t\tthis.closeResults()\r\n\t\t\t\tthis.arrowCounter = 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloseResults() {\r\n\t\t\tthis.isOpen = false\r\n\r\n\t\t\tif (!this.items.includes(this.search)) {\r\n\t\t\t\tthis.search = ''\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('update:modelValue', this.search)\r\n\t\t},\r\n\t\tonArrowDown() {\r\n\t\t\tif (this.arrowCounter < this.results.length) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter + 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonArrowUp() {\r\n\t\t\tif (this.arrowCounter > 0) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter - 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.search = this.results[this.arrowCounter]\r\n\t\t\tthis.closeResults()\r\n\t\t\tthis.arrowCounter = 0\r\n\t\t},\r\n\t\topenWithSearch() {\r\n\t\t\tthis.search = ''\r\n\t\t\tthis.onChange()\r\n\t\t\tthis.$refs.mopInput.focus()\r\n\t\t},\r\n\t},\r\n})\r\n</script>\r\n\r\n<style>\r\n/* variables taken from here: https://github.com/frappe/frappe/blob/version-13/frappe/public/scss/common/awesomeplete.scss */\r\n.autocomplete {\r\n\tposition: relative;\r\n}\r\n\r\n.input-wrapper {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0.25rem 0.25rem 0 0;\r\n\tborder-bottom: none;\r\n}\r\n\r\nlabel {\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\n.autocomplete-results {\r\n\tposition: absolute;\r\n\twidth: calc(100% - 1ch + 1.5px);\r\n\tz-index: 1;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tcolor: #000000;\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0 0 0.25rem 0.25rem;\r\n\tborder-top: none;\r\n}\r\n\r\n.autocomplete-result {\r\n\tlist-style: none;\r\n\ttext-align: left;\r\n\tpadding: 4px 6px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.autocomplete-result.is-active,\r\n.autocomplete-result:hover {\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tcolor: #000000;\r\n}\r\n</style>\r\n","<template>\r\n\t<div class=\"autocomplete\" :class=\"{ isOpen: isOpen }\">\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<input\r\n\t\t\t\tref=\"mopInput\"\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\t@input=\"onChange\"\r\n\t\t\t\t@focus=\"onChange\"\r\n\t\t\t\tv-model=\"search\"\r\n\t\t\t\t@keydown.down=\"onArrowDown\"\r\n\t\t\t\t@keydown.up=\"onArrowUp\"\r\n\t\t\t\t@keydown.enter=\"onEnter\" />\r\n\t\t\t<ul id=\"autocomplete-results\" v-show=\"isOpen\" class=\"autocomplete-results\">\r\n\t\t\t\t<li class=\"loading autocomplete-result\" v-if=\"isLoading\">Loading results...</li>\r\n\t\t\t\t<li\r\n\t\t\t\t\tv-else\r\n\t\t\t\t\tv-for=\"(result, i) in results\"\r\n\t\t\t\t\t:key=\"i\"\r\n\t\t\t\t\t@click=\"setResult(result)\"\r\n\t\t\t\t\tclass=\"autocomplete-result\"\r\n\t\t\t\t\t:class=\"{ 'is-active': i === arrowCounter }\">\r\n\t\t\t\t\t{{ result }}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<label>{{ label }}</label>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({\r\n\tname: 'ADropdown',\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: '',\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tvalue: String,\r\n\t\titems: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: () => [],\r\n\t\t},\r\n\t\tisAsync: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: false,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t},\r\n\temits: ['update:modelValue', 'filterChanged'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tresults: [],\r\n\t\t\tsearch: this.modelValue,\r\n\t\t\tisLoading: false,\r\n\t\t\tarrowCounter: 0,\r\n\t\t\tisOpen: false,\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\titems: function (value, oldValue) {\r\n\t\t\tthis.isLoading = false\r\n\t\t\tthis.results = value\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tdocument.addEventListener('click', this.handleClickOutside)\r\n\t\tthis.filterResults()\r\n\t},\r\n\tdestroyed() {\r\n\t\tdocument.removeEventListener('click', this.handleClickOutside)\r\n\t},\r\n\tmethods: {\r\n\t\tsetResult(result) {\r\n\t\t\tthis.search = result\r\n\t\t\tthis.closeResults()\r\n\t\t},\r\n\t\tfilterResults() {\r\n\t\t\tthis.results = this.items.filter(item => {\r\n\t\t\t\treturn item.toLowerCase().indexOf(this.search.toLowerCase()) > -1\r\n\t\t\t})\r\n\t\t},\r\n\t\tonChange() {\r\n\t\t\tthis.isOpen = true\r\n\t\t\tif (this.isAsync) {\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tthis.$emit('filterChanged', this.search)\r\n\t\t\t} else {\r\n\t\t\t\tthis.filterResults()\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleClickOutside(event) {\r\n\t\t\tif (!this.$el.contains(event.target)) {\r\n\t\t\t\tthis.closeResults()\r\n\t\t\t\tthis.arrowCounter = 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloseResults() {\r\n\t\t\tthis.isOpen = false\r\n\r\n\t\t\tif (!this.items.includes(this.search)) {\r\n\t\t\t\tthis.search = ''\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('update:modelValue', this.search)\r\n\t\t},\r\n\t\tonArrowDown() {\r\n\t\t\tif (this.arrowCounter < this.results.length) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter + 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonArrowUp() {\r\n\t\t\tif (this.arrowCounter > 0) {\r\n\t\t\t\tthis.arrowCounter = this.arrowCounter - 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.search = this.results[this.arrowCounter]\r\n\t\t\tthis.closeResults()\r\n\t\t\tthis.arrowCounter = 0\r\n\t\t},\r\n\t\topenWithSearch() {\r\n\t\t\tthis.search = ''\r\n\t\t\tthis.onChange()\r\n\t\t\tthis.$refs.mopInput.focus()\r\n\t\t},\r\n\t},\r\n})\r\n</script>\r\n\r\n<style>\r\n/* variables taken from here: https://github.com/frappe/frappe/blob/version-13/frappe/public/scss/common/awesomeplete.scss */\r\n.autocomplete {\r\n\tposition: relative;\r\n}\r\n\r\n.input-wrapper {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0.25rem 0.25rem 0 0;\r\n\tborder-bottom: none;\r\n}\r\n\r\nlabel {\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\n.autocomplete-results {\r\n\tposition: absolute;\r\n\twidth: calc(100% - 1ch + 1.5px);\r\n\tz-index: 1;\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tcolor: #000000;\r\n\tborder: 1px solid var(--input-active-border-color);\r\n\tborder-radius: 0 0 0.25rem 0.25rem;\r\n\tborder-top: none;\r\n}\r\n\r\n.autocomplete-result {\r\n\tlist-style: none;\r\n\ttext-align: left;\r\n\tpadding: 4px 6px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.autocomplete-result.is-active,\r\n.autocomplete-result:hover {\r\n\tbackground-color: var(--row-color-zebra-light);\r\n\tcolor: #000000;\r\n}\r\n</style>\r\n","<template>\r\n\t<form>\r\n\t\t<component\r\n\t\t\tv-for=\"(componentObj, key) in modelValue\"\r\n\t\t\t:is=\"componentObj.component\"\r\n\t\t\t:key=\"key\"\r\n\t\t\t:schema=\"componentObj\"\r\n\t\t\tv-model=\"childModels[key].value\"\r\n\t\t\t:data=\"formData[componentObj.fieldname]\"\r\n\t\t\t:readonly=\"readonly\"\r\n\t\t\tv-bind=\"componentProps(componentObj)\">\r\n\t\t</component>\r\n\t</form>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue'\r\n\r\nimport { SchemaTypes } from 'types'\r\n\r\nconst props = defineProps<{\r\n\tmodelValue: SchemaTypes[]\r\n\tdata: Record<string, any>\r\n\treadonly?: boolean\r\n}>()\r\n\r\nconst emit = defineEmits(['update:modelValue'])\r\n\r\nconst formData = ref(props.data || {})\r\n\r\nconst componentProps = (componentObj: SchemaTypes) => {\r\n\tlet propsToPass = {}\r\n\tfor (const [key, value] of Object.entries(componentObj)) {\r\n\t\tif (!['component', 'fieldtype'].includes(key)) {\r\n\t\t\tpropsToPass[key] = value\r\n\t\t}\r\n\r\n\t\t// handle ATable data formats in case the table is nested under an AFormm;\r\n\t\t// TODO: there's probably a better way to do this\r\n\t\tif (key === 'rows') {\r\n\t\t\tif (value && (value as any[]).length === 0) {\r\n\t\t\t\tpropsToPass['rows'] = formData.value[componentObj.fieldname]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn propsToPass\r\n}\r\n\r\nconst childModels = computed({\r\n\tget: () => {\r\n\t\treturn props.modelValue.map((val, i) => {\r\n\t\t\treturn computed({\r\n\t\t\t\tget() {\r\n\t\t\t\t\treturn val.value\r\n\t\t\t\t},\r\n\t\t\t\tset: newValue => {\r\n\t\t\t\t\t// Find the component in modelValue and update it\r\n\t\t\t\t\tprops.modelValue[i].value = newValue\r\n\t\t\t\t\temit('update:modelValue', props.modelValue)\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tset: (/* newValue */) => {\r\n\t\t//emit('update:modelValue', '')\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\nform {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: flex-start;\r\n\talign-items: baseline;\r\n}\r\n</style>\r\n","<template>\r\n\t<fieldset>\r\n\t\t<legend @click=\"toggleCollapse\" @submit=\"toggleCollapse\">\r\n\t\t\t{{ label }}\r\n\t\t\t<CollapseButton v-if=\"collapsible\" :collapsed=\"collapsed\" />\r\n\t\t</legend>\r\n\t\t<slot :collapsed=\"collapsed\">\r\n\t\t\t<AForm v-show=\"!collapsed\" v-model=\"formSchema\" :data=\"formData\" />\r\n\t\t</slot>\r\n\t</fieldset>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\n\r\nimport CollapseButton from '@/components/base/CollapseButton.vue'\r\nimport AForm from '@/components/AForm.vue'\r\nimport { SchemaTypes } from 'types/index'\r\n\r\nconst props = defineProps<{\r\n\tschema: SchemaTypes[]\r\n\tlabel: string\r\n\tcollapsible?: boolean\r\n\tdata?: any\r\n}>()\r\n\r\nconst formData = ref(props.data || [])\r\nlet collapsed = ref(false)\r\nlet collapsible = ref(props.collapsible)\r\n\r\nconst formSchema = ref(props.schema)\r\nfunction toggleCollapse(event: Event) {\r\n\tevent.preventDefault()\r\n\tif (!collapsible.value) {\r\n\t\treturn\r\n\t}\r\n\tcollapsed.value = !collapsed.value\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nfieldset {\r\n\tmax-width: 100%;\r\n\twidth: 100%;\r\n\tmargin-right: 2ch;\r\n\tborder: 1px solid transparent;\r\n\tborder-bottom: 1px solid var(--gray-50);\r\n}\r\n\r\nlegend {\r\n\twidth: 100%;\r\n\theight: 1.15rem;\r\n\tborder: 1px solid transparent;\r\n\tpadding-bottom: 0.5rem;\r\n\tfont-size: 110%;\r\n\tfont-weight: 600;\r\n\tuser-select: none;\r\n}\r\n\r\n.collapse-button {\r\n\tfloat: right;\r\n}\r\n</style>\r\n","<template>\r\n\t<div>\r\n\t\t<input v-model=\"inputNumber\" type=\"number\" :id=\"uuid\" :disabled=\"readonly\" :required=\"required\" />\r\n\t\t<label :for=\"uuid\">{{ label }}</label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nwithDefaults(\r\n\tdefineProps<{\r\n\t\tlabel: string\r\n\t\trequired?: boolean\r\n\t\treadonly?: boolean\r\n\t\tuuid?: string\r\n\t\tvalidation?: Record<string, any>\r\n\t}>(),\r\n\t{\r\n\t\tvalidation: () => ({ errorMessage: '&nbsp;' }),\r\n\t}\r\n)\r\n\r\nconst inputNumber = defineModel<number>()\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\nlabel {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\ninput:focus + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n</style>\r\n","import type { FormSchema } from 'types'\r\nimport { DirectiveBinding } from 'vue'\r\n\r\nconst NAMED_MASKS = {\r\n\tdate: '##/##/####',\r\n\tdatetime: '####/##/## ##:##',\r\n\ttime: '##:##',\r\n\tfulltime: '##:##:##',\r\n\tphone: '(###) ### - ####',\r\n\tcard: '#### #### #### ####',\r\n}\r\n\r\nfunction extractMaskFn(mask: string): ((args: any) => string) | void {\r\n\ttry {\r\n\t\t// eslint-disable-next-line @typescript-eslint/no-implied-eval\r\n\t\treturn Function(`\"use strict\";return (${mask})`)()\r\n\t} catch (error) {\r\n\t\tif (error instanceof ReferenceError) {\r\n\t\t\t// assume mask is a string\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction getMask(binding: DirectiveBinding<string>) {\r\n\tlet mask = binding.value\r\n\r\n\tif (mask) {\r\n\t\tconst maskFn = extractMaskFn(mask)\r\n\t\tif (maskFn) {\r\n\t\t\t// TODO: (state) replace with state management;\r\n\t\t\t// pass the entire form/table data to the function\r\n\t\t\tconst locale = binding.instance['locale']\r\n\t\t\tmask = maskFn(locale)\r\n\t\t}\r\n\t} else {\r\n\t\t// TODO: (state) handle using state management\r\n\t\tconst schema: FormSchema = binding.instance['schema']\r\n\t\tconst fieldType: string | undefined = schema.fieldtype?.toLowerCase()\r\n\t\tif (fieldType && NAMED_MASKS[fieldType]) {\r\n\t\t\tmask = NAMED_MASKS[fieldType]\r\n\t\t}\r\n\t}\r\n\r\n\treturn mask\r\n}\r\n\r\nfunction unmaskInput(input: string, maskToken?: string) {\r\n\tif (!maskToken) {\r\n\t\tmaskToken = '#'\r\n\t}\r\n\r\n\tlet unmaskedInput = input\r\n\tconst maskChars = [maskToken, '/', '-', '(', ')', ' ']\r\n\r\n\tfor (const char of maskChars) {\r\n\t\tunmaskedInput = unmaskedInput.replaceAll(char, '')\r\n\t}\r\n\r\n\treturn unmaskedInput\r\n}\r\n\r\nfunction fillMask(input: string, mask: string, maskToken?: string) {\r\n\tif (!maskToken) {\r\n\t\tmaskToken = '#'\r\n\t}\r\n\r\n\tlet replacement = mask\r\n\tfor (const inputChar of input) {\r\n\t\tconst replaceIndex = replacement.indexOf(maskToken)\r\n\t\tif (replaceIndex !== -1) {\r\n\t\t\tconst prefix = replacement.substring(0, replaceIndex)\r\n\t\t\tconst suffix = replacement.substring(replaceIndex + 1)\r\n\t\t\treplacement = prefix + inputChar + suffix\r\n\t\t}\r\n\t}\r\n\r\n\treturn replacement.slice(0, mask.length)\r\n}\r\n\r\nexport function useStringMask(el: HTMLInputElement, binding: DirectiveBinding<string>) {\r\n\tconst mask = getMask(binding)\r\n\tif (!mask) return\r\n\r\n\tconst maskToken = '#'\r\n\tconst inputText = el.value\r\n\r\n\t// process input value with mask\r\n\tconst unmaskedInput = unmaskInput(inputText, maskToken)\r\n\tif (unmaskedInput) {\r\n\t\tconst replacement = fillMask(unmaskedInput, mask, maskToken)\r\n\r\n\t\t// TODO: (state) this is very opinionated;\r\n\t\t// most likely fixed with state management;\r\n\t\t// a better way could be to emit back to instance;\r\n\r\n\t\tif (binding.instance['maskFilled']) {\r\n\t\t\tbinding.instance['maskFilled'] = !replacement.includes(maskToken)\r\n\t\t}\r\n\r\n\t\tel.value = replacement\r\n\t} else {\r\n\t\tel.value = mask\r\n\t}\r\n}\r\n","<template>\r\n\t<div>\r\n\t\t<input\r\n\t\t\tv-model=\"inputText\"\r\n\t\t\t:id=\"uuid\"\r\n\t\t\t:disabled=\"readonly\"\r\n\t\t\t:maxlength=\"mask ? maskFilled && mask.length : undefined\"\r\n\t\t\t:required=\"required\"\r\n\t\t\tv-mask=\"mask\" />\r\n\t\t<label :for=\"uuid\">{{ label }} </label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, PropType, ref, computed } from 'vue'\r\n\r\nimport { FormSchema } from 'types'\r\nimport { useStringMask } from '@/directives/mask'\r\n\r\n// TODO: when moving to composition API, figure out how to provide mask\r\n// as a custom directive\r\nexport default defineComponent({\r\n\tname: 'ATextInput',\r\n\tprops: {\r\n\t\tschema: {\r\n\t\t\ttype: Object as PropType<FormSchema>,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tmodelValue: {\r\n\t\t\ttype: null as unknown as PropType<string | number>,\r\n\t\t},\r\n\t\tmask: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\trequired: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\treadonly: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\tuuid: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\tvalidation: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({ errorMessage: '&nbsp;' }),\r\n\t\t},\r\n\t},\r\n\tsetup(props, context) {\r\n\t\tconst maskFilled = ref(false)\r\n\r\n\t\t// TODO: (state) replace with state management\r\n\t\tconst locale = inject<string>('locale', '')\r\n\r\n\t\tconst inputText = computed({\r\n\t\t\tget() {\r\n\t\t\t\treturn props.modelValue\r\n\t\t\t},\r\n\t\t\tset(newValue) {\r\n\t\t\t\tcontext.emit('update:modelValue', newValue)\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn { inputText, locale, maskFilled }\r\n\t},\r\n\tdirectives: {\r\n\t\tmask: useStringMask,\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\nlabel {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\ninput:focus + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n</style>\r\n","<template>\r\n\t<div>\r\n\t\t<input\r\n\t\t\tv-model=\"inputText\"\r\n\t\t\t:id=\"uuid\"\r\n\t\t\t:disabled=\"readonly\"\r\n\t\t\t:maxlength=\"mask ? maskFilled && mask.length : undefined\"\r\n\t\t\t:required=\"required\"\r\n\t\t\tv-mask=\"mask\" />\r\n\t\t<label :for=\"uuid\">{{ label }} </label>\r\n\t\t<p v-show=\"validation.errorMessage\" v-html=\"validation.errorMessage\"></p>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, PropType, ref, computed } from 'vue'\r\n\r\nimport { FormSchema } from 'types'\r\nimport { useStringMask } from '@/directives/mask'\r\n\r\n// TODO: when moving to composition API, figure out how to provide mask\r\n// as a custom directive\r\nexport default defineComponent({\r\n\tname: 'ATextInput',\r\n\tprops: {\r\n\t\tschema: {\r\n\t\t\ttype: Object as PropType<FormSchema>,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tmodelValue: {\r\n\t\t\ttype: null as unknown as PropType<string | number>,\r\n\t\t},\r\n\t\tmask: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\trequired: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\treadonly: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\tuuid: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\tvalidation: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({ errorMessage: '&nbsp;' }),\r\n\t\t},\r\n\t},\r\n\tsetup(props, context) {\r\n\t\tconst maskFilled = ref(false)\r\n\r\n\t\t// TODO: (state) replace with state management\r\n\t\tconst locale = inject<string>('locale', '')\r\n\r\n\t\tconst inputText = computed({\r\n\t\t\tget() {\r\n\t\t\t\treturn props.modelValue\r\n\t\t\t},\r\n\t\t\tset(newValue) {\r\n\t\t\t\tcontext.emit('update:modelValue', newValue)\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\treturn { inputText, locale, maskFilled }\r\n\t},\r\n\tdirectives: {\r\n\t\tmask: useStringMask,\r\n\t},\r\n})\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tmin-width: 40ch;\r\n\tborder: 1px solid transparent;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tmargin-right: 1ch;\r\n}\r\n\r\ninput {\r\n\twidth: calc(100% - 1ch);\r\n\toutline: 1px solid transparent;\r\n\tborder: 1px solid var(--input-border-color);\r\n\tpadding: 1ch 0.5ch 0.5ch 1ch;\r\n\tmargin: calc(1.15rem / 2) 0 0 0;\r\n\tmin-height: 1.15rem;\r\n\tborder-radius: 0.25rem;\r\n}\r\n\r\np,\r\nlabel {\r\n\tcolor: var(--input-label-color);\r\n\tdisplay: block;\r\n\tmin-height: 1.15rem;\r\n\tpadding: 0rem;\r\n\tmargin: 0rem;\r\n\tborder: 1px solid transparent;\r\n\tmargin-bottom: 0.25rem;\r\n}\r\n\r\np {\r\n\twidth: 100%;\r\n\tcolor: red;\r\n\tfont-size: 85%;\r\n}\r\n\r\nlabel {\r\n\tz-index: 2;\r\n\tfont-size: 80%;\r\n\tposition: absolute;\r\n\tbackground: white;\r\n\tmargin: calc(-1.5rem - calc(2.15rem / 2)) 0 0 1ch;\r\n\tpadding: 0 0.25ch 0 0.25ch;\r\n}\r\n\r\ninput:focus {\r\n\tborder: 1px solid var(--input-active-border-color);\r\n}\r\n\r\ninput:focus + label {\r\n\tcolor: var(--input-active-label-color);\r\n}\r\n</style>\r\n","import { App } from 'vue'\r\n\r\nimport ACheckbox from '@/components/form/ACheckbox.vue'\r\nimport AComboBox from '@/components/form/AComboBox.vue'\r\nimport ADate from '@/components/form/ADate.vue'\r\nimport ADropdown from '@/components/form/ADropdown.vue'\r\nimport AFieldset from '@/components/form/AFieldset.vue'\r\nimport AForm from '@/components/AForm.vue'\r\nimport ANumericInput from '@/components/form/ANumericInput.vue'\r\nimport ATextInput from '@/components/form/ATextInput.vue'\r\n// import { ACurrency } from '@/components/form/ACurrency.vue'\r\n// import { AQuantity } from '@/components/form/AQuantity.vue'\r\n\r\nfunction install(app: App /* options */) {\r\n\tapp.component('ACheckbox', ACheckbox)\r\n\tapp.component('ACombobox', AComboBox)\r\n\tapp.component('ADate', ADate)\r\n\tapp.component('ADropdown', ADropdown)\r\n\tapp.component('AFieldset', AFieldset)\r\n\tapp.component('AForm', AForm)\r\n\tapp.component('ANumericInput', ANumericInput)\r\n\tapp.component('ATextInput', ATextInput)\r\n\t// app.component('ACurrency', ACurrency)\r\n\t// app.component('AQuantity', AQuantity)\r\n}\r\n\r\nexport { ACheckbox, AComboBox, ADate, ADropdown, AFieldset, AForm, ANumericInput, ATextInput, install }\r\n"],"names":["checkbox","_useModel","__props","v","M","F","j","H","Q","q","G","U","K","y","r","N","z","n","o","l","s","c","a","p","i","C","D","d","O","T","J","B","P","X","I","Y","Z","_","ee","te","f","u","A","E","t","ne","w","x","re","k","h","S","b","L","R","m","oe","le","ie","$","W","V","numberOfRows","numberOfColumns","props","tableData","inject","todaysDate","selectedDate","ref","currentMonth","currentYear","currentDates","onMounted","cellDate","renderMonth","nextTick","$selectedDate","$todaysDate","watch","firstOfMonth","monthStartWeekday","calendarStartDay","dayIndex","previousYear","nextYear","previousMonth","nextMonth","isTodaysDate","day","isSelectedDate","selectDate","event","currentIndex","updateData","monthAndYear","computed","useKeyboardNav","defaultKeypressHandlers","_sfc_main$5","defineComponent","value","oldValue","result","item","_hoisted_1","_hoisted_2","_hoisted_3","_sfc_render","_ctx","_cache","$props","$setup","$data","isOpen","_normalizeClass","_createElementVNode","_withDirectives","search","args","$event","_withKeys","_vModelText","_openBlock","_createElementBlock","_Fragment","_renderList","setResult","_vShow","emit","__emit","formData","componentProps","componentObj","propsToPass","key","childModels","val","newValue","collapsed","collapsible","formSchema","toggleCollapse","inputNumber","NAMED_MASKS","extractMaskFn","mask","getMask","binding","maskFn","locale","fieldType","_a","unmaskInput","input","maskToken","unmaskedInput","maskChars","char","fillMask","replacement","inputChar","replaceIndex","prefix","suffix","useStringMask","el","inputText","_sfc_main","context","maskFilled","_resolveDirective","required","_directive_mask","validation","_toDisplayString","install","app","ACheckbox","AComboBox","ADate","ADropdown","AFieldset","AForm","ANumericInput","ATextInput"],"mappings":"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"}