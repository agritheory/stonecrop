{"version":3,"file":"atable.js","sources":["../../utilities/dist/utilities.js","../src/components/ACell.vue","../src/components/AExpansionRow.vue","../src/components/ARow.vue","../../common/temp/node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/rng.js","../../common/temp/node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/stringify.js","../../common/temp/node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/native.js","../../common/temp/node_modules/.pnpm/uuid@9.0.0/node_modules/uuid/dist/esm-browser/v4.js","../src/components/index.ts","../src/components/ATableHeader.vue","../src/components/ATableModal.vue","../src/components/ATable.vue","../src/index.ts"],"sourcesContent":["import { unref as Q, getCurrentScope as U, onScopeDispose as K, ref as B, watch as D, onMounted as W, onBeforeUnmount as V } from \"vue\";\nvar v;\nconst M = typeof window < \"u\", F = (e) => typeof e == \"string\", j = () => {\n};\nM && ((v = window == null ? void 0 : window.navigator) != null && v.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);\nfunction H(e) {\n  return typeof e == \"function\" ? e() : Q(e);\n}\nfunction q(e) {\n  return e;\n}\nfunction G(e) {\n  return U() ? (K(e), !0) : !1;\n}\nfunction y(e) {\n  var t;\n  const r = H(e);\n  return (t = r == null ? void 0 : r.$el) != null ? t : r;\n}\nconst N = M ? window : void 0;\nfunction z(...e) {\n  let t, r, n, o;\n  if (F(e[0]) || Array.isArray(e[0]) ? ([r, n, o] = e, t = N) : [t, r, n, o] = e, !t)\n    return j;\n  Array.isArray(r) || (r = [r]), Array.isArray(n) || (n = [n]);\n  const l = [], s = () => {\n    l.forEach((c) => c()), l.length = 0;\n  }, a = (c, g, p, i) => (c.addEventListener(g, p, i), () => c.removeEventListener(g, p, i)), C = D(() => [y(t), H(o)], ([c, g]) => {\n    s(), c && l.push(...r.flatMap((p) => n.map((i) => a(c, p, i, g))));\n  }, { immediate: !0, flush: \"post\" }), d = () => {\n    C(), s();\n  };\n  return G(d), d;\n}\nconst O = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {}, T = \"__vueuse_ssr_handlers__\";\nO[T] = O[T] || {};\nfunction J(e, { window: t = N, scrollTarget: r } = {}) {\n  const n = B(!1), o = () => {\n    if (!t)\n      return;\n    const l = t.document, s = y(e);\n    if (!s)\n      n.value = !1;\n    else {\n      const a = s.getBoundingClientRect();\n      n.value = a.top <= (t.innerHeight || l.documentElement.clientHeight) && a.left <= (t.innerWidth || l.documentElement.clientWidth) && a.bottom >= 0 && a.right >= 0;\n    }\n  };\n  return D(() => y(e), () => o(), { immediate: !0, flush: \"post\" }), t && z(r || t, \"scroll\", o, {\n    capture: !1,\n    passive: !0\n  }), n;\n}\nvar P;\n(function(e) {\n  e.UP = \"UP\", e.RIGHT = \"RIGHT\", e.DOWN = \"DOWN\", e.LEFT = \"LEFT\", e.NONE = \"NONE\";\n})(P || (P = {}));\nvar X = Object.defineProperty, I = Object.getOwnPropertySymbols, Y = Object.prototype.hasOwnProperty, Z = Object.prototype.propertyIsEnumerable, _ = (e, t, r) => t in e ? X(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, ee = (e, t) => {\n  for (var r in t || (t = {}))\n    Y.call(t, r) && _(e, r, t[r]);\n  if (I)\n    for (var r of I(t))\n      Z.call(t, r) && _(e, r, t[r]);\n  return e;\n};\nconst te = {\n  easeInSine: [0.12, 0, 0.39, 0],\n  easeOutSine: [0.61, 1, 0.88, 1],\n  easeInOutSine: [0.37, 0, 0.63, 1],\n  easeInQuad: [0.11, 0, 0.5, 0],\n  easeOutQuad: [0.5, 1, 0.89, 1],\n  easeInOutQuad: [0.45, 0, 0.55, 1],\n  easeInCubic: [0.32, 0, 0.67, 0],\n  easeOutCubic: [0.33, 1, 0.68, 1],\n  easeInOutCubic: [0.65, 0, 0.35, 1],\n  easeInQuart: [0.5, 0, 0.75, 0],\n  easeOutQuart: [0.25, 1, 0.5, 1],\n  easeInOutQuart: [0.76, 0, 0.24, 1],\n  easeInQuint: [0.64, 0, 0.78, 0],\n  easeOutQuint: [0.22, 1, 0.36, 1],\n  easeInOutQuint: [0.83, 0, 0.17, 1],\n  easeInExpo: [0.7, 0, 0.84, 0],\n  easeOutExpo: [0.16, 1, 0.3, 1],\n  easeInOutExpo: [0.87, 0, 0.13, 1],\n  easeInCirc: [0.55, 0, 1, 0.45],\n  easeOutCirc: [0, 0.55, 0.45, 1],\n  easeInOutCirc: [0.85, 0, 0.15, 1],\n  easeInBack: [0.36, 0, 0.66, -0.56],\n  easeOutBack: [0.34, 1.56, 0.64, 1],\n  easeInOutBack: [0.68, -0.6, 0.32, 1.6]\n};\nee({\n  linear: q\n}, te);\nconst f = (e) => {\n  let t = J(e).value;\n  return t = t && e.offsetHeight > 0, t;\n}, u = (e) => e.tabIndex >= 0, A = (e) => {\n  const t = e.target;\n  return E(t);\n}, E = (e) => {\n  var r;\n  let t;\n  if (e instanceof HTMLTableCellElement) {\n    const n = (r = e.parentElement) == null ? void 0 : r.previousElementSibling;\n    if (n) {\n      const l = Array.from(n.children)[e.cellIndex];\n      l && (t = l);\n    }\n  } else if (e instanceof HTMLTableRowElement) {\n    const n = e.previousElementSibling;\n    n && (t = n);\n  }\n  return t && (!u(t) || !f(t)) ? E(t) : t;\n}, ne = (e) => {\n  var n;\n  const t = e.target;\n  let r;\n  if (t instanceof HTMLTableCellElement) {\n    const o = (n = t.parentElement) == null ? void 0 : n.parentElement;\n    if (o) {\n      const s = o.firstElementChild.children[t.cellIndex];\n      s && (r = s);\n    }\n  } else if (t instanceof HTMLTableRowElement) {\n    const o = t.parentElement;\n    if (o) {\n      const l = o.firstElementChild;\n      l && (r = l);\n    }\n  }\n  return r && (!u(r) || !f(r)) ? w(r) : r;\n}, x = (e) => {\n  const t = e.target;\n  return w(t);\n}, w = (e) => {\n  var r;\n  let t;\n  if (e instanceof HTMLTableCellElement) {\n    const n = (r = e.parentElement) == null ? void 0 : r.nextElementSibling;\n    if (n) {\n      const l = Array.from(n.children)[e.cellIndex];\n      l && (t = l);\n    }\n  } else if (e instanceof HTMLTableRowElement) {\n    const n = e.nextElementSibling;\n    n && (t = n);\n  }\n  return t && (!u(t) || !f(t)) ? w(t) : t;\n}, re = (e) => {\n  var n;\n  const t = e.target;\n  let r;\n  if (t instanceof HTMLTableCellElement) {\n    const o = (n = t.parentElement) == null ? void 0 : n.parentElement;\n    if (o) {\n      const s = o.lastElementChild.children[t.cellIndex];\n      s && (r = s);\n    }\n  } else if (t instanceof HTMLTableRowElement) {\n    const o = t.parentElement;\n    if (o) {\n      const l = o.lastElementChild;\n      l && (r = l);\n    }\n  }\n  return r && (!u(r) || !f(r)) ? E(r) : r;\n}, k = (e) => {\n  const t = e.target;\n  return h(t);\n}, h = (e) => {\n  var r;\n  let t;\n  if (e.previousElementSibling)\n    t = e.previousElementSibling;\n  else {\n    const n = (r = e.parentElement) == null ? void 0 : r.previousElementSibling;\n    t = n == null ? void 0 : n.lastElementChild;\n  }\n  return t && (!u(t) || !f(t)) ? h(t) : t;\n}, S = (e) => {\n  const t = e.target;\n  return b(t);\n}, b = (e) => {\n  var r;\n  let t;\n  if (e.nextElementSibling)\n    t = e.nextElementSibling;\n  else {\n    const n = (r = e.parentElement) == null ? void 0 : r.nextElementSibling;\n    t = n == null ? void 0 : n.firstElementChild;\n  }\n  return t && (!u(t) || !f(t)) ? b(t) : t;\n}, L = (e) => {\n  const n = e.target.parentElement.firstElementChild;\n  return n && (!u(n) || !f(n)) ? b(n) : n;\n}, R = (e) => {\n  const n = e.target.parentElement.lastElementChild;\n  return n && (!u(n) || !f(n)) ? h(n) : n;\n}, m = [\"alt\", \"control\", \"shift\", \"meta\"], oe = {\n  ArrowUp: \"up\",\n  ArrowDown: \"down\",\n  ArrowLeft: \"left\",\n  ArrowRight: \"right\"\n}, le = {\n  \"keydown.up\": (e) => {\n    const t = A(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.down\": (e) => {\n    const t = x(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.left\": (e) => {\n    const t = k(e);\n    e.preventDefault(), e.stopPropagation(), t && t.focus();\n  },\n  \"keydown.right\": (e) => {\n    const t = S(e);\n    e.preventDefault(), e.stopPropagation(), t && t.focus();\n  },\n  \"keydown.control.up\": (e) => {\n    const t = ne(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.down\": (e) => {\n    const t = re(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.left\": (e) => {\n    const t = L(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.control.right\": (e) => {\n    const t = R(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.end\": (e) => {\n    const t = R(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.enter\": (e) => {\n    if (e.target instanceof HTMLTableCellElement) {\n      e.preventDefault(), e.stopPropagation();\n      const r = x(e);\n      r && r.focus();\n    }\n  },\n  \"keydown.shift.enter\": (e) => {\n    if (e.target instanceof HTMLTableCellElement) {\n      e.preventDefault(), e.stopPropagation();\n      const r = A(e);\n      r && r.focus();\n    }\n  },\n  \"keydown.home\": (e) => {\n    const t = L(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.tab\": (e) => {\n    const t = S(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  },\n  \"keydown.shift.tab\": (e) => {\n    const t = k(e);\n    t && (e.preventDefault(), e.stopPropagation(), t.focus());\n  }\n};\nfunction ie(e) {\n  const t = (n) => {\n    let o = null;\n    n.parent && (typeof n.parent == \"string\" ? o = document.querySelector(n.parent) : n.parent instanceof Element ? o = n.parent : o = n.parent.value);\n    let l = [];\n    if (n.selectors)\n      if (typeof n.selectors == \"string\")\n        l = o ? Array.from(o.querySelectorAll(n.selectors)) : Array.from(document.querySelectorAll(n.selectors));\n      else if (n.selectors instanceof Element)\n        l.push(n.selectors);\n      else if (Array.isArray(n.selectors.value))\n        for (const s of n.selectors.value)\n          s instanceof Element ? l.push(s) : l.push(s.$el);\n      else\n        l.push(n.selectors.value);\n    else\n      l = Array.from(o.children).filter((a) => u(a) && f(a));\n    return l;\n  }, r = (n) => (o) => {\n    const l = oe[o.key] || o.key.toLowerCase();\n    if (m.includes(l))\n      return;\n    const s = n.handlers || le;\n    for (const a of Object.keys(s)) {\n      const [C, ...d] = a.split(\".\");\n      if (C === \"keydown\" && d.includes(l)) {\n        const c = s[a], g = d.filter((i) => m.includes(i)), p = m.some((i) => {\n          const $ = i.charAt(0).toUpperCase() + i.slice(1);\n          return o.getModifierState($);\n        });\n        if (g.length > 0) {\n          if (p) {\n            for (const i of m)\n              if (d.includes(i)) {\n                const $ = i.charAt(0).toUpperCase() + i.slice(1);\n                o.getModifierState($) && c(o);\n              }\n          }\n        } else\n          p || c(o);\n      }\n    }\n  };\n  W(() => {\n    for (const n of e) {\n      const o = t(n);\n      for (const l of o)\n        l.addEventListener(\"keydown\", r(n));\n    }\n  }), V(() => {\n    for (const n of e) {\n      const o = t(n);\n      for (const l of o)\n        l.removeEventListener(\"keydown\", r(n));\n    }\n  });\n}\nfunction ae(e) {\n}\nexport {\n  le as defaultKeypressHandlers,\n  ae as install,\n  ie as useKeyboardNav\n};\n//# sourceMappingURL=utilities.js.map\n","<template>\n\t<td\n\t\tref=\"cell\"\n\t\t:data-colindex=\"colIndex\"\n\t\t:data-rowindex=\"rowIndex\"\n\t\t:data-editable=\"tableData.columns[colIndex].edit\"\n\t\t:contenteditable=\"tableData.columns[colIndex].edit\"\n\t\t:tabindex=\"tabIndex\"\n\t\t:spellcheck=\"false\"\n\t\t:style=\"cellStyle\"\n\t\t@focus=\"onFocus\"\n\t\t@paste=\"onChange\"\n\t\t@blur=\"onChange\"\n\t\t@input=\"onChange\"\n\t\t@click=\"handleInput\"\n\t\t@mousedown=\"handleInput\">\n\t\t<component\n\t\t\tv-if=\"tableData.columns[colIndex].cellComponent\"\n\t\t\t:is=\"tableData.columns[colIndex].cellComponent\"\n\t\t\t:value=\"displayValue\"\n\t\t\tv-bind=\"tableData.columns[colIndex].cellComponentProps\">\n\t\t</component>\n\t\t<span v-else>{{ displayValue }}</span>\n\t</td>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, CSSProperties, inject, ref } from 'vue'\n\nimport { defaultKeypressHandlers, useKeyboardNav } from '@agritheory/utilities'\nimport TableDataStore from '.'\n\nconst props = withDefaults(\n\tdefineProps<{\n\t\tcolIndex: number\n\t\trowIndex: number\n\t\ttableid: string\n\t\taddNavigation?: boolean | object\n\t\ttabIndex?: number\n\t\tclickHandler?: (event: MouseEvent) => void\n\t}>(),\n\t{\n\t\ttabIndex: 0,\n\t\taddNavigation: true,\n\t}\n)\n\nconst tableData = inject<TableDataStore>(props.tableid)\nconst cell = ref<HTMLTableCellElement>(null)\n\nlet cellModified = ref(false)\nconst displayValue = computed(() => {\n\tconst data = tableData.cellData<any>(props.colIndex, props.rowIndex)\n\tif (tableData.columns[props.colIndex].format) {\n\t\tconst format = tableData.columns[props.colIndex].format\n\t\tif (typeof format === 'function') {\n\t\t\treturn format(data)\n\t\t} else if (typeof format === 'string') {\n\t\t\t// parse format function from string\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-implied-eval\n\t\t\tconst formatFn: (args: any) => any = Function(`\"use strict\";return (${format})`)()\n\t\t\treturn formatFn(data)\n\t\t} else {\n\t\t\treturn data\n\t\t}\n\t} else {\n\t\treturn data\n\t}\n})\n\nconst handleInput = (event: MouseEvent) => {\n\t// Not sure if click handler is needed anymore?\n\tif (props.clickHandler) {\n\t\tprops.clickHandler(event)\n\t\treturn\n\t}\n\n\tif (tableData.columns[props.colIndex].mask) {\n\t\t// TODO: add masking to cell values\n\t\t// tableData.columns[props.colIndex].mask(event)\n\t}\n\n\tif (tableData.columns[props.colIndex].modalComponent) {\n\t\tconst domRect = cell.value.getBoundingClientRect()\n\t\ttableData.modal.visible = true\n\t\ttableData.modal.colIndex = props.colIndex\n\t\ttableData.modal.rowIndex = props.rowIndex\n\t\ttableData.modal.parent = cell.value\n\t\ttableData.modal.top = domRect.top + domRect.height\n\t\ttableData.modal.left = domRect.left\n\t\ttableData.modal.width = cellWidth.value\n\t\ttableData.modal.component = tableData.columns[props.colIndex].modalComponent\n\t\ttableData.modal.componentProps = tableData.columns[props.colIndex].modalComponentProps\n\t}\n}\n\nif (props.addNavigation) {\n\tlet handlers = {\n\t\t...defaultKeypressHandlers,\n\t\t...{\n\t\t\t'keydown.f2': handleInput,\n\t\t\t'keydown.alt.up': handleInput,\n\t\t\t'keydown.alt.down': handleInput,\n\t\t\t'keydown.alt.left': handleInput,\n\t\t\t'keydown.alt.right': handleInput,\n\t\t},\n\t}\n\n\tif (typeof props.addNavigation === 'object') {\n\t\thandlers = {\n\t\t\t...handlers,\n\t\t\t...props.addNavigation,\n\t\t}\n\t}\n\n\tuseKeyboardNav([\n\t\t{\n\t\t\tselectors: cell,\n\t\t\thandlers: handlers,\n\t\t},\n\t])\n}\n\n// const updateData = (event: Event) => {\n// \tif (event) {\n// \t\t// custom components need to handle their own updateData, this is the default\n// \t\tif (!tableData.columns[props.colIndex].component) {\n// \t\t\ttableData.setCellData(props.rowIndex, props.colIndex, cell.value.innerHTML)\n// \t\t}\n// \t\tcellModified.value = true\n// \t}\n// }\n\nconst textAlign = computed(() => {\n\treturn tableData.columns[props.colIndex].align || 'center'\n})\n\nconst cellWidth = computed(() => {\n\treturn tableData.columns[props.colIndex].width || '40ch'\n})\n\nlet currentData = ''\nconst onFocus = () => {\n\tif (cell.value) {\n\t\tcurrentData = cell.value.innerText\n\t}\n}\n\nconst onChange = () => {\n\tif (cell.value) {\n\t\tif (cell.value.innerHTML !== currentData) {\n\t\t\tcurrentData = cell.value.innerText\n\t\t\tcell.value.dispatchEvent(new Event('change'))\n\t\t\tcellModified.value = true // set display instead\n\t\t\tif (!tableData.columns[props.colIndex].format) {\n\t\t\t\t// TODO: need to setup reverse format function\n\t\t\t\ttableData.setCellData(props.rowIndex, props.colIndex, currentData)\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst getIndent = (colKey: number, indent: number) => {\n\tif (indent && colKey === 0 && indent > 0) {\n\t\treturn `${indent}ch`\n\t} else {\n\t\treturn 'inherit'\n\t}\n}\n\nconst cellStyle: CSSProperties = {\n\ttextAlign: textAlign.value,\n\twidth: cellWidth.value,\n\tbackgroundColor: !cellModified.value ? 'inherit' : 'var(--cell-modified-color)',\n\tfontWeight: !cellModified.value ? 'inherit' : 'bold',\n\tpaddingLeft: getIndent(props.colIndex, tableData.display[props.rowIndex]?.indent),\n}\n</script>\n\n<style scoped>\n@import url('@agritheory/themes/default/default.css');\ntd {\n\tborder-radius: 0px;\n\tbox-sizing: border-box;\n\tmargin: 0px;\n\toutline: none;\n\tbox-shadow: none;\n\tcolor: var(--cell-text-color);\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\tpadding-left: 0.5ch !important;\n\tpadding-right: 0.5ch;\n\n\tpadding-top: var(--atable-row-padding);\n\tpadding-bottom: var(--atable-row-padding);\n\n\tborder-spacing: 0px;\n\tborder-collapse: collapse;\n}\n\ntd:focus,\ntd:focus-within {\n\tbackground-color: var(--focus-cell-background);\n\toutline-width: 2px;\n\toutline-style: solid;\n\toutline-color: var(--focus-cell-outline);\n\tbox-shadow: none;\n\toverflow: hidden;\n\tmin-height: 1.15em;\n\tmax-height: 1.15em;\n\toverflow: hidden;\n}\n</style>\n","<template>\n\t<tr v-bind=\"$attrs\" ref=\"rowEl\" :tabindex=\"tabIndex\" class=\"expandable-row\">\n\t\t<td :tabIndex=\"-1\" @click=\"tableData.toggleRowExpand(rowIndex)\" class=\"row-index\">\n\t\t\t{{ getRowExpandSymbol() }}\n\t\t</td>\n\t\t<slot name=\"row\" />\n\t</tr>\n\t<tr v-if=\"tableData.display[props.rowIndex].expanded\" ref=\"rowExpanded\" :tabindex=\"tabIndex\" class=\"expanded-row\">\n\t\t<td :tabIndex=\"-1\" :colspan=\"tableData.columns.length + 1\" class=\"expanded-row-content\">\n\t\t\t<slot name=\"content\" />\n\t\t</td>\n\t</tr>\n</template>\n\n<script setup lang=\"ts\">\nimport { TableRow } from 'types'\nimport { inject, ref } from 'vue'\n\nimport { useKeyboardNav } from '@agritheory/utilities'\n\nimport TableDataStore from '.'\n\nconst props = withDefaults(\n\tdefineProps<{\n\t\trow: TableRow\n\t\trowIndex: number\n\t\ttableid: string\n\t\ttabIndex?: number\n\t\taddNavigation?: {\n\t\t\t[key: string]: (ev: KeyboardEvent) => any\n\t\t}\n\t}>(),\n\t{\n\t\ttabIndex: -1,\n\t}\n)\n\nconst tableData = inject<TableDataStore>(props.tableid)\nconst rowEl = ref<HTMLTableRowElement>(null)\nconst rowExpanded = ref<HTMLDivElement>(null)\n\nconst getRowExpandSymbol = () => {\n\treturn tableData.display[props.rowIndex].expanded ? '▼' : '►'\n}\n\nif (props.addNavigation !== undefined) {\n\tconst keyboardNav = Object.assign({}, props.addNavigation)\n\tkeyboardNav['keydown.control.g'] = (event: KeyboardEvent) => {\n\t\tevent.stopPropagation()\n\t\tevent.preventDefault()\n\t\ttableData.toggleRowExpand(props.rowIndex)\n\t}\n\n\tuseKeyboardNav([\n\t\t{\n\t\t\tselectors: rowEl,\n\t\t\thandlers: keyboardNav,\n\t\t},\n\t])\n}\n</script>\n\n<style scoped>\n@import url('@agritheory/themes/default/default.css');\n.row-index {\n\tcolor: var(--header-text-color);\n\tfont-weight: bold;\n\ttext-align: center;\n\tuser-select: none;\n\twidth: 2ch;\n}\n\n.expandable-row {\n\tborder-top: 1px solid var(--row-border-color);\n\theight: var(--atable-row-height);\n}\n\n.expanded-row {\n\tborder-bottom: 1px solid var(--row-border-color);\n\tborder-top: 1px solid var(--row-border-color);\n}\n\n.expanded-row-content {\n\tborder-bottom: 1px solid var(--row-border-color);\n\tborder-top: 1px solid var(--row-border-color);\n\tpadding: 1.5rem;\n}\n</style>\n","<template>\n\t<tr ref=\"rowEl\" :tabindex=\"tabIndex\" v-show=\"rowVisible()\" class=\"table-row\">\n\t\t<!-- render numbered/tree view index -->\n\t\t<td v-if=\"tableData.config.view === 'list'\" :tabIndex=\"-1\" class=\"list-index\">\n\t\t\t{{ rowIndex + 1 }}\n\t\t</td>\n\t\t<td\n\t\t\tv-else-if=\"tableData.config.view === 'tree'\"\n\t\t\t:tabIndex=\"-1\"\n\t\t\tclass=\"tree-index\"\n\t\t\t@click=\"toggleRowExpand(rowIndex)\">\n\t\t\t{{ getRowExpandSymbol() }}\n\t\t</td>\n\t\t<slot v-else name=\"indexCell\"></slot>\n\n\t\t<!-- render cell content -->\n\t\t<slot></slot>\n\t</tr>\n</template>\n\n<script setup lang=\"ts\">\nimport { TableRow } from 'types'\nimport { inject, ref } from 'vue'\nimport { useKeyboardNav } from '@agritheory/utilities'\n\nimport TableDataStore from '.'\n\nconst props = withDefaults(\n\tdefineProps<{\n\t\trow: TableRow\n\t\trowIndex: number\n\t\ttableid: string\n\t\ttabIndex?: number\n\t\taddNavigation?: object\n\t}>(),\n\t{\n\t\ttabIndex: -1,\n\t}\n)\n\nconst tableData = inject<TableDataStore>(props.tableid)\nconst rowEl = ref<HTMLTableRowElement>(null)\nconst numberedRowWidth = tableData.numberedRowWidth.value\n\nconst getRowExpandSymbol = () => {\n\tif (tableData.config.view !== 'tree') {\n\t\treturn ''\n\t}\n\n\tif (tableData.display[props.rowIndex].isRoot) {\n\t\tif (tableData.display[props.rowIndex].childrenOpen) {\n\t\t\treturn '-'\n\t\t} else {\n\t\t\treturn '+'\n\t\t}\n\t}\n\n\tif (tableData.display[props.rowIndex].isParent) {\n\t\tif (tableData.display[props.rowIndex].childrenOpen) {\n\t\t\treturn '-'\n\t\t} else {\n\t\t\treturn '+'\n\t\t}\n\t} else {\n\t\treturn ''\n\t}\n}\n\nconst rowVisible = () => {\n\treturn (\n\t\ttableData.config.view !== 'tree' ||\n\t\ttableData.display[props.rowIndex].isRoot ||\n\t\ttableData.display[props.rowIndex].open\n\t)\n}\n\nconst toggleRowExpand = (rowIndex: number) => {\n\ttableData.toggleRowExpand(rowIndex)\n}\n\nif (props.addNavigation) {\n\tuseKeyboardNav([\n\t\t{\n\t\t\tselectors: rowEl,\n\t\t\thandlers: props.addNavigation,\n\t\t},\n\t])\n}\n</script>\n\n<style scoped>\n@import url('@agritheory/themes/default/default.css');\n.table-row {\n\tborder-top: 1px solid var(--row-border-color);\n\theight: var(--atable-row-height);\n}\n\n.list-index {\n\tcolor: var(--header-text-color);\n\tfont-weight: bold;\n\tpadding-left: var(--atable-row-padding);\n\tpadding-right: 1em;\n\ttext-align: center;\n\tuser-select: none;\n\twidth: v-bind(numberedRowWidth);\n\tmax-width: v-bind(numberedRowWidth);\n}\n\n.tree-index {\n\tcolor: var(--header-text-color);\n\tfont-weight: bold;\n\ttext-align: center;\n\tuser-select: none;\n\twidth: 2ch;\n}\n</style>\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 } from 'uuid'\nimport { computed, reactive } from 'vue'\n\nimport type { TableDisplay, TableRow, TableColumn, TableConfig, TableModal } from '../../types'\n\nexport default class TableDataStore {\n\tid: string\n\trows: TableRow[]\n\tcolumns: TableColumn[]\n\tconfig: TableConfig\n\ttable: { [key: string]: any }\n\tdisplay: TableDisplay[]\n\tmodal: TableModal\n\n\tconstructor(\n\t\tid?: string,\n\t\tcolumns?: TableColumn[],\n\t\trows?: TableRow[],\n\t\tconfig?: TableConfig,\n\t\ttable?: { [key: string]: any },\n\t\tdisplay?: TableDisplay[]\n\t) {\n\t\tthis.id = id || v4()\n\t\tthis.rows = rows\n\t\tthis.columns = reactive(columns)\n\t\tthis.config = reactive(config)\n\t\tthis.table = table || reactive(this.createTableObject())\n\t\tthis.display = this.createDisplayObject(display)\n\t\tthis.modal = reactive({ visible: false })\n\t}\n\n\tcreateTableObject() {\n\t\tconst table = {}\n\t\tfor (const [colIndex, column] of this.columns.entries()) {\n\t\t\tfor (const [rowIndex, row] of this.rows.entries()) {\n\t\t\t\ttable[`${colIndex}:${rowIndex}`] = row[column.name]\n\t\t\t}\n\t\t}\n\t\treturn table\n\t}\n\n\tcreateDisplayObject(display?: TableDisplay[]) {\n\t\tconst defaultDisplay: TableDisplay[] = [Object.assign({}, { modified: false })]\n\n\t\t// TODO: (typing) what is the type of `display` here?\n\t\tif (display) {\n\t\t\tif ('0:0' in display) {\n\t\t\t\treturn display\n\t\t\t}\n\t\t\t// else if ('default' in display) {\n\t\t\t// \t// TODO: (typing) what is the possible input here for 'default'?\n\t\t\t// \tdefaultDisplay = display.default\n\t\t\t// }\n\t\t}\n\n\t\t// TODO: (typing) is this type correct for the parent set?\n\t\tconst parents = new Set<string | number>()\n\t\tfor (let rowIndex = this.rows.length - 1; rowIndex >= 0; rowIndex--) {\n\t\t\tconst row = this.rows[rowIndex]\n\t\t\tif (row.parent) {\n\t\t\t\tparents.add(row.parent)\n\t\t\t}\n\n\t\t\tdefaultDisplay[rowIndex] = {\n\t\t\t\tchildrenOpen: false,\n\t\t\t\texpanded: false,\n\t\t\t\tindent: row.indent || null,\n\t\t\t\tisParent: parents.has(rowIndex),\n\t\t\t\tisRoot: row.parent === null || row.parent === undefined,\n\t\t\t\tmodified: false,\n\t\t\t\topen: row.parent === null || row.parent === undefined,\n\t\t\t\tparent: row.parent,\n\t\t\t}\n\t\t}\n\n\t\treturn reactive(defaultDisplay)\n\t}\n\n\tget zeroColumn() {\n\t\treturn ['list', 'tree', 'list-expansion'].includes(this.config.view)\n\t}\n\n\tget numberedRowWidth() {\n\t\treturn computed(() => {\n\t\t\treturn String(Math.ceil(this.rows.length / 100) + 1) + 'ch'\n\t\t})\n\t}\n\n\tcellData<T>(colIndex: number, rowIndex: number): T {\n\t\treturn this.table[`${colIndex}:${rowIndex}`]\n\t}\n\n\tsetCellData(rowIndex: number, colIndex: number, value: any) {\n\t\tif (this.table[`${colIndex}:${rowIndex}`] !== value) {\n\t\t\tthis.display[rowIndex].modified = true\n\t\t}\n\t\tthis.table[`${colIndex}:${rowIndex}`] = value\n\t\tconst col = this.columns[colIndex]\n\t\tthis.rows[rowIndex][col.name] = value\n\t\treturn this.table[`${colIndex}:${rowIndex}`]\n\t}\n\n\ttoggleRowExpand(rowIndex: number) {\n\t\tif (this.config.view === 'tree') {\n\t\t\tthis.display[rowIndex].childrenOpen = !this.display[rowIndex].childrenOpen\n\t\t\tfor (let index = this.rows.length - 1; index >= 0; index--) {\n\t\t\t\tif (this.display[index].parent === rowIndex) {\n\t\t\t\t\tthis.display[index].open = !this.display[index].open\n\t\t\t\t\tif (this.display[index].childrenOpen) {\n\t\t\t\t\t\tthis.toggleRowExpand(index)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this.config.view === 'list-expansion') {\n\t\t\tthis.display[rowIndex].expanded = !this.display[rowIndex].expanded\n\t\t}\n\t}\n}\n","<template>\n\t<thead v-if=\"columns.length\">\n\t\t<tr class=\"atable-header-row\" tabindex=\"-1\">\n\t\t\t<th v-if=\"tableData.zeroColumn\" id=\"header-index\" />\n\t\t\t<th v-for=\"(column, colKey) in columns\" :key=\"colKey\" tabindex=\"-1\" :style=\"getHeaderCellStyle(column)\">\n\t\t\t\t<slot>{{ column.label || String.fromCharCode(colKey + 97).toUpperCase() }}</slot>\n\t\t\t</th>\n\t\t</tr>\n\t</thead>\n</template>\n\n<script setup lang=\"ts\">\nimport { CSSProperties, inject } from 'vue'\n\nimport { TableColumn, TableConfig } from 'types'\nimport TableDataStore from '.'\n\nconst props = defineProps<{\n\tcolumns: TableColumn[]\n\tconfig?: TableConfig\n\ttableid?: string\n}>()\n\nconst tableData = inject<TableDataStore>(props.tableid)\n\nconst numberedRowWidth = tableData.numberedRowWidth.value\nconst getHeaderCellStyle = (column: TableColumn): CSSProperties => ({\n\tminWidth: column.width || '40ch',\n\ttextAlign: column.align || 'center',\n\twidth: tableData.config.fullWidth ? 'auto' : null,\n})\n</script>\n\n<style scoped>\n@import url('@agritheory/themes/default/default.css');\nthead {\n\tbackground-color: var(--gray-5);\n}\n\n#header-index {\n\twidth: v-bind(numberedRowWidth);\n\tmax-width: v-bind(numberedRowWidth);\n}\n\nth {\n\tborder-width: 0px;\n\tborder-style: solid;\n\tborder-radius: 0px;\n\tpadding-left: 0.5ch;\n\tpadding-right: 0.5ch;\n\tpadding-top: var(--atable-row-padding);\n\tpadding-bottom: var(--atable-row-padding);\n\tcolor: var(--gray-60);\n\theight: var(--atable-row-height);\n}\n\nth:focus {\n\toutline: none;\n}\n</style>\n","<template>\n\t<div ref=\"amodal\" class=\"amodal\" tabindex=\"-1\" @click=\"handleInput\" @input=\"handleInput\">\n\t\t<slot />\n\t</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject } from 'vue'\n\nimport TableDataStore from '.'\n\nconst props = defineProps<{\n\tcolIndex?: number\n\trowIndex?: number\n\ttableid?: string\n}>()\n\nconst tableData = inject<TableDataStore>(props.tableid)\n\nconst handleInput = (event: Event) => {\n\tevent.stopPropagation()\n}\n\n// const cellBackgroundColor = computed(() => {\n// \tif (tableData.modal.parent) {\n// \t\tlet computedstyle = window.getComputedStyle(tableData.modal.parent)\n// \t\treturn 'blue'\n// \t} else {\n// \t\treturn 'inherit'\n// \t}\n// })\n</script>\n\n<style scoped>\n@import url('@agritheory/themes/default/default.css');\ndiv {\n\tz-index: 100;\n\tposition: absolute;\n\tbackground-color: var(--row-color-zebra-dark);\n\t/* margin: 0px;\n\toutline: none;\n\tbox-shadow: none;\n\tcolor: var(--cell-text-color);\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\tpadding-left: 0.5ch;\n\tpadding-right: 0.5ch;\n\tfont-size: var(--table-font-size); */\n}\n</style>\n","<template>\n\t<table class=\"atable\" :style=\"{ width: tableData.config.fullWidth ? '100%' : 'auto' }\">\n\t\t<slot name=\"header\" :data=\"tableData\">\n\t\t\t<ATableHeader :columns=\"tableData.columns\" :config=\"tableData.config\" :tableid=\"tableData.id\" />\n\t\t</slot>\n\n\t\t<tbody>\n\t\t\t<slot name=\"body\" :data=\"tableData\">\n\t\t\t\t<ARow\n\t\t\t\t\tv-for=\"(row, rowIndex) in tableData.rows\"\n\t\t\t\t\t:key=\"row.id || v4()\"\n\t\t\t\t\t:row=\"row\"\n\t\t\t\t\t:rowIndex=\"rowIndex\"\n\t\t\t\t\t:tableid=\"tableData.id\">\n\t\t\t\t\t<ACell\n\t\t\t\t\t\tv-for=\"(col, colIndex) in tableData.columns\"\n\t\t\t\t\t\t:key=\"`${colIndex}:${rowIndex}`\"\n\t\t\t\t\t\t:tableid=\"tableData.id\"\n\t\t\t\t\t\t:col=\"col\"\n\t\t\t\t\t\tspellcheck=\"false\"\n\t\t\t\t\t\t:rowIndex=\"rowIndex\"\n\t\t\t\t\t\t:colIndex=\"colIndex + (tableData.zeroColumn ? 0 : -1)\"\n\t\t\t\t\t\t:component=\"col.cellComponent\"\n\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\ttextAlign: col?.align || 'center',\n\t\t\t\t\t\t\tminWidth: col?.width || '40ch',\n\t\t\t\t\t\t\twidth: tableData.config.fullWidth ? 'auto' : null,\n\t\t\t\t\t\t}\" />\n\t\t\t\t</ARow>\n\t\t\t</slot>\n\t\t</tbody>\n\n\t\t<slot name=\"footer\" :data=\"tableData\" />\n\t\t<slot name=\"modal\" :data=\"tableData\">\n\t\t\t<ATableModal\n\t\t\t\tv-show=\"tableData.modal.visible\"\n\t\t\t\t:colIndex=\"tableData.modal.colIndex\"\n\t\t\t\t:rowIndex=\"tableData.modal.rowIndex\"\n\t\t\t\t:tableid=\"tableData.id\"\n\t\t\t\t:style=\"{\n\t\t\t\t\tleft: tableData.modal.left + 'px',\n\t\t\t\t\ttop: tableData.modal.top + 'px',\n\t\t\t\t\tmaxWidth: tableData.modal.width + 'px',\n\t\t\t\t}\">\n\t\t\t\t<template #default>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:key=\"`${tableData.modal.rowIndex}:${tableData.modal.colIndex}`\"\n\t\t\t\t\t\t:is=\"tableData.modal.component\"\n\t\t\t\t\t\t:colIndex=\"tableData.modal.colIndex\"\n\t\t\t\t\t\t:rowIndex=\"tableData.modal.rowIndex\"\n\t\t\t\t\t\t:tableid=\"tableData.id\"\n\t\t\t\t\t\tv-bind=\"tableData.modal.componentProps\" />\n\t\t\t\t</template>\n\t\t\t</ATableModal>\n\t\t</slot>\n\t</table>\n</template>\n\n<script setup lang=\"ts\">\nimport { v4 } from 'uuid'\nimport { nextTick, provide, watch } from 'vue'\n\nimport { TableColumn, TableConfig, TableRow } from 'types'\nimport TableDataStore from '.'\nimport ACell from '@/components/ACell.vue'\nimport ARow from '@/components/ARow.vue'\nimport ATableHeader from '@/components/ATableHeader.vue'\nimport ATableModal from '@/components/ATableModal.vue'\n\nconst props = withDefaults(\n\tdefineProps<{\n\t\tid?: string\n\t\tmodelValue: TableRow[]\n\t\tcolumns: TableColumn[]\n\t\trows?: TableRow[]\n\t\tconfig?: TableConfig\n\t\ttableid?: string\n\t}>(),\n\t{\n\t\trows: () => [],\n\t\tconfig: () => new Object(),\n\t}\n)\n\nconst emit = defineEmits(['update:modelValue'])\n\nlet rows = props.modelValue ? props.modelValue : props.rows\n\nlet tableData = new TableDataStore(props.id, props.columns, rows, props.config)\nprovide(tableData.id, tableData)\n\nwatch(\n\t() => tableData.rows,\n\t(newValue, oldValue) => {\n\t\temit('update:modelValue', newValue)\n\t},\n\t{ deep: true }\n)\n\nconst formatCell = (event?: KeyboardEvent, column?: TableColumn, cellData?: any) => {\n\tlet colIndex: number\n\tconst target = event?.target as HTMLTableCellElement\n\tif (event) {\n\t\tcolIndex = target.cellIndex + (tableData.zeroColumn ? -1 : 0)\n\t} else if (column && cellData) {\n\t\tcolIndex = tableData.columns.indexOf(column)\n\t}\n\n\tif (!column && 'format' in tableData.columns[colIndex]) {\n\t\t// TODO: (utils) create helper to extract format from string\n\t\tconst format = tableData.columns[colIndex].format\n\t\tif (typeof format === 'function') {\n\t\t\treturn format(target.innerHTML)\n\t\t} else if (typeof format === 'string') {\n\t\t\t// parse format function from string\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-implied-eval\n\t\t\tconst formatFn: (args: any) => any = Function(`\"use strict\";return (${format})`)()\n\t\t\treturn formatFn(target.innerHTML)\n\t\t} else {\n\t\t\treturn target.innerHTML\n\t\t}\n\t} else if (cellData && 'format' in column) {\n\t\tconst format = column.format\n\t\tif (typeof format === 'function') {\n\t\t\treturn format(cellData)\n\t\t} else if (typeof format === 'string') {\n\t\t\t// parse format function from string\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-implied-eval\n\t\t\tconst formatFn: (args: any) => any = Function(`\"use strict\";return (${format})`)()\n\t\t\treturn formatFn(cellData)\n\t\t} else {\n\t\t\treturn cellData\n\t\t}\n\t} else if (cellData && column.type.toLowerCase() in ['int', 'decimal', 'float', 'number', 'percent']) {\n\t\treturn cellData\n\t\t// TODO: number formatting\n\t} else {\n\t\treturn cellData\n\t}\n}\n\nconst moveCursorToEnd = (target: HTMLElement) => {\n\ttarget.focus()\n\tdocument.execCommand('selectAll', false, null)\n\tdocument.getSelection().collapseToEnd()\n}\n\nconst clickOutside = (event: MouseEvent) => {\n\tif (!tableData.modal.parent?.contains(event.target as HTMLElement)) {\n\t\tif (tableData.modal.visible) {\n\t\t\t// call set data\n\t\t\ttableData.modal.visible = false\n\t\t}\n\t}\n}\n\nwindow.addEventListener('click', clickOutside)\nwindow.addEventListener('keydown', (event: KeyboardEvent) => {\n\tif (event.key === 'Escape') {\n\t\tif (tableData.modal.visible) {\n\t\t\ttableData.modal.visible = false\n\n\t\t\t// focus on the parent cell again\n\t\t\tconst $parent = tableData.modal.parent\n\t\t\tif ($parent) {\n\t\t\t\t// wait for the modal to close\n\t\t\t\tvoid nextTick().then(() => {\n\t\t\t\t\t// for some reason, the parent is not immediately visible in the DOM;\n\t\t\t\t\t// re-fetching the cell to add focus instead\n\t\t\t\t\tconst rowIndex = $parent.dataset.rowindex\n\t\t\t\t\tconst colIndex = $parent.dataset.colindex\n\t\t\t\t\tconst $parentCell = document.querySelectorAll(`[data-rowindex='${rowIndex}'][data-colindex='${colIndex}']`)\n\t\t\t\t\tif ($parentCell) {\n\t\t\t\t\t\t;($parentCell[0] as HTMLTableCellElement).focus()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n})\n</script>\n\n<style scoped>\n@import url('@agritheory/themes/default/default.css');\n\ntable {\n\tdisplay: table;\n\tborder-collapse: collapse;\n\tcaret-color: var(--brand-color);\n}\n\ntable.atable,\n.atable {\n\tfont-family: var(--atable-font-family);\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\tfont-size: var(--table-font-size);\n\tborder-collapse: collapse;\n}\n\nth {\n\tbox-sizing: border-box;\n\tbackground-color: var(--brand-color);\n\tborder-width: 1px;\n\tborder-style: solid;\n\tborder-color: var(--header-border-color);\n\tborder-radius: 0px;\n\tcolor: var(--header-text-color);\n}\n</style>\n","import { App } from 'vue'\n\nimport ACell from '@/components/ACell.vue'\nimport AExpansionRow from '@/components/AExpansionRow.vue'\nimport ARow from '@/components/ARow.vue'\nimport ATable from '@/components/ATable.vue'\nimport ATableHeader from '@/components/ATableHeader.vue'\nimport ATableModal from '@/components/ATableModal.vue'\nimport TableDataStore from './components'\n\nfunction install(app: App /* options */) {\n\tapp.component('ACell', ACell)\n\tapp.component('AExpansionRow', AExpansionRow)\n\tapp.component('ARow', ARow)\n\tapp.component('ATable', ATable)\n\tapp.component('ATableHeader', ATableHeader)\n\tapp.component('ATableModal', ATableModal)\n}\n\nexport { install, ACell, AExpansionRow, ARow, ATable, ATableHeader, ATableModal, TableDataStore }\n"],"names":["v","M","F","e","j","H","Q","q","G","U","K","y","t","r","N","z","n","o","l","s","c","a","g","p","i","C","D","d","O","T","J","B","P","X","I","Y","Z","_","ee","te","f","u","A","E","ne","w","x","re","k","h","S","b","L","R","m","oe","le","ie","$","W","V","tableData","inject","props","cell","ref","cellModified","displayValue","computed","data","format","handleInput","event","domRect","cellWidth","handlers","defaultKeypressHandlers","useKeyboardNav","textAlign","currentData","onFocus","onChange","getIndent","colKey","indent","cellStyle","_a","rowEl","rowExpanded","getRowExpandSymbol","keyboardNav","numberedRowWidth","rowVisible","toggleRowExpand","rowIndex","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","arr","offset","randomUUID","native","v4","options","buf","rnds","TableDataStore","id","columns","rows","config","table","display","reactive","colIndex","column","row","defaultDisplay","parents","value","col","index","getHeaderCellStyle","provide","watch","newValue","oldValue","emit","clickOutside","$parent","nextTick","$parentCell","install","app","ACell","AExpansionRow","ARow","ATable","ATableHeader","ATableModal"],"mappings":"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","x_google_ignoreList":[4,5,6,7]}